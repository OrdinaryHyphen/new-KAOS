{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\user\\\\KAOS-modeling-editor\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport _objectSpread from \"C:\\\\Users\\\\user\\\\KAOS-modeling-editor\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"C:\\\\Users\\\\user\\\\KAOS-modeling-editor\\\\src\\\\pages\\\\index.js\";\nimport React from 'react';\nimport 'typeface-roboto';\nimport PropTypes from 'prop-types';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport { withStyles } from '@material-ui/core/styles';\nimport withRoot from '../withRoot';\nimport ButtonAppBar from '../ButtonAppBar';\nimport Graph from '../Graph';\nimport TextEditor from '../TextEditor';\nimport MainMenu from '../MainMenu';\nimport HelpMenu from '../HelpMenu';\nimport SettingsDialog from '../SettingsDialog';\nimport OpenFromBrowserDialog from '../OpenFromBrowserDialog';\nimport SaveAsToBrowserDialog from '../SaveAsToBrowserDialog';\nimport InsertPanels from '../InsertPanels';\nimport FormatDrawer from '../FormatDrawer';\nimport DescriptionDrawer from '../DescriptionDrawer';\nimport { schemeCategory10 as d3_schemeCategory10 } from 'd3-scale-chromatic';\nimport { schemePaired as d3_schemePaired } from 'd3-scale-chromatic';\nimport KeyboardShortcutsDialog from '../KeyboardShortcutsDialog';\nimport MouseOperationsDialog from '../MouseOperationsDialog';\nimport AboutDialog from '../AboutDialog';\nimport LabelEditDialog from '../LabelEditDialog';\nimport { parse as qs_parse } from 'qs';\nimport { stringify as qs_stringify } from 'qs';\nimport ExportAsUrlDialog from '../ExportAsUrlDialog';\nimport ExportAsSvgDialog from '../ExportAsSvgDialog';\nimport { graphvizVersion } from '../graphvizVersion';\nimport UpdatedSnackbar from '../UpdatedSnackbar';\nimport packageJSON from '../../package.json';\nimport Axios from 'axios';\n\nconst styles = theme => ({\n  root: {\n    textAlign: 'center'\n  },\n  paper: {\n    // viewport height - app bar - 2 * padding\n    height: \"calc(100vh - 64px - 2 * 12px)\"\n  },\n  paperWhenUpdatedSnackbarIsOpen: {\n    \"margin-top\": \"64px\",\n    height: \"calc(100vh - 64px - 64px - 2 * 12px)\"\n  }\n});\n\nconst defaultElevation = 2;\nconst focusedElevation = 8;\n\nconst fs = require('fs');\n\nclass Index extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.setPersistentState = updater => {\n      this.setState(state => {\n        if (typeof updater === 'function') {\n          var obj = updater(state);\n        } else {\n          obj = updater;\n        }\n\n        if (obj != null) {\n          Object.keys(obj).forEach(key => {\n            let value = obj[key];\n\n            if (typeof value === 'boolean') {\n              value = value.toString();\n            } else if (typeof value === 'object') {\n              value = JSON.stringify(value);\n            }\n\n            localStorage.setItem(key, value);\n          });\n        }\n\n        return obj;\n      });\n    };\n\n    this.handleTextChange = (text, undoRedoState) => {\n      this.setPersistentState(state => {\n        const newState = {\n          name: state.name || (text ? this.createUntitledName(state.projects) : ''),\n          dotSrc: text\n        };\n\n        if (!this.disableDotSrcLastChangeTimeUpdate) {\n          newState.dotSrcLastChangeTime = Date.now();\n        }\n\n        return newState;\n      });\n      this.disableDotSrcLastChangeTimeUpdate = false;\n\n      if (this.resetUndoAtNextTextChange) {\n        this.resetUndoStack();\n        undoRedoState = {\n          hasUndo: false,\n          hasRedo: false\n        };\n        this.resetUndoAtNextTextChange = false;\n      }\n\n      this.setState(undoRedoState);\n    };\n\n    this.handleGoalDescriptionChange = description => {\n      this.setPersistentState(state => {\n        const newState = {\n          name: state.name || (description ? this.createUntitledName(state.projects) : ''),\n          goalDescription: description\n        };\n        return newState;\n      });\n    };\n\n    this.handleGoalDescriptionParsing = () => {\n      let handleTextChange = this.handleTextChange;\n      Axios.post('http://127.0.0.1:5000/parse', {\n        post_text: this.state.goalDescription\n      }, {\n        headers: {\n          'Access-Control-Allow-Origin': '*'\n        }\n      }).then(function (res) {\n        let result = res.data.result;\n        result = result.replace(/\\n(?!\t)/g, \" \\\\n\");\n        result = result.replace(/\\\\n fill/g, \"fill\");\n        result = result.replaceAll(\"\\\\n}\", \"}\");\n        result = result.replace(/\\\\n$/, \"\");\n        result = result.replace('label=Root', 'label=\"Root\"');\n        console.log(result);\n        handleTextChange(result);\n      });\n      this.appendLog(\"Total Labels Cloned: \".concat(this.state.howOftenLabelsAreCloned));\n      this.appendLog(\"Total Labels Edited: \".concat(this.state.howOftenLabelsAreEdited));\n      this.appendLog(\"Total Edges Edited: \".concat(this.state.howOftenEdgesAreEdited));\n      this.setState({\n        howOftenLabelsAreCloned: 0,\n        howOftenLabelsAreEdited: 0,\n        howOftenEdgesAreEdited: 0\n      });\n    };\n\n    this.appendLog = log => {\n      console.log(log); // couldn't write log from brower\n    };\n\n    this.handleMainMenuButtonClick = anchorEl => {\n      this.setState({\n        mainMenuIsOpen: true,\n        mainMenuAnchorEl: anchorEl\n      });\n    };\n\n    this.handleNewClick = () => {\n      this.handleSaveAsToBrowser('');\n      this.resetUndoAtNextTextChange = true;\n    };\n\n    this.handleRenameClick = () => {\n      this.setState({\n        rename: true,\n        saveToBrowserAsDialogIsOpen: true\n      });\n    };\n\n    this.handleLabelCloning = () => {\n      this.appendLog(\"Label Cloned: \");\n      this.setState({\n        howOftenLabelsAreCloned: this.state.howOftenLabelsAreCloned + 1\n      });\n    };\n\n    this.handleEdgeEditing = log => {\n      this.appendLog(\"Edge Edited: \".concat(log));\n      this.setState({\n        howOftenEdgesAreEdited: this.state.howOftenEdgesAreEdited + 1\n      });\n    };\n\n    this.handleExportAsUrlClick = () => {\n      this.setState({\n        exportAsUrlDialogIsOpen: true\n      });\n    };\n\n    this.handleExportAsSvgClick = () => {\n      this.setState({\n        exportAsSvgDialogIsOpen: true\n      });\n    };\n\n    this.handleExportAsUrlClose = () => {\n      this.setState({\n        exportAsUrlDialogIsOpen: false\n      });\n    };\n\n    this.handleExportAsSvgClose = () => {\n      this.setState({\n        exportAsSvgDialogIsOpen: false\n      });\n    };\n\n    this.handleUndoButtonClick = () => {\n      this.undo();\n    };\n\n    this.handleRedoButtonClick = () => {\n      this.redo();\n    };\n\n    this.handleMainMenuClose = () => {\n      this.setState({\n        mainMenuIsOpen: false\n      });\n    };\n\n    this.handleHelpButtonClick = anchorEl => {\n      this.setState({\n        helpMenuIsOpen: true,\n        helpMenuAnchorEl: anchorEl\n      });\n    };\n\n    this.handleHelpMenuClose = () => {\n      this.setState({\n        helpMenuIsOpen: false\n      });\n    };\n\n    this.handleInsertButtonClick = () => {\n      this.setFocusIf('insertPanelsAreOpen', null, 'InsertPanels');\n      this.setPersistentState({\n        insertPanelsAreOpen: !this.state.insertPanelsAreOpen\n      });\n    };\n\n    this.handleNodeFormatButtonClick = () => {\n      this.setFocusIf('nodeFormatDrawerIsOpen', null, 'NodeFormatDrawer');\n      this.setPersistentState({\n        nodeFormatDrawerIsOpen: !this.state.nodeFormatDrawerIsOpen,\n        edgeFormatDrawerIsOpen: false,\n        goalDescriptionDrawerIsOpen: false\n      });\n    };\n\n    this.handleNodeFormatDrawerClose = () => {\n      this.setPersistentState({\n        nodeFormatDrawerIsOpen: false\n      });\n      this.setFocus(null);\n    };\n\n    this.handleEdgeFormatButtonClick = () => {\n      this.setFocusIf('edgeFormatDrawerIsOpen', null, 'EdgeFormatDrawer');\n      this.setPersistentState({\n        nodeFormatDrawerIsOpen: false,\n        edgeFormatDrawerIsOpen: !this.state.edgeFormatDrawerIsOpen,\n        goalDescriptionDrawerIsOpen: false\n      });\n    };\n\n    this.handleEdgeFormatDrawerClose = () => {\n      this.setPersistentState({\n        edgeFormatDrawerIsOpen: false\n      });\n      this.setFocus(null);\n    };\n\n    this.handleGoalDescriptionButtonClick = () => {\n      this.setFocusIf('goalDescriptionDrawerIsOpen', null, 'GaolDescriptionDrawer');\n      this.setPersistentState({\n        nodeFormatDrawerIsOpen: false,\n        edgeFormatDrawerIsOpen: false,\n        goalDescriptionDrawerIsOpen: !this.state.goalDescriptionDrawerIsOpen\n      });\n    };\n\n    this.handleGoalDescriptionDrawerClose = () => {\n      this.setPersistentState({\n        goalDescriptionDrawerIsOpen: false\n      });\n      this.setFocus(null);\n    };\n\n    this.handleSettingsClick = () => {\n      this.setState({\n        settingsDialogIsOpen: true\n      });\n    };\n\n    this.handleSettingsClose = () => {\n      this.setState({\n        settingsDialogIsOpen: false\n      });\n    };\n\n    this.handleOpenFromBrowserClick = () => {\n      this.setState({\n        openFromBrowserDialogIsOpen: true\n      });\n    };\n\n    this.handleOpenFromBrowserClose = () => {\n      this.setState({\n        openFromBrowserDialogIsOpen: false\n      });\n    };\n\n    this.handleOpenFromBrowser = newCurrentName => {\n      const currentName = this.state.name;\n\n      if (newCurrentName !== currentName) {\n        this.setPersistentState(state => {\n          const projects = _objectSpread({}, state.projects);\n\n          if (currentName) {\n            const currentProject = {\n              dotSrc: state.dotSrc,\n              dotSrcLastChangeTime: state.dotSrcLastChangeTime,\n              svg: this.getSvgString()\n            };\n            projects[currentName] = currentProject;\n          }\n\n          const newCurrentProject = projects[newCurrentName];\n          delete projects[newCurrentName];\n          this.disableDotSrcLastChangeTimeUpdate = true;\n          return _objectSpread({\n            name: newCurrentName\n          }, newCurrentProject, {\n            projects: projects\n          });\n        });\n        this.resetUndoAtNextTextChange = true;\n      }\n\n      this.handleOpenFromBrowserClose();\n    };\n\n    this.createUntitledName = (projects, currentName) => {\n      const baseName = 'Untitled Graph';\n      let newName = baseName;\n\n      while (projects[newName] || newName === currentName) {\n        newName = baseName + ' ' + (+newName.replace(baseName, '') + 1);\n      }\n\n      return newName;\n    };\n\n    this.handleOpenFromBrowserDelete = nameToDelete => {\n      this.setPersistentState(state => {\n        const currentName = state.name;\n\n        if (nameToDelete === currentName) {\n          return {\n            name: '',\n            dotSrc: '',\n            dotSrcLastChangeTime: Date.now()\n          };\n        } else {\n          const projects = _objectSpread({}, state.projects);\n\n          delete projects[nameToDelete];\n          return {\n            projects: projects\n          };\n        }\n      });\n    };\n\n    this.handleSaveAsToBrowserClick = () => {\n      this.setState({\n        rename: false,\n        saveToBrowserAsDialogIsOpen: true\n      });\n    };\n\n    this.handleSaveAsToBrowserClose = () => {\n      this.setState({\n        saveToBrowserAsDialogIsOpen: false\n      });\n    };\n\n    this.handleSaveAsToBrowser = (newName, newDotSrc) => {\n      const currentName = this.state.name;\n\n      if (newName !== currentName) {\n        this.setPersistentState(state => {\n          const projects = _objectSpread({}, state.projects);\n\n          delete projects[newName];\n\n          if (currentName && !state.rename) {\n            const currentProject = {\n              dotSrc: this.state.dotSrc,\n              dotSrcLastChangeTime: state.dotSrcLastChangeTime,\n              svg: this.getSvgString()\n            };\n            projects[currentName] = currentProject;\n          }\n\n          return {\n            projects: _objectSpread({}, projects),\n            name: newName,\n            dotSrc: newDotSrc ? newDotSrc : newName ? state.dotSrc : '',\n            dotSrcLastChangeTime: newDotSrc ? Date.now() : state.dotSrcLastChangeTime\n          };\n        });\n      }\n\n      this.handleSaveAsToBrowserClose();\n    };\n\n    this.handleEngineSelectChange = engine => {\n      this.setPersistentState({\n        engine: engine\n      });\n    };\n\n    this.handleFitGraphSwitchChange = fitGraph => {\n      this.setPersistentState({\n        fitGraph: fitGraph\n      });\n    };\n\n    this.handleTransitionDurationChange = transitionDuration => {\n      this.setPersistentState({\n        transitionDuration: transitionDuration\n      });\n    };\n\n    this.handleTweenPathsSwitchChange = tweenPaths => {\n      this.setPersistentState({\n        tweenPaths: tweenPaths\n      });\n    };\n\n    this.handleTweenShapesSwitchChange = tweenShapes => {\n      this.setPersistentState({\n        tweenShapes: tweenShapes\n      });\n    };\n\n    this.handleTweenPrecisionChange = tweenPrecision => {\n      this.setPersistentState({\n        tweenPrecision: tweenPrecision\n      });\n    };\n\n    this.handleHoldOffChange = holdOff => {\n      this.setPersistentState({\n        holdOff: holdOff\n      });\n    };\n\n    this.handleFontSizeChange = fontSize => {\n      this.setPersistentState({\n        fontSize: fontSize\n      });\n    };\n\n    this.handleTabSizeChange = tabSize => {\n      this.setPersistentState({\n        tabSize: tabSize\n      });\n    };\n\n    this.handleNodeStyleChange = style => {\n      this.setPersistentState(state => ({\n        defaultNodeAttributes: _objectSpread({}, state.defaultNodeAttributes, {\n          style: style\n        })\n      }));\n    };\n\n    this.handleNodeColorChange = color => {\n      this.setPersistentState(state => ({\n        defaultNodeAttributes: _objectSpread({}, state.defaultNodeAttributes, {\n          color: color\n        })\n      }));\n    };\n\n    this.handleNodeFillColorChange = color => {\n      this.setPersistentState(state => ({\n        defaultNodeAttributes: _objectSpread({}, state.defaultNodeAttributes, {\n          fillcolor: color\n        })\n      }));\n    };\n\n    this.handleEdgeStyleChange = style => {\n      this.setPersistentState(state => ({\n        defaultEdgeAttributes: _objectSpread({}, state.defaultEdgeAttributes, {\n          style: style\n        })\n      }));\n    };\n\n    this.handleEdgeColorChange = color => {\n      this.setPersistentState(state => ({\n        defaultEdgeAttributes: _objectSpread({}, state.defaultEdgeAttributes, {\n          color: color\n        })\n      }));\n    };\n\n    this.handleEdgeFillColorChange = color => {\n      this.setPersistentState(state => ({\n        defaultEdgeAttributes: _objectSpread({}, state.defaultEdgeAttributes, {\n          fillcolor: color\n        })\n      }));\n    };\n\n    this.handleKeyboardShortcutsClick = () => {\n      this.setState({\n        keyboardShortcutsDialogIsOpen: true\n      });\n    };\n\n    this.handleKeyboardShortcutsDialogClose = () => {\n      this.setState({\n        keyboardShortcutsDialogIsOpen: false\n      });\n    };\n\n    this.handleMouseOperationsClick = () => {\n      this.setState({\n        mouseOperationsDialogIsOpen: true\n      });\n    };\n\n    this.handleMouseOperationsDialogClose = () => {\n      this.setState({\n        mouseOperationsDialogIsOpen: false\n      });\n    };\n\n    this.handleAboutClick = () => {\n      this.setState({\n        aboutDialogIsOpen: true\n      });\n    };\n\n    this.handleAboutDialogClose = () => {\n      this.setState({\n        aboutDialogIsOpen: false\n      });\n    };\n\n    this.handleLabelEditClick = node_title => {\n      console.log(node_title);\n      this.setState({\n        nodeTitle: node_title,\n        originalLabel: this.findNodeLabelFromDotSrc(node_title),\n        labelEditDialogIsOpen: true\n      });\n    };\n\n    this.handleLabelEditDialogClose = () => {\n      this.setState({\n        labelEditDialogIsOpen: false\n      });\n    };\n\n    this.handleLabelConfirmation = (prev_label, label) => {\n      //Change Labels\n      console.log(label);\n      let new_label = label.replace(/\\n/g, '\\\\n');\n      let new_src = this.state.dotSrc;\n      let regexp = new RegExp(this.state.nodeTitle + ' \\\\[ *label=\".*?\"', 'g');\n      new_src = new_src.replace(regexp, this.state.nodeTitle + ' [label=\"' + new_label + '\"');\n      console.log(new_src);\n      this.handleTextChange(new_src);\n      this.handleLabelEditDialogClose(new_src);\n      let diff = this.diff(prev_label, new_label);\n      this.appendLog(\"Labels Edited: \".concat(prev_label, \" => \").concat(label, \"  (\").concat(diff, \")\"));\n      this.setState({\n        howOftenLabelsAreEdited: this.state.howOftenLabelsAreEdited + diff\n      });\n      console.log(\"\".concat(this.state.howOftenLabelsAreCloned, \", \").concat(this.state.howOftenLabelsAreEdited, \", \").concat(this.state.howOftenEdgesAreEdited));\n    };\n\n    this.diff = (old_string, string) => {\n      //calculate how 2 strings differ and return by value\n      //Reference: https://note.affi-sapo-sv.com/js-diff.php\n      let old_array = Array.from(old_string);\n      let array = Array.from(string);\n\n      let _ref = old_array.length < array.length ? [old_array, array] : [array, old_array],\n          _ref2 = _slicedToArray(_ref, 2),\n          A = _ref2[0],\n          B = _ref2[1];\n\n      let delta = B.length - A.length;\n      let max = Math.max;\n      let p = -1;\n      let fp = [];\n\n      for (let i = -(A.length + 1); i <= B.length + 1; i++) fp[i] = -1;\n\n      do {\n        p++;\n\n        for (let k = -p; k <= delta - 1; k++) fp[k] = this.snake(k, max(fp[k - 1] + 1, fp[k + 1]), A, B);\n\n        for (let k = delta + p; k >= delta + 1; k--) fp[k] = this.snake(k, max(fp[k - 1] + 1, fp[k + 1]), A, B);\n\n        fp[delta] = this.snake(delta, max(fp[delta - 1] + 1, fp[delta + 1]), A, B);\n      } while (fp[delta] !== B.length);\n\n      console.log(delta + 2 * p);\n      return delta + 2 * p;\n    };\n\n    this.snake = (k, y, A, B) => {\n      let x = y - k;\n\n      while (x < A.length && y < B.length && A[x] === B[y]) {\n        x++;\n        y++;\n      }\n\n      return y;\n    };\n\n    this.findNodeLabelFromDotSrc = node_title => {\n      let regexp = new RegExp(node_title + ' \\\\[label=\".*?\"', 'g');\n      let label = this.state.dotSrc.match(regexp)[0];\n      label = label.replace(/(g|n).*? \\[ *?label=/g, '').replace(/\\\"/g, '').replace(/\\\\n/g, '\\n');\n      console.log(label);\n      return label;\n    };\n\n    this.registerNodeShapeClick = handleNodeShapeClick => {\n      this.handleNodeShapeClick = handleNodeShapeClick;\n    };\n\n    this.registerNodeShapeDragStart = handleNodeShapeDragStart => {\n      this.handleNodeShapeDragStart = handleNodeShapeDragStart;\n    };\n\n    this.registerNodeShapeDragEnd = handleNodeShapeDragEnd => {\n      this.handleNodeShapeDragEnd = handleNodeShapeDragEnd;\n    };\n\n    this.handleZoomInButtonClick = () => {};\n\n    this.handleZoomOutButtonClick = () => {};\n\n    this.handleZoomOutMapButtonClick = () => {};\n\n    this.handleZoomResetButtonClick = () => {};\n\n    this.registerZoomInButtonClick = handleZoomInButtonClick => {\n      this.handleZoomInButtonClick = handleZoomInButtonClick;\n    };\n\n    this.registerZoomOutButtonClick = handleZoomOutButtonClick => {\n      this.handleZoomOutButtonClick = handleZoomOutButtonClick;\n    };\n\n    this.registerZoomOutMapButtonClick = handleZoomOutMapButtonClick => {\n      this.handleZoomOutMapButtonClick = handleZoomOutMapButtonClick;\n    };\n\n    this.registerZoomResetButtonClick = handleZoomResetButtonClick => {\n      this.handleZoomResetButtonClick = handleZoomResetButtonClick;\n    };\n\n    this.registerGetSvg = getSvg => {\n      this.getSvg = getSvg;\n    };\n\n    this.handleGraphComponentSelect = components => {\n      this.setState({\n        selectedGraphComponents: components\n      });\n    };\n\n    this.handleGraphInitialized = () => {\n      this.setState({\n        graphInitialized: true\n      });\n      this.setPersistentState({\n        svg: this.getSvgString()\n      });\n    };\n\n    this.handleError = error => {\n      if (error) {\n        error.numLines = this.state.dotSrc.split('\\n').length;\n      }\n\n      if (JSON.stringify(error) !== JSON.stringify(this.state.error)) {\n        this.setState({\n          error: error\n        });\n      }\n    };\n\n    this.registerOverwriteText = overwriteText => {\n      this.overwriteText = overwriteText;\n      console.log(this.overwriteText);\n    };\n\n    this.registerUndo = undo => {\n      this.undo = undo;\n    };\n\n    this.registerRedo = redo => {\n      this.redo = redo;\n    };\n\n    this.registerUndoReset = resetUndoStack => {\n      this.resetUndoStack = resetUndoStack;\n    };\n\n    this.handleTextEditorFocus = () => {\n      this.setFocus('TextEditor');\n    };\n\n    this.handleTextEditorBlur = () => {\n      // Needed when the user clicks outside of a pane,\n      // e.g. the app bar or the background\n      this.setFocusIfFocusIs('TextEditor', null);\n    };\n\n    this.handleGraphFocus = () => {\n      this.setFocus('Graph');\n    };\n\n    this.handleInsertPanelsClick = () => {\n      this.setFocus('InsertPanels');\n    };\n\n    this.handleNodeFormatDrawerClick = () => {\n      this.setFocus('NodeFormatDrawer');\n      this.setFocusIf('nodeFormatDrawerIsOpen', 'NodeFormatDrawer', null);\n    };\n\n    this.handleEdgeFormatDrawerClick = () => {\n      this.setFocus('EdgeFormatDrawer');\n      this.setFocusIf('edgeFormatDrawerIsOpen', 'EdgeFormatDrawer', null);\n    };\n\n    this.handleGoalDescriptionDrawerClick = () => {\n      this.setFocus('GoalDescriptionDrawer');\n      this.setFocusIf('GoalDescriptionDrawerIsOpen', 'GoalDescriptionDrawer', null);\n    };\n\n    this.handleUpdatedSnackbarClose = () => {\n      this.setState({\n        \"updatedSnackbarIsOpen\": false\n      });\n      this.setPersistentState({\n        \"version\": packageJSON.version,\n        \"graphvizVersion\": this.state.graphvizVersion\n      });\n    };\n\n    this.setFocus = focusedPane => {\n      this.setState(state => state.focusedPane !== focusedPane && {\n        focusedPane: focusedPane\n      } || null);\n    };\n\n    this.setFocusIfFocusIs = (currentlyFocusedPane, newFocusedPane) => {\n      this.setState(state => state.focusedPane === currentlyFocusedPane && {\n        focusedPane: newFocusedPane\n      } || null);\n    };\n\n    this.setFocusIf = (stateProperty, focusedPaneIf, focusedPaneElse) => {\n      this.setState(state => {\n        const focusedPane = state[stateProperty] ? focusedPaneIf : focusedPaneElse;\n        return state.focusedPane !== focusedPane && {\n          focusedPane: focusedPane\n        } || null;\n      });\n    };\n\n    let dotSrc = localStorage.getItem('dotSrc');\n\n    if (dotSrc == null) {\n      dotSrc = \"strict digraph {\\n      \\ta [shape=\\\"ellipse\\\" style=\\\"filled\\\" fillcolor=\\\"\" + d3_schemeCategory10[0] + \"\\\"]\\n   \\tb [shape=\\\"polygon\\\" style=\\\"filled\\\" fillcolor=\\\"\" + d3_schemeCategory10[1] + \"\\\"]\\n    \\ta -> b [fillcolor=\\\"\" + d3_schemePaired[0] + \"\\\" color=\\\"\" + d3_schemePaired[1] + \"\\\"]\\n\\t  }\";\n    }\n\n    let goalDescription = localStorage.getItem('goalDescription');\n\n    if (goalDescription == null) {\n      goalDescription = '';\n    }\n\n    this.state = {\n      projects: JSON.parse(localStorage.getItem('projects')) || {},\n      initialized: false,\n      name: localStorage.getItem('name') || '',\n      dotSrc: dotSrc,\n      dotSrcLastChangeTime: +localStorage.getItem('dotSrcLastChangeTime') || Date.now(),\n      goalDescription: goalDescription,\n      svg: localStorage.getItem('svg') || '',\n      hasUndo: false,\n      hasRedo: false,\n      mainMenuIsOpen: false,\n      helpMenuIsOpen: false,\n      settingsDialogIsOpen: false,\n      openFromBrowserDialogIsOpen: false,\n      saveToBrowserAsDialogIsOpen: false,\n      replaceName: '',\n      exportAsUrlDialogIsOpen: false,\n      exportAsSvgDialogIsOpen: false,\n      insertPanelsAreOpen: (localStorage.getItem('insertPanelsAreOpen') || 'false') === 'true',\n      nodeFormatDrawerIsOpen: (localStorage.getItem('nodeFormatDrawerIsOpen') || 'false') === 'true',\n      edgeFormatDrawerIsOpen: (localStorage.getItem('edgeFormatDrawerIsOpen') || 'false') === 'true',\n      goalDescriptionDrawerIsOpen: (localStorage.getItem('goalDescriptionDrawerIsOpen') || 'false') === 'true',\n      keyboardShortcutsDialogIsOpen: false,\n      mouseOperationsDialogIsOpen: false,\n      aboutDialogIsOpen: false,\n      labelEditDialogIsOpen: false,\n      nodeTitle: '',\n      originalLabel: '',\n      fitGraph: localStorage.getItem('fitGraph') === 'true',\n      transitionDuration: localStorage.getItem('transitionDuration') || 1,\n      tweenPaths: localStorage.getItem('tweenPaths') !== 'false',\n      tweenShapes: localStorage.getItem('tweenShapes') !== 'false',\n      tweenPrecision: localStorage.getItem('tweenPrecision') || '1%',\n      engine: localStorage.getItem('engine') || 'dot',\n      defaultNodeAttributes: JSON.parse(localStorage.getItem('defaultNodeAttributes')) || {},\n      defaultEdgeAttributes: JSON.parse(localStorage.getItem('defaultEdgeAttributes')) || {},\n      error: null,\n      holdOff: localStorage.getItem('holdOff') || 0.2,\n      fontSize: localStorage.getItem('fontSize') || 12,\n      tabSize: +localStorage.getItem('tabSize') || 4,\n      selectedGraphComponents: [],\n      test: JSON.parse(localStorage.getItem('test')) || {},\n      graphvizVersion: graphvizVersion,\n      newGraphvizVersion: graphvizVersion !== localStorage.getItem('graphvizVersion'),\n      updatedSnackbarIsOpen: packageJSON.version !== localStorage.getItem('version'),\n      selectedGraphComponents: [],\n      logName: localStorage.getItem('logName') || \"log-\" + new Date().getTime(),\n      howOftenLabelsAreCloned: localStorage.getItem('howOftenLabelsAreCloned') || 0,\n      howOftenLabelsAreEdited: localStorage.getItem('howOftenLabelsAreEdited') || 0,\n      howOftenEdgesAreEdited: localStorage.getItem('howOftenEdgesAreEdited') || 0\n    };\n  }\n\n  componentDidMount() {\n    const urlParams = qs_parse(window.location.search.slice(1));\n\n    if (urlParams.dot) {\n      const currentDotSrc = this.state.dotSrc;\n      const newDotSrc = urlParams.dot;\n\n      if (newDotSrc !== currentDotSrc) {\n        const names = Object.keys(this.state.projects).filter(name => {\n          const project = this.state.projects[name];\n          return newDotSrc === project.dotSrc;\n        });\n\n        if (names.length > 0) {\n          this.handleOpenFromBrowser(names[0]);\n        } else {\n          const newName = this.createUntitledName(this.state.projects, this.state.name);\n          this.handleSaveAsToBrowser(newName, newDotSrc);\n        }\n      }\n\n      window.history.replaceState(null, null, window.location.pathname);\n    }\n\n    document.onblur = () => {\n      // Needed when the user clicks outside the document,\n      // e.g. the browser address bar\n      this.setFocus(null);\n    };\n  }\n\n  getSvgString() {\n    const svg = this.getSvg();\n    const serializer = new XMLSerializer();\n    return svg ? serializer.serializeToString(svg) : this.state.svg;\n  }\n\n  render() {\n    const classes = this.props.classes;\n    const editorIsOpen = !this.state.nodeFormatDrawerIsOpen && !this.state.edgeFormatDrawerIsOpen && !this.state.goalDescriptionDrawerIsOpen;\n    const textEditorHasFocus = this.state.focusedPane === 'TextEditor';\n    const nodeFormatDrawerHasFocus = this.state.focusedPane === 'NodeFormatDrawer';\n    const edgeFormatDrawerHasFocus = this.state.focusedPane === 'EdgeFormatDrawer';\n    const goalDescriptionDrawerHasFocus = this.state.focusedPane === 'GoalDescriptionDrawer';\n    const insertPanelsHaveFocus = this.state.focusedPane === 'InsertPanels';\n    const graphHasFocus = this.state.focusedPane === 'Graph';\n    const leftPaneElevation = textEditorHasFocus || nodeFormatDrawerHasFocus || edgeFormatDrawerHasFocus || goalDescriptionDrawerHasFocus ? focusedElevation : defaultElevation;\n    const rightPaneElevation = graphHasFocus ? focusedElevation : defaultElevation;\n    const midPaneElevation = insertPanelsHaveFocus ? focusedElevation : defaultElevation;\n    var columns;\n\n    if (this.state.insertPanelsAreOpen && this.state.graphInitialized) {\n      columns = {\n        textEditor: 3,\n        insertPanels: 3,\n        graph: 6\n      };\n    } else {\n      /* browse */\n      columns = {\n        textEditor: 6,\n        insertPanels: false,\n        graph: 6\n      };\n    }\n\n    const paperClass = this.state.updatedSnackbarIsOpen ? classes.paperWhenUpdatedSnackbarIsOpen : classes.paper;\n    return React.createElement(\"div\", {\n      className: classes.root,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 900\n      },\n      __self: this\n    }, React.createElement(\"script\", {\n      src: process.env.PUBLIC_URL.replace(/\\.$/, '') + \"@hpcc-js/wasm/dist/index.min.js\",\n      type: \"javascript/worker\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 901\n      },\n      __self: this\n    }), React.createElement(ButtonAppBar, {\n      hasUndo: this.state.hasUndo,\n      hasRedo: this.state.hasRedo,\n      onMenuButtonClick: this.handleMainMenuButtonClick,\n      onNewButtonClick: this.handleNewClick,\n      onUndoButtonClick: this.handleUndoButtonClick,\n      onRedoButtonClick: this.handleRedoButtonClick,\n      onInsertClick: this.handleInsertButtonClick,\n      onNodeFormatClick: this.handleNodeFormatButtonClick,\n      onEdgeFormatClick: this.handleEdgeFormatButtonClick,\n      onGoalDescriptionClick: this.handleGoalDescriptionButtonClick,\n      onZoomInButtonClick: this.handleZoomInButtonClick,\n      onZoomOutButtonClick: this.handleZoomOutButtonClick,\n      onZoomOutMapButtonClick: this.handleZoomOutMapButtonClick,\n      onZoomResetButtonClick: this.handleZoomResetButtonClick,\n      onSettingsButtonClick: this.handleSettingsClick,\n      onOpenInBrowserButtonClick: this.handleOpenFromBrowserClick,\n      onSaveAltButtonClick: this.handleSaveAsToBrowserClick,\n      onHelpButtonClick: this.handleHelpButtonClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 902\n      },\n      __self: this\n    }), this.state.mainMenuIsOpen && React.createElement(MainMenu, {\n      anchorEl: this.state.mainMenuAnchorEl,\n      onMenuClose: this.handleMainMenuClose,\n      onSettingsClick: this.handleSettingsClick,\n      onOpenFromBrowserClick: this.handleOpenFromBrowserClick,\n      onSaveAsToBrowserClick: this.handleSaveAsToBrowserClick,\n      onNewClick: this.handleNewClick,\n      onRenameClick: this.handleRenameClick,\n      onExportAsUrlClick: this.handleExportAsUrlClick,\n      onExportAsSvgClick: this.handleExportAsSvgClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 924\n      },\n      __self: this\n    }), this.state.settingsDialogIsOpen && React.createElement(SettingsDialog, {\n      engine: this.state.engine,\n      fitGraph: this.state.fitGraph,\n      transitionDuration: this.state.transitionDuration,\n      tweenPaths: this.state.tweenPaths,\n      tweenShapes: this.state.tweenShapes,\n      tweenPrecision: this.state.tweenPrecision,\n      onEngineSelectChange: this.handleEngineSelectChange,\n      onFitGraphSwitchChange: this.handleFitGraphSwitchChange,\n      onTransitionDurationChange: this.handleTransitionDurationChange,\n      onTweenPathsSwitchChange: this.handleTweenPathsSwitchChange,\n      onTweenShapesSwitchChange: this.handleTweenShapesSwitchChange,\n      onTweenPrecisionChange: this.handleTweenPrecisionChange,\n      holdOff: this.state.holdOff,\n      onHoldOffChange: this.handleHoldOffChange,\n      fontSize: this.state.fontSize,\n      onFontSizeChange: this.handleFontSizeChange,\n      tabSize: this.state.tabSize,\n      onTabSizeChange: this.handleTabSizeChange,\n      onSettingsClose: this.handleSettingsClose,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 937\n      },\n      __self: this\n    }), this.state.openFromBrowserDialogIsOpen && React.createElement(OpenFromBrowserDialog, {\n      projects: this.state.projects,\n      dotSrc: this.state.dotSrc,\n      dotSrcLastChangeTime: this.state.dotSrcLastChangeTime,\n      svg: this.getSvgString(),\n      name: this.state.name,\n      onOpen: this.handleOpenFromBrowser,\n      onClose: this.handleOpenFromBrowserClose,\n      onDelete: this.handleOpenFromBrowserDelete,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 960\n      },\n      __self: this\n    }), this.state.saveToBrowserAsDialogIsOpen && React.createElement(SaveAsToBrowserDialog, {\n      name: this.state.name,\n      rename: this.state.rename,\n      defaultNewName: this.state.name || this.createUntitledName(this.state.projects),\n      projects: this.state.projects,\n      onSave: this.handleSaveAsToBrowser,\n      onClose: this.handleSaveAsToBrowserClose,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 972\n      },\n      __self: this\n    }), this.state.exportAsUrlDialogIsOpen && React.createElement(ExportAsUrlDialog, {\n      URL: window.location.href + '?' + qs_stringify({\n        dot: this.state.dotSrc\n      }),\n      onClose: this.handleExportAsUrlClose,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 982\n      },\n      __self: this\n    }), this.state.exportAsSvgDialogIsOpen && React.createElement(ExportAsSvgDialog, {\n      defaultFilename: (this.state.name || this.createUntitledName(this.state.projects)) + '.svg',\n      getSvgString: this.getSvgString.bind(this),\n      onClose: this.handleExportAsSvgClose,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 988\n      },\n      __self: this\n    }), this.state.updatedSnackbarIsOpen && React.createElement(UpdatedSnackbar, {\n      newGraphvizVersion: this.state.newGraphvizVersion,\n      graphvizVersion: this.state.graphvizVersion,\n      onUpdatedSnackbarClose: this.handleUpdatedSnackbarClose,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 995\n      },\n      __self: this\n    }), React.createElement(Grid, {\n      container: true,\n      spacing: 3,\n      style: {\n        margin: 0,\n        width: '100%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1001\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      item: true,\n      xs: columns.textEditor,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1008\n      },\n      __self: this\n    }, React.createElement(Paper, {\n      elevation: leftPaneElevation,\n      className: paperClass,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1009\n      },\n      __self: this\n    }, this.state.nodeFormatDrawerIsOpen && React.createElement(FormatDrawer, {\n      type: \"node\",\n      defaultAttributes: this.state.defaultNodeAttributes,\n      onClick: this.handleNodeFormatDrawerClick,\n      onFormatDrawerClose: this.handleNodeFormatDrawerClose,\n      onStyleChange: this.handleNodeStyleChange,\n      onColorChange: this.handleNodeColorChange,\n      onFillColorChange: this.handleNodeFillColorChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1011\n      },\n      __self: this\n    }), this.state.edgeFormatDrawerIsOpen && React.createElement(FormatDrawer, {\n      type: \"edge\",\n      defaultAttributes: this.state.defaultEdgeAttributes,\n      onClick: this.handleEdgeFormatDrawerClick,\n      onFormatDrawerClose: this.handleEdgeFormatDrawerClose,\n      onStyleChange: this.handleEdgeStyleChange,\n      onColorChange: this.handleEdgeColorChange,\n      onFillColorChange: this.handleEdgeFillColorChange,\n      fontSize: this.state.fontSize,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1022\n      },\n      __self: this\n    }), this.state.goalDescriptionDrawerIsOpen && React.createElement(DescriptionDrawer, {\n      goalDescription: this.state.goalDescription,\n      onClick: this.handleGoalDescriptionDrawerClick,\n      onDescriptionDrawerClose: this.handleGoalDescriptionDrawerClose,\n      onTextChange: this.handleGoalDescriptionChange,\n      onStartParsing: this.handleGoalDescriptionParsing,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1034\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      style: {\n        display: editorIsOpen ? 'block' : 'none'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1042\n      },\n      __self: this\n    }, React.createElement(TextEditor // allocated viewport width - 2 * padding\n    , {\n      width: \"calc(\".concat(columns.textEditor * 100 / 12, \"vw - 2 * 12px)\"),\n      height: \"calc(100vh - 64px - 2 * 12px - \".concat(this.updatedSnackbarIsOpen ? \"64px\" : \"0px\", \")\"),\n      dotSrc: this.state.dotSrc,\n      onTextChange: this.handleTextChange,\n      onFocus: this.handleTextEditorFocus,\n      onBlur: this.handleTextEditorBlur,\n      error: this.state.error,\n      selectedGraphComponents: this.state.selectedGraphComponents,\n      holdOff: this.state.holdOff,\n      fontSize: this.state.fontSize,\n      tabSize: this.state.tabSize,\n      registerOverwriteText: this.registerOverwriteText,\n      registerUndo: this.registerUndo,\n      registerRedo: this.registerRedo,\n      registerUndoReset: this.registerUndoReset,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1043\n      },\n      __self: this\n    })))), this.state.insertPanelsAreOpen && this.state.graphInitialized && React.createElement(Grid, {\n      item: true,\n      xs: columns.insertPanels,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1065\n      },\n      __self: this\n    }, React.createElement(Paper, {\n      elevation: midPaneElevation,\n      className: paperClass,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1066\n      },\n      __self: this\n    }, React.createElement(InsertPanels, {\n      onClick: this.handleInsertPanelsClick,\n      onNodeShapeClick: this.handleNodeShapeClick,\n      onNodeShapeDragStart: this.handleNodeShapeDragStart,\n      onNodeShapeDragEnd: this.handleNodeShapeDragEnd,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1067\n      },\n      __self: this\n    }))), React.createElement(Grid, {\n      item: true,\n      xs: columns.graph,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1076\n      },\n      __self: this\n    }, React.createElement(Paper, {\n      elevation: rightPaneElevation,\n      className: paperClass,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1077\n      },\n      __self: this\n    }, React.createElement(Graph, {\n      hasFocus: graphHasFocus,\n      dotSrc: this.state.dotSrc,\n      engine: this.state.engine,\n      fit: this.state.fitGraph,\n      transitionDuration: this.state.transitionDuration,\n      tweenPaths: this.state.tweenPaths,\n      tweenShapes: this.state.tweenShapes,\n      tweenPrecision: this.state.tweenPrecision,\n      defaultNodeAttributes: this.state.defaultNodeAttributes,\n      defaultEdgeAttributes: this.state.defaultEdgeAttributes,\n      onFocus: this.handleGraphFocus,\n      onTextChange: this.handleTextChange,\n      onHelp: this.handleKeyboardShortcutsClick,\n      onSelect: this.handleGraphComponentSelect,\n      onUndo: this.undo,\n      onRedo: this.redo,\n      registerNodeShapeClick: this.registerNodeShapeClick,\n      registerNodeShapeDragStart: this.registerNodeShapeDragStart,\n      registerNodeShapeDragEnd: this.registerNodeShapeDragEnd,\n      registerZoomInButtonClick: this.registerZoomInButtonClick,\n      registerZoomOutButtonClick: this.registerZoomOutButtonClick,\n      registerZoomOutMapButtonClick: this.registerZoomOutMapButtonClick,\n      registerZoomResetButtonClick: this.registerZoomResetButtonClick,\n      registerGetSvg: this.registerGetSvg,\n      onLabelEditClick: this.handleLabelEditClick,\n      onInitialized: this.handleGraphInitialized,\n      onError: this.handleError,\n      onLabelCloning: this.handleLabelCloning,\n      onEdgeEditing: this.handleEdgeEditing,\n      test: this.state.test,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1078\n      },\n      __self: this\n    })))), this.state.helpMenuIsOpen && React.createElement(HelpMenu, {\n      anchorEl: this.state.helpMenuAnchorEl,\n      onMenuClose: this.handleHelpMenuClose,\n      onKeyboardShortcutsClick: this.handleKeyboardShortcutsClick,\n      onMouseOperationsClick: this.handleMouseOperationsClick,\n      onAboutClick: this.handleAboutClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1114\n      },\n      __self: this\n    }), this.state.keyboardShortcutsDialogIsOpen && React.createElement(KeyboardShortcutsDialog, {\n      onKeyboardShortcutsDialogClose: this.handleKeyboardShortcutsDialogClose,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1123\n      },\n      __self: this\n    }), this.state.mouseOperationsDialogIsOpen && React.createElement(MouseOperationsDialog, {\n      onMouseOperationsDialogClose: this.handleMouseOperationsDialogClose,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1128\n      },\n      __self: this\n    }), this.state.aboutDialogIsOpen && React.createElement(AboutDialog, {\n      graphvizVersion: this.state.graphvizVersion,\n      onAboutDialogClose: this.handleAboutDialogClose,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1133\n      },\n      __self: this\n    }), this.state.labelEditDialogIsOpen && React.createElement(LabelEditDialog, {\n      originalLabel: this.state.originalLabel,\n      onLabelEditDialogClose: this.handleLabelEditDialogClose,\n      onLabelConfirmation: this.handleLabelConfirmation,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1139\n      },\n      __self: this\n    }));\n  }\n\n}\n\nIndex.propTypes = {\n  classes: PropTypes.object.isRequired\n};\nexport default withRoot(withStyles(styles)(Index));","map":{"version":3,"sources":["C:/Users/user/KAOS-modeling-editor/src/pages/index.js"],"names":["React","PropTypes","Paper","Grid","withStyles","withRoot","ButtonAppBar","Graph","TextEditor","MainMenu","HelpMenu","SettingsDialog","OpenFromBrowserDialog","SaveAsToBrowserDialog","InsertPanels","FormatDrawer","DescriptionDrawer","schemeCategory10","d3_schemeCategory10","schemePaired","d3_schemePaired","KeyboardShortcutsDialog","MouseOperationsDialog","AboutDialog","LabelEditDialog","parse","qs_parse","stringify","qs_stringify","ExportAsUrlDialog","ExportAsSvgDialog","graphvizVersion","UpdatedSnackbar","packageJSON","Axios","styles","theme","root","textAlign","paper","height","paperWhenUpdatedSnackbarIsOpen","defaultElevation","focusedElevation","fs","require","Index","Component","constructor","props","setPersistentState","updater","setState","state","obj","Object","keys","forEach","key","value","toString","JSON","localStorage","setItem","handleTextChange","text","undoRedoState","newState","name","createUntitledName","projects","dotSrc","disableDotSrcLastChangeTimeUpdate","dotSrcLastChangeTime","Date","now","resetUndoAtNextTextChange","resetUndoStack","hasUndo","hasRedo","handleGoalDescriptionChange","description","goalDescription","handleGoalDescriptionParsing","post","post_text","headers","then","res","result","data","replace","replaceAll","console","log","appendLog","howOftenLabelsAreCloned","howOftenLabelsAreEdited","howOftenEdgesAreEdited","handleMainMenuButtonClick","anchorEl","mainMenuIsOpen","mainMenuAnchorEl","handleNewClick","handleSaveAsToBrowser","handleRenameClick","rename","saveToBrowserAsDialogIsOpen","handleLabelCloning","handleEdgeEditing","handleExportAsUrlClick","exportAsUrlDialogIsOpen","handleExportAsSvgClick","exportAsSvgDialogIsOpen","handleExportAsUrlClose","handleExportAsSvgClose","handleUndoButtonClick","undo","handleRedoButtonClick","redo","handleMainMenuClose","handleHelpButtonClick","helpMenuIsOpen","helpMenuAnchorEl","handleHelpMenuClose","handleInsertButtonClick","setFocusIf","insertPanelsAreOpen","handleNodeFormatButtonClick","nodeFormatDrawerIsOpen","edgeFormatDrawerIsOpen","goalDescriptionDrawerIsOpen","handleNodeFormatDrawerClose","setFocus","handleEdgeFormatButtonClick","handleEdgeFormatDrawerClose","handleGoalDescriptionButtonClick","handleGoalDescriptionDrawerClose","handleSettingsClick","settingsDialogIsOpen","handleSettingsClose","handleOpenFromBrowserClick","openFromBrowserDialogIsOpen","handleOpenFromBrowserClose","handleOpenFromBrowser","newCurrentName","currentName","currentProject","svg","getSvgString","newCurrentProject","baseName","newName","handleOpenFromBrowserDelete","nameToDelete","handleSaveAsToBrowserClick","handleSaveAsToBrowserClose","newDotSrc","handleEngineSelectChange","engine","handleFitGraphSwitchChange","fitGraph","handleTransitionDurationChange","transitionDuration","handleTweenPathsSwitchChange","tweenPaths","handleTweenShapesSwitchChange","tweenShapes","handleTweenPrecisionChange","tweenPrecision","handleHoldOffChange","holdOff","handleFontSizeChange","fontSize","handleTabSizeChange","tabSize","handleNodeStyleChange","style","defaultNodeAttributes","handleNodeColorChange","color","handleNodeFillColorChange","fillcolor","handleEdgeStyleChange","defaultEdgeAttributes","handleEdgeColorChange","handleEdgeFillColorChange","handleKeyboardShortcutsClick","keyboardShortcutsDialogIsOpen","handleKeyboardShortcutsDialogClose","handleMouseOperationsClick","mouseOperationsDialogIsOpen","handleMouseOperationsDialogClose","handleAboutClick","aboutDialogIsOpen","handleAboutDialogClose","handleLabelEditClick","node_title","nodeTitle","originalLabel","findNodeLabelFromDotSrc","labelEditDialogIsOpen","handleLabelEditDialogClose","handleLabelConfirmation","prev_label","label","new_label","new_src","regexp","RegExp","diff","old_string","string","old_array","Array","from","array","length","A","B","delta","max","Math","p","fp","i","k","snake","y","x","match","registerNodeShapeClick","handleNodeShapeClick","registerNodeShapeDragStart","handleNodeShapeDragStart","registerNodeShapeDragEnd","handleNodeShapeDragEnd","handleZoomInButtonClick","handleZoomOutButtonClick","handleZoomOutMapButtonClick","handleZoomResetButtonClick","registerZoomInButtonClick","registerZoomOutButtonClick","registerZoomOutMapButtonClick","registerZoomResetButtonClick","registerGetSvg","getSvg","handleGraphComponentSelect","components","selectedGraphComponents","handleGraphInitialized","graphInitialized","handleError","error","numLines","split","registerOverwriteText","overwriteText","registerUndo","registerRedo","registerUndoReset","handleTextEditorFocus","handleTextEditorBlur","setFocusIfFocusIs","handleGraphFocus","handleInsertPanelsClick","handleNodeFormatDrawerClick","handleEdgeFormatDrawerClick","handleGoalDescriptionDrawerClick","handleUpdatedSnackbarClose","version","focusedPane","currentlyFocusedPane","newFocusedPane","stateProperty","focusedPaneIf","focusedPaneElse","getItem","initialized","replaceName","test","newGraphvizVersion","updatedSnackbarIsOpen","logName","getTime","componentDidMount","urlParams","window","location","search","slice","dot","currentDotSrc","names","filter","project","history","replaceState","pathname","document","onblur","serializer","XMLSerializer","serializeToString","render","classes","editorIsOpen","textEditorHasFocus","nodeFormatDrawerHasFocus","edgeFormatDrawerHasFocus","goalDescriptionDrawerHasFocus","insertPanelsHaveFocus","graphHasFocus","leftPaneElevation","rightPaneElevation","midPaneElevation","columns","textEditor","insertPanels","graph","paperClass","process","env","PUBLIC_URL","href","bind","margin","width","display","propTypes","object","isRequired"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport 'typeface-roboto';\r\nimport PropTypes from 'prop-types';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport withRoot from '../withRoot';\r\nimport ButtonAppBar from '../ButtonAppBar';\r\nimport Graph from '../Graph';\r\nimport TextEditor from '../TextEditor';\r\nimport MainMenu from '../MainMenu';\r\nimport HelpMenu from '../HelpMenu';\r\nimport SettingsDialog from '../SettingsDialog';\r\nimport OpenFromBrowserDialog from '../OpenFromBrowserDialog';\r\nimport SaveAsToBrowserDialog from '../SaveAsToBrowserDialog';\r\nimport InsertPanels from '../InsertPanels';\r\nimport FormatDrawer from '../FormatDrawer';\r\nimport DescriptionDrawer from '../DescriptionDrawer';\r\nimport { schemeCategory10 as d3_schemeCategory10} from 'd3-scale-chromatic';\r\nimport { schemePaired as d3_schemePaired} from 'd3-scale-chromatic';\r\nimport KeyboardShortcutsDialog from '../KeyboardShortcutsDialog';\r\nimport MouseOperationsDialog from '../MouseOperationsDialog';\r\nimport AboutDialog from '../AboutDialog';\r\nimport LabelEditDialog from '../LabelEditDialog';\r\nimport { parse as qs_parse } from 'qs';\r\nimport { stringify as qs_stringify } from 'qs';\r\nimport ExportAsUrlDialog from '../ExportAsUrlDialog';\r\nimport ExportAsSvgDialog from '../ExportAsSvgDialog'\r\nimport { graphvizVersion } from '../graphvizVersion';\r\nimport UpdatedSnackbar from '../UpdatedSnackbar';\r\nimport packageJSON from '../../package.json';\r\nimport Axios from 'axios';\r\n\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    textAlign: 'center',\r\n  },\r\n  paper: {\r\n    // viewport height - app bar - 2 * padding\r\n    height: \"calc(100vh - 64px - 2 * 12px)\",\r\n  },\r\n  paperWhenUpdatedSnackbarIsOpen: {\r\n    \"margin-top\": \"64px\",\r\n    height: \"calc(100vh - 64px - 64px - 2 * 12px)\",\r\n  }\r\n});\r\n\r\nconst defaultElevation = 2;\r\nconst focusedElevation = 8;\r\nconst fs = require('fs');\r\n\r\nclass Index extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    let dotSrc = localStorage.getItem('dotSrc');\r\n    if (dotSrc == null) {\r\n      dotSrc = `strict digraph {\r\n      \ta [shape=\"ellipse\" style=\"filled\" fillcolor=\"` + d3_schemeCategory10[0] + `\"]\r\n   \tb [shape=\"polygon\" style=\"filled\" fillcolor=\"` + d3_schemeCategory10[1] + `\"]\r\n    \ta -> b [fillcolor=\"` + d3_schemePaired[0] + `\" color=\"` + d3_schemePaired[1] + `\"]\r\n\t  }`;\r\n    }\r\n\r\n    let goalDescription = localStorage.getItem('goalDescription');\r\n    if (goalDescription == null) {\r\n      goalDescription = '';\r\n    }\r\n\r\n    this.state = {\r\n      projects: JSON.parse(localStorage.getItem('projects')) || {},\r\n      initialized: false,\r\n      name: localStorage.getItem('name') || '',\r\n      dotSrc: dotSrc,\r\n      dotSrcLastChangeTime: +localStorage.getItem('dotSrcLastChangeTime') || Date.now(),\r\n      goalDescription: goalDescription,\r\n      svg: localStorage.getItem('svg') || '',\r\n      hasUndo: false,\r\n      hasRedo: false,\r\n      mainMenuIsOpen: false,\r\n      helpMenuIsOpen: false,\r\n      settingsDialogIsOpen: false,\r\n      openFromBrowserDialogIsOpen: false,\r\n      saveToBrowserAsDialogIsOpen: false,\r\n      replaceName: '',\r\n      exportAsUrlDialogIsOpen: false,\r\n      exportAsSvgDialogIsOpen: false,\r\n      insertPanelsAreOpen: (localStorage.getItem('insertPanelsAreOpen') || 'false') === 'true',\r\n      nodeFormatDrawerIsOpen: (localStorage.getItem('nodeFormatDrawerIsOpen') || 'false') === 'true',\r\n      edgeFormatDrawerIsOpen: (localStorage.getItem('edgeFormatDrawerIsOpen') || 'false') === 'true',\r\n      goalDescriptionDrawerIsOpen: (localStorage.getItem('goalDescriptionDrawerIsOpen') || 'false') === 'true',\r\n      keyboardShortcutsDialogIsOpen: false,\r\n      mouseOperationsDialogIsOpen: false,\r\n      aboutDialogIsOpen: false,\r\n      labelEditDialogIsOpen: false,\r\n      nodeTitle: '',\r\n      originalLabel: '',\r\n      fitGraph : localStorage.getItem('fitGraph') === 'true',\r\n      transitionDuration: localStorage.getItem('transitionDuration') || 1,\r\n      tweenPaths : localStorage.getItem('tweenPaths') !== 'false',\r\n      tweenShapes : localStorage.getItem('tweenShapes') !== 'false',\r\n      tweenPrecision : localStorage.getItem('tweenPrecision') || '1%',\r\n      engine : localStorage.getItem('engine') || 'dot',\r\n      defaultNodeAttributes: JSON.parse(localStorage.getItem('defaultNodeAttributes')) || {},\r\n      defaultEdgeAttributes: JSON.parse(localStorage.getItem('defaultEdgeAttributes')) || {},\r\n      error: null,\r\n      holdOff: localStorage.getItem('holdOff') || 0.2,\r\n      fontSize: localStorage.getItem('fontSize') || 12,\r\n      tabSize: +localStorage.getItem('tabSize') || 4,\r\n      selectedGraphComponents: [],\r\n      test: JSON.parse(localStorage.getItem('test')) || {},\r\n      graphvizVersion: graphvizVersion,\r\n      newGraphvizVersion: graphvizVersion !== localStorage.getItem('graphvizVersion'),\r\n      updatedSnackbarIsOpen: packageJSON.version !== localStorage.getItem('version'),\r\n      selectedGraphComponents: [],\r\n      logName: localStorage.getItem('logName') || \"log-\"+(new Date().getTime()),\r\n      howOftenLabelsAreCloned: localStorage.getItem('howOftenLabelsAreCloned') || 0,\r\n      howOftenLabelsAreEdited: localStorage.getItem('howOftenLabelsAreEdited') || 0,\r\n      howOftenEdgesAreEdited: localStorage.getItem('howOftenEdgesAreEdited') || 0,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    const urlParams = qs_parse(window.location.search.slice(1));\r\n    if (urlParams.dot) {\r\n      const currentDotSrc = this.state.dotSrc;\r\n      const newDotSrc = urlParams.dot;\r\n      if (newDotSrc !== currentDotSrc) {\r\n        const names = Object.keys(this.state.projects).filter((name) => {\r\n          const project = this.state.projects[name];\r\n          return newDotSrc === project.dotSrc;\r\n        });\r\n        if (names.length > 0) {\r\n          this.handleOpenFromBrowser(names[0]);\r\n        } else {\r\n          const newName = this.createUntitledName(this.state.projects, this.state.name);\r\n          this.handleSaveAsToBrowser(newName, newDotSrc);\r\n        }\r\n      }\r\n      window.history.replaceState(null, null, window.location.pathname);\r\n    }\r\n    document.onblur = () => {\r\n      // Needed when the user clicks outside the document,\r\n      // e.g. the browser address bar\r\n      this.setFocus(null);\r\n    }\r\n  }\r\n\r\n  setPersistentState = (updater) => {\r\n    this.setState((state) => {\r\n      if (typeof updater === 'function') {\r\n        var obj = updater(state);\r\n      } else {\r\n        obj = updater;\r\n      }\r\n      if (obj != null) {\r\n        Object.keys(obj).forEach((key) => {\r\n          let value = obj[key];\r\n          if (typeof value === 'boolean') {\r\n            value = value.toString();\r\n          }\r\n          else if (typeof value === 'object') {\r\n            value = JSON.stringify(value);\r\n          }\r\n          localStorage.setItem(key, value);\r\n        });\r\n      }\r\n      return obj;\r\n    });\r\n  }\r\n\r\n  handleTextChange = (text, undoRedoState) => {\r\n    this.setPersistentState((state) => {\r\n      const newState = {\r\n        name: state.name || (text ? this.createUntitledName(state.projects) : ''),\r\n        dotSrc: text,\r\n      };\r\n      if (!this.disableDotSrcLastChangeTimeUpdate) {\r\n        newState.dotSrcLastChangeTime = Date.now();\r\n      }\r\n      return newState;\r\n    });\r\n    this.disableDotSrcLastChangeTimeUpdate = false;\r\n    if (this.resetUndoAtNextTextChange) {\r\n      this.resetUndoStack();\r\n      undoRedoState = {\r\n        hasUndo: false,\r\n        hasRedo: false,\r\n      };\r\n      this.resetUndoAtNextTextChange = false;\r\n    }\r\n    this.setState(undoRedoState);\r\n  }\r\n\r\n  handleGoalDescriptionChange = (description) => {\r\n     this.setPersistentState((state) => {\r\n     const newState = {\r\n        name: state.name || (description ? this.createUntitledName(state.projects) : ''),\r\n        goalDescription: description,\r\n      };\r\n      return newState;\r\n    });\r\n  }\r\n\r\n  handleGoalDescriptionParsing = () => {\r\n   let handleTextChange = this.handleTextChange;\r\n    Axios.post('http://127.0.0.1:5000/parse', {\r\n      post_text: this.state.goalDescription\r\n    }, {\r\n    headers: {\r\n      'Access-Control-Allow-Origin': '*'\r\n    }}).then(function(res) {\r\n      let result = res.data.result;\r\n      result = result.replace(/\\n(?!\t)/g, \" \\\\n\");\r\n      result = result.replace(/\\\\n fill/g, \"fill\");\r\n      result = result.replaceAll(\"\\\\n}\", \"}\");\r\n      result = result.replace(/\\\\n$/, \"\");\r\n      result = result.replace('label=Root', 'label=\"Root\"');\r\n      console.log(result);\r\n      handleTextChange(result);\r\n    })\r\n\r\n    this.appendLog(`Total Labels Cloned: ${this.state.howOftenLabelsAreCloned}`);\r\n    this.appendLog(`Total Labels Edited: ${this.state.howOftenLabelsAreEdited}`);\r\n    this.appendLog(`Total Edges Edited: ${this.state.howOftenEdgesAreEdited}`);\r\n\r\n    this.setState({\r\n      howOftenLabelsAreCloned: 0,\r\n      howOftenLabelsAreEdited: 0,\r\n      howOftenEdgesAreEdited: 0,\r\n    });\r\n  }\r\n\r\n\r\n  appendLog = (log) => {\r\n    console.log(log);\r\n    // couldn't write log from brower\r\n  }\r\n\r\n  handleMainMenuButtonClick = (anchorEl) => {\r\n    this.setState({\r\n      mainMenuIsOpen: true,\r\n      mainMenuAnchorEl: anchorEl,\r\n    });\r\n  }\r\n\r\n  handleNewClick = () => {\r\n    this.handleSaveAsToBrowser('');\r\n    this.resetUndoAtNextTextChange = true;\r\n  }\r\n\r\n  handleRenameClick = () => {\r\n    this.setState({\r\n      rename: true,\r\n      saveToBrowserAsDialogIsOpen: true,\r\n    });\r\n  }\r\n\r\n  handleLabelCloning = () => {\r\n     this.appendLog(`Label Cloned: `)\r\n  \tthis.setState({\r\n      howOftenLabelsAreCloned: this.state.howOftenLabelsAreCloned+1,\r\n    });\r\n  }\r\n\r\n  handleEdgeEditing = (log) => {\r\n     this.appendLog(`Edge Edited: ${log}`)\r\n  \tthis.setState({\r\n      howOftenEdgesAreEdited: this.state.howOftenEdgesAreEdited+1,\r\n    });\r\n  }\r\n\r\n  handleExportAsUrlClick = () => {\r\n    this.setState({\r\n      exportAsUrlDialogIsOpen: true,\r\n    });\r\n  }\r\n\r\n  handleExportAsSvgClick = () => {\r\n    this.setState({\r\n      exportAsSvgDialogIsOpen: true,\r\n    });\r\n  }\r\n\r\n  handleExportAsUrlClose = () => {\r\n    this.setState({\r\n      exportAsUrlDialogIsOpen: false,\r\n    });\r\n  }\r\n\r\n  handleExportAsSvgClose = () => {\r\n    this.setState({\r\n      exportAsSvgDialogIsOpen: false,\r\n    });\r\n  }\r\n\r\n  handleUndoButtonClick = () => {\r\n    this.undo();\r\n  }\r\n\r\n  handleRedoButtonClick = () => {\r\n    this.redo();\r\n  }\r\n\r\n  handleMainMenuClose = () => {\r\n    this.setState({\r\n      mainMenuIsOpen: false,\r\n    });\r\n  }\r\n\r\n  handleHelpButtonClick = (anchorEl) => {\r\n    this.setState({\r\n      helpMenuIsOpen: true,\r\n      helpMenuAnchorEl: anchorEl,\r\n    });\r\n  }\r\n\r\n  handleHelpMenuClose = () => {\r\n    this.setState({\r\n      helpMenuIsOpen: false,\r\n    });\r\n  }\r\n\r\n  handleInsertButtonClick = () => {\r\n    this.setFocusIf('insertPanelsAreOpen', null, 'InsertPanels')\r\n    this.setPersistentState({\r\n      insertPanelsAreOpen: !this.state.insertPanelsAreOpen,\r\n    });\r\n  }\r\n\r\n  handleNodeFormatButtonClick = () => {\r\n    this.setFocusIf('nodeFormatDrawerIsOpen', null, 'NodeFormatDrawer')\r\n    this.setPersistentState({\r\n      nodeFormatDrawerIsOpen: !this.state.nodeFormatDrawerIsOpen,\r\n      edgeFormatDrawerIsOpen: false,\r\n      goalDescriptionDrawerIsOpen: false,\r\n    });\r\n  }\r\n\r\n  handleNodeFormatDrawerClose = () => {\r\n    this.setPersistentState({\r\n      nodeFormatDrawerIsOpen: false,\r\n    });\r\n    this.setFocus(null);\r\n  }\r\n\r\n  handleEdgeFormatButtonClick = () => {\r\n    this.setFocusIf('edgeFormatDrawerIsOpen', null, 'EdgeFormatDrawer')\r\n    this.setPersistentState({\r\n      nodeFormatDrawerIsOpen: false,\r\n      edgeFormatDrawerIsOpen: !this.state.edgeFormatDrawerIsOpen,\r\n      goalDescriptionDrawerIsOpen: false,\r\n    });\r\n  }\r\n\r\n  handleEdgeFormatDrawerClose = () => {\r\n    this.setPersistentState({\r\n      edgeFormatDrawerIsOpen: false,\r\n    });\r\n    this.setFocus(null);\r\n  }\r\n\r\n  handleGoalDescriptionButtonClick = () => {\r\n    this.setFocusIf('goalDescriptionDrawerIsOpen', null, 'GaolDescriptionDrawer');\r\n    this.setPersistentState({\r\n      nodeFormatDrawerIsOpen: false,\r\n      edgeFormatDrawerIsOpen: false,\r\n      goalDescriptionDrawerIsOpen: !this.state.goalDescriptionDrawerIsOpen,\r\n    });\r\n  }\r\n\r\n  handleGoalDescriptionDrawerClose = () => {\r\n    this.setPersistentState({\r\n     goalDescriptionDrawerIsOpen: false,\r\n    });\r\n    this.setFocus(null);\r\n  }\r\n\r\n  handleSettingsClick = () => {\r\n    this.setState({\r\n      settingsDialogIsOpen: true,\r\n    });\r\n  }\r\n\r\n  handleSettingsClose = () => {\r\n    this.setState({\r\n      settingsDialogIsOpen: false,\r\n    });\r\n  }\r\n\r\n  handleOpenFromBrowserClick = () => {\r\n    this.setState({\r\n      openFromBrowserDialogIsOpen: true,\r\n    });\r\n  }\r\n\r\n  handleOpenFromBrowserClose = () => {\r\n    this.setState({\r\n      openFromBrowserDialogIsOpen: false,\r\n    });\r\n  }\r\n\r\n  handleOpenFromBrowser = (newCurrentName) => {\r\n    const currentName = this.state.name;\r\n    if (newCurrentName !== currentName) {\r\n      this.setPersistentState(state => {\r\n        const projects = {...state.projects};\r\n        if (currentName) {\r\n          const currentProject = {\r\n            dotSrc: state.dotSrc,\r\n            dotSrcLastChangeTime: state.dotSrcLastChangeTime,\r\n            svg: this.getSvgString(),\r\n          };\r\n          projects[currentName] = currentProject;\r\n        }\r\n        const newCurrentProject = projects[newCurrentName];\r\n        delete projects[newCurrentName];\r\n        this.disableDotSrcLastChangeTimeUpdate = true;\r\n        return {\r\n          name: newCurrentName,\r\n          ...newCurrentProject,\r\n          projects: projects,\r\n        }\r\n      });\r\n      this.resetUndoAtNextTextChange = true;\r\n    }\r\n    this.handleOpenFromBrowserClose();\r\n  }\r\n\r\n  createUntitledName = (projects, currentName) => {\r\n    const baseName = 'Untitled Graph';\r\n    let newName = baseName;\r\n    while (projects[newName] || newName === currentName) {\r\n      newName = baseName + ' ' + (+newName.replace(baseName, '') + 1);\r\n    }\r\n    return newName;\r\n  }\r\n\r\n  handleOpenFromBrowserDelete = (nameToDelete) => {\r\n    this.setPersistentState((state) => {\r\n      const currentName = state.name;\r\n      if (nameToDelete === currentName) {\r\n        return {\r\n          name: '',\r\n          dotSrc: '',\r\n          dotSrcLastChangeTime: Date.now(),\r\n        }\r\n      } else {\r\n        const projects = {...state.projects};\r\n        delete projects[nameToDelete];\r\n        return {\r\n          projects: projects,\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  handleSaveAsToBrowserClick = () => {\r\n    this.setState({\r\n      rename: false,\r\n      saveToBrowserAsDialogIsOpen: true,\r\n    });\r\n  }\r\n\r\n  handleSaveAsToBrowserClose = () => {\r\n    this.setState({\r\n      saveToBrowserAsDialogIsOpen: false,\r\n    });\r\n  }\r\n\r\n  handleSaveAsToBrowser = (newName, newDotSrc) => {\r\n    const currentName = this.state.name;\r\n    if (newName !== currentName) {\r\n      this.setPersistentState((state) => {\r\n        const projects = {...state.projects};\r\n        delete projects[newName];\r\n        if (currentName && !state.rename) {\r\n          const currentProject = {\r\n            dotSrc: this.state.dotSrc,\r\n            dotSrcLastChangeTime: state.dotSrcLastChangeTime,\r\n            svg: this.getSvgString(),\r\n          };\r\n          projects[currentName] = currentProject;\r\n        }\r\n        return {\r\n          projects: {\r\n            ...projects,\r\n          },\r\n          name: newName,\r\n          dotSrc: newDotSrc ? newDotSrc : (newName ? state.dotSrc : ''),\r\n          dotSrcLastChangeTime: newDotSrc ? Date.now() : state.dotSrcLastChangeTime,\r\n        };\r\n      });\r\n    }\r\n    this.handleSaveAsToBrowserClose();\r\n  }\r\n\r\n  handleEngineSelectChange = (engine) => {\r\n    this.setPersistentState({\r\n      engine: engine,\r\n    });\r\n  }\r\n\r\n  handleFitGraphSwitchChange = (fitGraph) => {\r\n    this.setPersistentState({\r\n      fitGraph: fitGraph,\r\n    });\r\n  }\r\n\r\n  handleTransitionDurationChange = (transitionDuration) => {\r\n    this.setPersistentState({\r\n      transitionDuration: transitionDuration,\r\n    });\r\n  }\r\n\r\n  handleTweenPathsSwitchChange = (tweenPaths) => {\r\n    this.setPersistentState({\r\n      tweenPaths: tweenPaths,\r\n    });\r\n  }\r\n\r\n  handleTweenShapesSwitchChange = (tweenShapes) => {\r\n    this.setPersistentState({\r\n      tweenShapes: tweenShapes,\r\n    });\r\n  }\r\n\r\n  handleTweenPrecisionChange = (tweenPrecision) => {\r\n    this.setPersistentState({\r\n      tweenPrecision: tweenPrecision,\r\n    });\r\n  }\r\n\r\n  handleHoldOffChange = (holdOff) => {\r\n    this.setPersistentState({\r\n      holdOff: holdOff,\r\n    });\r\n  }\r\n\r\n  handleFontSizeChange = (fontSize) => {\r\n    this.setPersistentState({\r\n      fontSize: fontSize,\r\n    });\r\n  }\r\n\r\n  handleTabSizeChange = (tabSize) => {\r\n    this.setPersistentState({\r\n      tabSize: tabSize,\r\n    });\r\n  }\r\n\r\n  handleNodeStyleChange = (style) => {\r\n    this.setPersistentState(state => ({\r\n      defaultNodeAttributes: {\r\n          ...state.defaultNodeAttributes,\r\n        style: style,\r\n      },\r\n    }));\r\n  }\r\n\r\n  handleNodeColorChange = (color) => {\r\n    this.setPersistentState(state => ({\r\n      defaultNodeAttributes: {\r\n          ...state.defaultNodeAttributes,\r\n        color: color,\r\n      },\r\n    }));\r\n  }\r\n\r\n  handleNodeFillColorChange = (color) => {\r\n    this.setPersistentState(state => ({\r\n      defaultNodeAttributes: {\r\n          ...state.defaultNodeAttributes,\r\n        fillcolor: color,\r\n      },\r\n    }));\r\n  }\r\n\r\n  handleEdgeStyleChange = (style) => {\r\n    this.setPersistentState(state => ({\r\n      defaultEdgeAttributes: {\r\n          ...state.defaultEdgeAttributes,\r\n        style: style,\r\n      },\r\n    }));\r\n  }\r\n\r\n  handleEdgeColorChange = (color) => {\r\n    this.setPersistentState(state => ({\r\n      defaultEdgeAttributes: {\r\n          ...state.defaultEdgeAttributes,\r\n        color: color,\r\n      },\r\n    }));\r\n  }\r\n\r\n  handleEdgeFillColorChange = (color) => {\r\n    this.setPersistentState(state => ({\r\n      defaultEdgeAttributes: {\r\n          ...state.defaultEdgeAttributes,\r\n        fillcolor: color,\r\n      },\r\n    }));\r\n  }\r\n\r\n  handleKeyboardShortcutsClick = () => {\r\n    this.setState({\r\n      keyboardShortcutsDialogIsOpen: true,\r\n    });\r\n  }\r\n\r\n  handleKeyboardShortcutsDialogClose = () => {\r\n    this.setState({\r\n      keyboardShortcutsDialogIsOpen: false,\r\n    });\r\n  }\r\n\r\n  handleMouseOperationsClick = () => {\r\n    this.setState({\r\n      mouseOperationsDialogIsOpen: true,\r\n    });\r\n  }\r\n\r\n  handleMouseOperationsDialogClose = () => {\r\n    this.setState({\r\n      mouseOperationsDialogIsOpen: false,\r\n    });\r\n  }\r\n\r\n  handleAboutClick = () => {\r\n    this.setState({\r\n      aboutDialogIsOpen: true,\r\n    });\r\n  }\r\n\r\n  handleAboutDialogClose = () => {\r\n    this.setState({\r\n      aboutDialogIsOpen: false,\r\n    });\r\n  }\r\n\r\n  handleLabelEditClick = (node_title) => {\r\n    console.log(node_title);\r\n    this.setState({\r\n      nodeTitle: node_title,\r\n      originalLabel: this.findNodeLabelFromDotSrc(node_title),\r\n      labelEditDialogIsOpen: true,\r\n    });\r\n  }\r\n\r\n  handleLabelEditDialogClose = () => {\r\n    this.setState({\r\n      labelEditDialogIsOpen: false,\r\n    });\r\n  }\r\n\r\n  handleLabelConfirmation = (prev_label, label) => {\r\n    //Change Labels\r\n    console.log(label);\r\n    let new_label = label.replace(/\\n/g, '\\\\n');\r\n    let new_src = this.state.dotSrc;\r\n    let regexp = new RegExp(this.state.nodeTitle + ' \\\\[ *label=\".*?\"', 'g');\r\n    new_src = new_src.replace(regexp, this.state.nodeTitle + ' [label=\"' + new_label + '\"');\r\n\tconsole.log(new_src);\r\n\r\n\tthis.handleTextChange(new_src);\r\n\tthis.handleLabelEditDialogClose(new_src);\r\n\r\n    let diff = this.diff(prev_label, new_label)\r\n    this.appendLog(`Labels Edited: ${prev_label} => ${label}  (${diff})` );\r\n    this.setState({\r\n      howOftenLabelsAreEdited: this.state.howOftenLabelsAreEdited + diff,\r\n    });\r\n\r\n    console.log(`${this.state.howOftenLabelsAreCloned}, ${this.state.howOftenLabelsAreEdited}, ${this.state.howOftenEdgesAreEdited}`);\r\n   }\r\n\r\n  diff = (old_string, string) =>{\r\n    //calculate how 2 strings differ and return by value\r\n    //Reference: https://note.affi-sapo-sv.com/js-diff.php\r\n\r\n    let old_array = Array.from(old_string);\r\n    let array = Array.from(string);\r\n\r\n    let [A,B] = old_array.length < array.length ? [old_array, array] : [array, old_array];\r\n\r\n    let delta = B.length - A.length;\r\n\r\n    let max = Math.max;\r\n    let p = -1;\r\n    let fp = [];\r\n    for( let i = -(A.length+1) ; i <= B.length+1 ; i ++ ) fp[i] = -1;\r\n\r\n    do{\r\n        p++;\r\n        for( let k = -p ; k <= delta -1 ; k ++ )    fp[k] = this.snake( k, max( fp[k-1]+1, fp[k+1]), A, B);\r\n        for( let k = delta + p ; k >= delta + 1 ; k -- )    fp[k] = this.snake( k, max( fp[k-1]+1, fp[k+1]), A, B);\r\n        fp[ delta ] = this.snake( delta, max( fp[delta-1] + 1, fp[delta+1] ), A, B);\r\n    }while( fp[delta] !== B.length );\r\n\r\n\r\n    console.log(delta+2*p);\r\n    return delta + 2 * p;\r\n  }\r\n\r\n  snake = (k , y, A, B) =>{\r\n    let x = y - k;\r\n    while ( x < A.length && y < B.length && A[ x ] === B[ y ] ){\r\n        x ++; y ++;\r\n    }\r\n    return y;\r\n  }\r\n\r\n  findNodeLabelFromDotSrc = (node_title) => {\r\n    let regexp = new RegExp(node_title + ' \\\\[label=\".*?\"', 'g');\r\n    let label = this.state.dotSrc.match(regexp)[0];\r\n    label = label.replace(/(g|n).*? \\[ *?label=/g, '').replace(/\\\"/g, '').replace(/\\\\n/g, '\\n');\r\n    console.log(label);\r\n    return label;\r\n  }\r\n\r\n  registerNodeShapeClick = (handleNodeShapeClick) => {\r\n    this.handleNodeShapeClick = handleNodeShapeClick;\r\n  }\r\n\r\n  registerNodeShapeDragStart = (handleNodeShapeDragStart) => {\r\n    this.handleNodeShapeDragStart = handleNodeShapeDragStart;\r\n  }\r\n\r\n  registerNodeShapeDragEnd = (handleNodeShapeDragEnd) => {\r\n    this.handleNodeShapeDragEnd = handleNodeShapeDragEnd;\r\n  }\r\n\r\n  handleZoomInButtonClick = () => {}\r\n  handleZoomOutButtonClick = () => {}\r\n  handleZoomOutMapButtonClick = () => {}\r\n  handleZoomResetButtonClick = () => {}\r\n\r\n  registerZoomInButtonClick = (handleZoomInButtonClick) => {\r\n    this.handleZoomInButtonClick = handleZoomInButtonClick;\r\n  }\r\n\r\n  registerZoomOutButtonClick = (handleZoomOutButtonClick) => {\r\n    this.handleZoomOutButtonClick = handleZoomOutButtonClick;\r\n  }\r\n\r\n  registerZoomOutMapButtonClick = (handleZoomOutMapButtonClick) => {\r\n    this.handleZoomOutMapButtonClick = handleZoomOutMapButtonClick;\r\n  }\r\n\r\n  registerZoomResetButtonClick = (handleZoomResetButtonClick) => {\r\n    this.handleZoomResetButtonClick = handleZoomResetButtonClick;\r\n  }\r\n\r\n  registerGetSvg = (getSvg) => {\r\n    this.getSvg = getSvg;\r\n  }\r\n\r\n  getSvgString() {\r\n    const svg = this.getSvg();\r\n    const serializer = new XMLSerializer();\r\n    return svg ? serializer.serializeToString(svg) : this.state.svg;\r\n  }\r\n\r\n  handleGraphComponentSelect = (components) => {\r\n    this.setState({\r\n      selectedGraphComponents: components,\r\n    });\r\n  }\r\n\r\n  handleGraphInitialized = () => {\r\n    this.setState({\r\n      graphInitialized: true,\r\n    });\r\n    this.setPersistentState({\r\n      svg: this.getSvgString(),\r\n    });\r\n  }\r\n\r\n  handleError = (error) => {\r\n    if (error) {\r\n      error.numLines = this.state.dotSrc.split('\\n').length;\r\n    }\r\n    if (JSON.stringify(error) !== JSON.stringify(this.state.error)) {\r\n      this.setState({\r\n        error: error,\r\n      });\r\n    }\r\n  }\r\n\r\n  registerOverwriteText = (overwriteText) => {\r\n    this.overwriteText = overwriteText;\r\n    console.log(this.overwriteText);\r\n  }\r\n\r\n  registerUndo = (undo) => {\r\n    this.undo = undo;\r\n  }\r\n\r\n  registerRedo = (redo) => {\r\n    this.redo = redo;\r\n  }\r\n\r\n  registerUndoReset = (resetUndoStack) => {\r\n    this.resetUndoStack = resetUndoStack;\r\n  }\r\n\r\n  handleTextEditorFocus = () => {\r\n    this.setFocus('TextEditor');\r\n  }\r\n\r\n  handleTextEditorBlur = () => {\r\n    // Needed when the user clicks outside of a pane,\r\n    // e.g. the app bar or the background\r\n    this.setFocusIfFocusIs('TextEditor', null);\r\n  }\r\n\r\n  handleGraphFocus = () => {\r\n    this.setFocus('Graph');\r\n  }\r\n\r\n  handleInsertPanelsClick = () => {\r\n    this.setFocus('InsertPanels');\r\n  }\r\n\r\n  handleNodeFormatDrawerClick = () => {\r\n    this.setFocus('NodeFormatDrawer');\r\n    this.setFocusIf('nodeFormatDrawerIsOpen', 'NodeFormatDrawer', null)\r\n  }\r\n\r\n  handleEdgeFormatDrawerClick = () => {\r\n    this.setFocus('EdgeFormatDrawer');\r\n    this.setFocusIf('edgeFormatDrawerIsOpen', 'EdgeFormatDrawer', null)\r\n  }\r\n\r\n  handleGoalDescriptionDrawerClick = () => {\r\n    this.setFocus('GoalDescriptionDrawer');\r\n    this.setFocusIf('GoalDescriptionDrawerIsOpen', 'GoalDescriptionDrawer', null)\r\n  }\r\n\r\n  handleUpdatedSnackbarClose = () => {\r\n    this.setState({ \"updatedSnackbarIsOpen\": false });\r\n    this.setPersistentState({\r\n      \"version\": packageJSON.version,\r\n      \"graphvizVersion\": this.state.graphvizVersion,\r\n    })\r\n  }\r\n\r\n  setFocus = (focusedPane) => {\r\n    this.setState((state) => (state.focusedPane !== focusedPane && {\r\n      focusedPane: focusedPane,\r\n    }) || null);\r\n  }\r\n\r\n  setFocusIfFocusIs = (currentlyFocusedPane, newFocusedPane) => {\r\n    this.setState((state) => (state.focusedPane === currentlyFocusedPane && {\r\n      focusedPane: newFocusedPane,\r\n    }) || null);\r\n  }\r\n\r\n  setFocusIf = (stateProperty, focusedPaneIf, focusedPaneElse) => {\r\n    this.setState((state) => {\r\n      const focusedPane = state[stateProperty] ? focusedPaneIf: focusedPaneElse;\r\n      return (state.focusedPane !== focusedPane && {\r\n        focusedPane: focusedPane,\r\n      }) || null;\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n    const editorIsOpen = !this.state.nodeFormatDrawerIsOpen && !this.state.edgeFormatDrawerIsOpen && !this.state.goalDescriptionDrawerIsOpen;\r\n    const textEditorHasFocus = this.state.focusedPane === 'TextEditor';\r\n    const nodeFormatDrawerHasFocus = this.state.focusedPane === 'NodeFormatDrawer';\r\n    const edgeFormatDrawerHasFocus = this.state.focusedPane === 'EdgeFormatDrawer';\r\n    const goalDescriptionDrawerHasFocus = this.state.focusedPane === 'GoalDescriptionDrawer';\r\n    const insertPanelsHaveFocus = this.state.focusedPane === 'InsertPanels';\r\n    const graphHasFocus = this.state.focusedPane === 'Graph';\r\n    const leftPaneElevation = textEditorHasFocus || nodeFormatDrawerHasFocus || edgeFormatDrawerHasFocus || goalDescriptionDrawerHasFocus ? focusedElevation : defaultElevation;\r\n    const rightPaneElevation = graphHasFocus ? focusedElevation : defaultElevation;\r\n    const midPaneElevation = insertPanelsHaveFocus ? focusedElevation : defaultElevation;\r\n\r\n    var columns;\r\n    if (this.state.insertPanelsAreOpen && this.state.graphInitialized) {\r\n      columns = {\r\n        textEditor: 3,\r\n        insertPanels: 3,\r\n        graph: 6,\r\n      }\r\n    } else { /* browse */\r\n      columns = {\r\n        textEditor: 6,\r\n        insertPanels: false,\r\n        graph: 6,\r\n      }\r\n    }\r\n    const paperClass = this.state.updatedSnackbarIsOpen ? classes.paperWhenUpdatedSnackbarIsOpen : classes.paper;\r\n    return (\r\n      <div className={classes.root}>\r\n            <script src={process.env.PUBLIC_URL.replace(/\\.$/, '') + \"@hpcc-js/wasm/dist/index.min.js\"} type=\"javascript/worker\"></script>\r\n        <ButtonAppBar\r\n          hasUndo={this.state.hasUndo}\r\n          hasRedo={this.state.hasRedo}\r\n          onMenuButtonClick={this.handleMainMenuButtonClick}\r\n          onNewButtonClick={this.handleNewClick}\r\n          onUndoButtonClick={this.handleUndoButtonClick}\r\n          onRedoButtonClick={this.handleRedoButtonClick}\r\n          onInsertClick={this.handleInsertButtonClick}\r\n          onNodeFormatClick={this.handleNodeFormatButtonClick}\r\n          onEdgeFormatClick={this.handleEdgeFormatButtonClick}\r\n          onGoalDescriptionClick={this.handleGoalDescriptionButtonClick}\r\n          onZoomInButtonClick={this.handleZoomInButtonClick}\r\n          onZoomOutButtonClick={this.handleZoomOutButtonClick}\r\n          onZoomOutMapButtonClick={this.handleZoomOutMapButtonClick}\r\n          onZoomResetButtonClick={this.handleZoomResetButtonClick}\r\n          onSettingsButtonClick={this.handleSettingsClick}\r\n          onOpenInBrowserButtonClick={this.handleOpenFromBrowserClick}\r\n          onSaveAltButtonClick={this.handleSaveAsToBrowserClick}\r\n          onHelpButtonClick={this.handleHelpButtonClick}\r\n        >\r\n        </ButtonAppBar>\r\n        {this.state.mainMenuIsOpen &&\r\n          <MainMenu\r\n            anchorEl={this.state.mainMenuAnchorEl}\r\n            onMenuClose={this.handleMainMenuClose}\r\n            onSettingsClick={this.handleSettingsClick}\r\n            onOpenFromBrowserClick={this.handleOpenFromBrowserClick}\r\n            onSaveAsToBrowserClick={this.handleSaveAsToBrowserClick}\r\n            onNewClick={this.handleNewClick}\r\n            onRenameClick={this.handleRenameClick}\r\n            onExportAsUrlClick={this.handleExportAsUrlClick}\r\n            onExportAsSvgClick={this.handleExportAsSvgClick}\r\n          />\r\n        }\r\n        {this.state.settingsDialogIsOpen &&\r\n          <SettingsDialog\r\n            engine={this.state.engine}\r\n            fitGraph={this.state.fitGraph}\r\n            transitionDuration={this.state.transitionDuration}\r\n            tweenPaths={this.state.tweenPaths}\r\n            tweenShapes={this.state.tweenShapes}\r\n            tweenPrecision={this.state.tweenPrecision}\r\n            onEngineSelectChange={this.handleEngineSelectChange}\r\n            onFitGraphSwitchChange={this.handleFitGraphSwitchChange}\r\n            onTransitionDurationChange={this.handleTransitionDurationChange}\r\n            onTweenPathsSwitchChange={this.handleTweenPathsSwitchChange}\r\n            onTweenShapesSwitchChange={this.handleTweenShapesSwitchChange}\r\n            onTweenPrecisionChange={this.handleTweenPrecisionChange}\r\n            holdOff={this.state.holdOff}\r\n            onHoldOffChange={this.handleHoldOffChange}\r\n            fontSize={this.state.fontSize}\r\n            onFontSizeChange={this.handleFontSizeChange}\r\n            tabSize={this.state.tabSize}\r\n            onTabSizeChange={this.handleTabSizeChange}\r\n            onSettingsClose={this.handleSettingsClose}\r\n          />\r\n        }\r\n        {this.state.openFromBrowserDialogIsOpen &&\r\n          <OpenFromBrowserDialog\r\n            projects={this.state.projects}\r\n            dotSrc={this.state.dotSrc}\r\n            dotSrcLastChangeTime={this.state.dotSrcLastChangeTime}\r\n            svg={this.getSvgString()}\r\n            name={this.state.name}\r\n            onOpen={this.handleOpenFromBrowser}\r\n            onClose={this.handleOpenFromBrowserClose}\r\n            onDelete={this.handleOpenFromBrowserDelete}\r\n          />\r\n        }\r\n        {this.state.saveToBrowserAsDialogIsOpen &&\r\n          <SaveAsToBrowserDialog\r\n            name={this.state.name}\r\n            rename={this.state.rename}\r\n            defaultNewName={this.state.name || this.createUntitledName(this.state.projects)}\r\n            projects={this.state.projects}\r\n            onSave={this.handleSaveAsToBrowser}\r\n            onClose={this.handleSaveAsToBrowserClose}\r\n          />\r\n        }\r\n        {this.state.exportAsUrlDialogIsOpen &&\r\n          <ExportAsUrlDialog\r\n            URL={window.location.href + '?' + qs_stringify({dot: this.state.dotSrc})}\r\n            onClose={this.handleExportAsUrlClose}\r\n          />\r\n        }\r\n        {this.state.exportAsSvgDialogIsOpen &&\r\n          <ExportAsSvgDialog\r\n            defaultFilename={(this.state.name || this.createUntitledName(this.state.projects)) + '.svg'}\r\n            getSvgString={this.getSvgString.bind(this)}\r\n            onClose={this.handleExportAsSvgClose}\r\n          />\r\n        }\r\n        {this.state.updatedSnackbarIsOpen &&\r\n          <UpdatedSnackbar\r\n            newGraphvizVersion={this.state.newGraphvizVersion}\r\n            graphvizVersion={this.state.graphvizVersion}\r\n            onUpdatedSnackbarClose={this.handleUpdatedSnackbarClose}\r\n          />\r\n        }\r\n        <Grid container\r\n          spacing={3}\r\n          style={{\r\n            margin: 0,\r\n            width: '100%',\r\n          }}\r\n        >\r\n          <Grid item xs={columns.textEditor}>\r\n            <Paper elevation={leftPaneElevation} className={paperClass}>\r\n              {this.state.nodeFormatDrawerIsOpen &&\r\n                <FormatDrawer\r\n                  type='node'\r\n                  defaultAttributes={this.state.defaultNodeAttributes}\r\n                  onClick={this.handleNodeFormatDrawerClick}\r\n                  onFormatDrawerClose={this.handleNodeFormatDrawerClose}\r\n                  onStyleChange={this.handleNodeStyleChange}\r\n                  onColorChange={this.handleNodeColorChange}\r\n                  onFillColorChange={this.handleNodeFillColorChange}\r\n                />\r\n              }\r\n              {this.state.edgeFormatDrawerIsOpen &&\r\n                <FormatDrawer\r\n                  type='edge'\r\n                  defaultAttributes={this.state.defaultEdgeAttributes}\r\n                  onClick={this.handleEdgeFormatDrawerClick}\r\n                  onFormatDrawerClose={this.handleEdgeFormatDrawerClose}\r\n                  onStyleChange={this.handleEdgeStyleChange}\r\n                  onColorChange={this.handleEdgeColorChange}\r\n                  onFillColorChange={this.handleEdgeFillColorChange}\r\n                  fontSize={this.state.fontSize}\r\n                />\r\n              }\r\n              {this.state.goalDescriptionDrawerIsOpen &&\r\n                <DescriptionDrawer\r\n                  goalDescription={this.state.goalDescription}\r\n                  onClick={this.handleGoalDescriptionDrawerClick}\r\n                  onDescriptionDrawerClose={this.handleGoalDescriptionDrawerClose}\r\n                  onTextChange={this.handleGoalDescriptionChange}\r\n                  onStartParsing={this.handleGoalDescriptionParsing}\r\n                />\r\n              }\r\n              <div style={{display: editorIsOpen ? 'block' : 'none'}}>\r\n                <TextEditor\r\n                  // allocated viewport width - 2 * padding\r\n                  width={`calc(${columns.textEditor * 100 / 12}vw - 2 * 12px)`}\r\n                  height={`calc(100vh - 64px - 2 * 12px - ${this.updatedSnackbarIsOpen ? \"64px\" : \"0px\"})`}\r\n                  dotSrc={this.state.dotSrc}\r\n                  onTextChange={this.handleTextChange}\r\n                  onFocus={this.handleTextEditorFocus}\r\n                  onBlur={this.handleTextEditorBlur}\r\n                  error={this.state.error}\r\n                  selectedGraphComponents={this.state.selectedGraphComponents}\r\n                  holdOff={this.state.holdOff}\r\n                  fontSize={this.state.fontSize}\r\n                  tabSize={this.state.tabSize}\r\n                  registerOverwriteText={this.registerOverwriteText}\r\n                  registerUndo={this.registerUndo}\r\n                  registerRedo={this.registerRedo}\r\n                  registerUndoReset={this.registerUndoReset}\r\n                />\r\n              </div>\r\n            </Paper>\r\n          </Grid>\r\n          {this.state.insertPanelsAreOpen && this.state.graphInitialized && (\r\n            <Grid item xs={columns.insertPanels}>\r\n              <Paper elevation={midPaneElevation} className={paperClass}>\r\n                <InsertPanels\r\n                    onClick={this.handleInsertPanelsClick}\r\n                    onNodeShapeClick={this.handleNodeShapeClick}\r\n                    onNodeShapeDragStart={this.handleNodeShapeDragStart}\r\n                    onNodeShapeDragEnd={this.handleNodeShapeDragEnd}\r\n                />\r\n              </Paper>\r\n            </Grid>\r\n          )}\r\n          <Grid item xs={columns.graph}>\r\n            <Paper elevation={rightPaneElevation} className={paperClass}>\r\n              <Graph\r\n                hasFocus={graphHasFocus}\r\n                dotSrc={this.state.dotSrc}\r\n                engine={this.state.engine}\r\n                fit={this.state.fitGraph}\r\n                transitionDuration={this.state.transitionDuration}\r\n                tweenPaths={this.state.tweenPaths}\r\n                tweenShapes={this.state.tweenShapes}\r\n                tweenPrecision={this.state.tweenPrecision}\r\n                defaultNodeAttributes={this.state.defaultNodeAttributes}\r\n                defaultEdgeAttributes={this.state.defaultEdgeAttributes}\r\n                onFocus={this.handleGraphFocus}\r\n                onTextChange={this.handleTextChange}\r\n                onHelp={this.handleKeyboardShortcutsClick}\r\n                onSelect={this.handleGraphComponentSelect}\r\n                onUndo={this.undo}\r\n                onRedo={this.redo}\r\n                registerNodeShapeClick={this.registerNodeShapeClick}\r\n                registerNodeShapeDragStart={this.registerNodeShapeDragStart}\r\n                registerNodeShapeDragEnd={this.registerNodeShapeDragEnd}\r\n                registerZoomInButtonClick={this.registerZoomInButtonClick}\r\n                registerZoomOutButtonClick={this.registerZoomOutButtonClick}\r\n                registerZoomOutMapButtonClick={this.registerZoomOutMapButtonClick}\r\n                registerZoomResetButtonClick={this.registerZoomResetButtonClick}\r\n                registerGetSvg={this.registerGetSvg}\r\n                onLabelEditClick={this.handleLabelEditClick}\r\n                onInitialized={this.handleGraphInitialized}\r\n                onError={this.handleError}\r\n                onLabelCloning={this.handleLabelCloning}\r\n                onEdgeEditing={this.handleEdgeEditing}\r\n                test={this.state.test}\r\n              />\r\n            </Paper>\r\n          </Grid>\r\n        </Grid>\r\n        {this.state.helpMenuIsOpen &&\r\n          <HelpMenu\r\n            anchorEl={this.state.helpMenuAnchorEl}\r\n            onMenuClose={this.handleHelpMenuClose}\r\n            onKeyboardShortcutsClick={this.handleKeyboardShortcutsClick}\r\n            onMouseOperationsClick={this.handleMouseOperationsClick}\r\n            onAboutClick={this.handleAboutClick}\r\n          />\r\n        }\r\n        {this.state.keyboardShortcutsDialogIsOpen &&\r\n          <KeyboardShortcutsDialog\r\n            onKeyboardShortcutsDialogClose={this.handleKeyboardShortcutsDialogClose}\r\n          />\r\n        }\r\n        {this.state.mouseOperationsDialogIsOpen &&\r\n          <MouseOperationsDialog\r\n            onMouseOperationsDialogClose={this.handleMouseOperationsDialogClose}\r\n          />\r\n        }\r\n        {this.state.aboutDialogIsOpen &&\r\n          <AboutDialog\r\n            graphvizVersion={this.state.graphvizVersion}\r\n            onAboutDialogClose={this.handleAboutDialogClose}\r\n          />\r\n        }\r\n        {this.state.labelEditDialogIsOpen &&\r\n          <LabelEditDialog\r\n            originalLabel={this.state.originalLabel}\r\n            onLabelEditDialogClose={this.handleLabelEditDialogClose}\r\n            onLabelConfirmation={this.handleLabelConfirmation}\r\n          />\r\n       }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nIndex.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withRoot(withStyles(styles)(Index));"]},"metadata":{},"sourceType":"module"}