{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\user\\\\assisted-KAOS-editor\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:\\\\Users\\\\user\\\\assisted-KAOS-editor\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\user\\\\assisted-KAOS-editor\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\user\\\\assisted-KAOS-editor\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\user\\\\assisted-KAOS-editor\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\user\\\\assisted-KAOS-editor\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React from'react';import{withStyles}from'@material-ui/core/styles';import withRoot from'./withRoot';import CloseIcon from'@material-ui/icons/Close';import IconButton from'@material-ui/core/IconButton';import Button from'@material-ui/core/Button';import Dialog from'@material-ui/core/Dialog';import DialogContent from'@material-ui/core/DialogContent';import DialogContentText from'@material-ui/core/DialogContentText';import DialogTitle from'@material-ui/core/DialogTitle';import DialogActions from'@material-ui/core/DialogActions';import Table from'@material-ui/core/Table';import TableHead from'@material-ui/core/TableHead';import TableRow from'@material-ui/core/TableRow';import TableCell from'@material-ui/core/TableCell';import TableBody from'@material-ui/core/TableBody';import TableSortLabel from'@material-ui/core/TableSortLabel';import Tooltip from'@material-ui/core/Tooltip';import moment from'moment';import DeleteIcon from'@material-ui/icons/Delete';import DoYouWantToDeleteDialog from'./DoYouWantToDeleteDialog';import SvgPreview from'./SvgPreview';import DotSrcPreview from'./DotSrcPreview';var numLinesPreview=5;function desc(a,b,orderBy){if(b[orderBy]<a[orderBy]){return-1;}if(b[orderBy]>a[orderBy]){return 1;}return 0;}function stableSort(array,cmp){var stabilizedThis=array.map(function(el,index){return[el,index];});stabilizedThis.sort(function(a,b){var order=cmp(a[0],b[0]);if(order===0){return a[1]-b[1];}else{return order;}});return stabilizedThis.map(function(el){return el[0];});}function getSorting(order,orderBy){return order==='desc'?function(a,b){return desc(a,b,orderBy);}:function(a,b){return-desc(a,b,orderBy);};}var rows=[{id:'name',numeric:false,disablePadding:true,label:'Name'},{id:'dotSrc',numeric:false,disablePadding:false,label:'DOT Source'},{id:'dotSrcLastChangeTime',numeric:false,disablePadding:false,label:'Last Changed'},{id:'svg',numeric:false,disablePadding:false,label:'Preview'},{id:'delete',numeric:false,disablePadding:false,label:'Delete'}];var EnhancedTableHead=/*#__PURE__*/function(_React$Component){_inherits(EnhancedTableHead,_React$Component);function EnhancedTableHead(){var _getPrototypeOf2;var _this;_classCallCheck(this,EnhancedTableHead);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(EnhancedTableHead)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.createSortHandler=function(property){return function(event){_this.props.onRequestSort(event,property);};};return _this;}_createClass(EnhancedTableHead,[{key:\"render\",value:function render(){var _this2=this;var _this$props=this.props,order=_this$props.order,orderBy=_this$props.orderBy;return React.createElement(TableHead,null,React.createElement(TableRow,null,rows.map(function(row){return React.createElement(TableCell,{key:row.id,align:row.numeric?'right':'left',padding:row.disablePadding?'none':'normal',sortDirection:orderBy===row.id?order:false},React.createElement(Tooltip,{title:\"Sort\",placement:row.numeric?'bottom-end':'bottom-start',enterDelay:300},React.createElement(TableSortLabel,{id:row.id,active:orderBy===row.id,direction:order,onClick:_this2.createSortHandler(row.id)},row.label)));},this)));}}]);return EnhancedTableHead;}(React.Component);var styles=function styles(theme){return{root:{userSelect:'none'},title:{display:'flex',justifyContent:'space-between'},table:{minWidth:700}};};var OpenFromBrowserDialog=/*#__PURE__*/function(_React$Component2){_inherits(OpenFromBrowserDialog,_React$Component2);function OpenFromBrowserDialog(){var _getPrototypeOf3;var _this3;_classCallCheck(this,OpenFromBrowserDialog);for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}_this3=_possibleConstructorReturn(this,(_getPrototypeOf3=_getPrototypeOf(OpenFromBrowserDialog)).call.apply(_getPrototypeOf3,[this].concat(args)));_this3.state={selectedName:_this3.props.name,order:'desc',orderBy:'dotSrcLastChangeTime'};_this3.handleClose=function(){_this3.props.onClose();};_this3.handleClick=function(name){return function(event){_this3.setState({selectedName:name});};};_this3.handleDoubleClick=function(name){return function(event){_this3.props.onOpen(name);};};_this3.handleOpen=function(event){_this3.props.onOpen(_this3.state.selectedName);};_this3.handleRequestSort=function(event,property){var orderBy=property;var order=property==='dotSrcLastChangeTime'?'desc':'asc';if(_this3.state.orderBy===property){if(_this3.state.order==='asc'){order='desc';}else{order='asc';}}_this3.setState({order:order,orderBy:orderBy});};_this3.handleConfirmedDelete=function(){_this3.setState({doYouWantToDeleteDialogIsOpen:false});_this3.props.onDelete(_this3.state.deleteName);};_this3.handleDelete=function(name){return function(){_this3.setState({doYouWantToDeleteDialogIsOpen:true,deleteName:name});};};_this3.handleDoYouWantToDeleteClose=function(){_this3.setState({doYouWantToDeleteDialogIsOpen:false});};return _this3;}_createClass(OpenFromBrowserDialog,[{key:\"render\",value:function render(){var _this4=this;var classes=this.props.classes;var orderBy=this.state.orderBy;var order=this.state.order;var projects=_objectSpread({},this.props.projects);if(this.props.name){projects[this.props.name]={dotSrc:this.props.dotSrc,dotSrcLastChangeTime:this.props.dotSrcLastChangeTime,svg:this.props.svg};}var projectList=Object.keys(projects).map(function(name){var project=projects[name];return _objectSpread({name:name},project);});var selectedName=projects[this.state.selectedName]?this.state.selectedName:this.props.name;return React.createElement(\"div\",null,React.createElement(Dialog,{id:\"open-from-browser-dialog\",maxWidth:false,className:classes.root,open:true,onClose:this.handleClose,\"aria-labelledby\":\"form-dialog-title\"},React.createElement(\"div\",{className:classes.title},React.createElement(DialogTitle,{id:\"form-dialog-title\"},\"Open graph from browser\"),React.createElement(IconButton,{\"aria-label\":\"Close\",onClick:this.handleClose},React.createElement(CloseIcon,null))),React.createElement(DialogContent,null,React.createElement(DialogContentText,null,\"Open a graph from the browser's local storage.\"),React.createElement(Table,{className:classes.table},React.createElement(EnhancedTableHead,{order:order,orderBy:orderBy,onRequestSort:this.handleRequestSort}),React.createElement(TableBody,null,stableSort(projectList,getSorting(order,orderBy)).map(function(project){var name=project.name;return React.createElement(TableRow,{key:name,selected:name===selectedName,hover:true,onClick:_this4.handleClick(name),onDoubleClick:_this4.handleDoubleClick(name)},React.createElement(TableCell,{component:\"th\",scope:\"project\"},name),React.createElement(TableCell,null,React.createElement(DotSrcPreview,{dotSrc:project.dotSrc,numLines:numLinesPreview})),React.createElement(TableCell,null,project.dotSrcLastChangeTime?moment(project.dotSrcLastChangeTime).fromNow():''),React.createElement(TableCell,null,React.createElement(SvgPreview,{svg:project.svg,width:\"200px\",height:Math.ceil(numLinesPreview*1.2,1)+\"em\"})),React.createElement(TableCell,null,React.createElement(IconButton,{id:\"delete\",\"aria-label\":\"Delete\",onClick:_this4.handleDelete(name)},React.createElement(DeleteIcon,null))));})))),React.createElement(DialogActions,null,React.createElement(Button,{onClick:this.props.onClose,color:\"secondary\",id:\"cancel\"},\"Cancel\"),React.createElement(Button,{onClick:this.handleOpen,color:\"secondary\",id:\"open\"},\"Open\"))),this.state.doYouWantToDeleteDialogIsOpen&&React.createElement(DoYouWantToDeleteDialog,{name:this.state.deleteName,onDelete:this.handleConfirmedDelete,onClose:this.handleDoYouWantToDeleteClose}));}}]);return OpenFromBrowserDialog;}(React.Component);export default withRoot(withStyles(styles)(OpenFromBrowserDialog));","map":{"version":3,"sources":["C:/Users/user/assisted-KAOS-editor/src/OpenFromBrowserDialog.js"],"names":["React","withStyles","withRoot","CloseIcon","IconButton","Button","Dialog","DialogContent","DialogContentText","DialogTitle","DialogActions","Table","TableHead","TableRow","TableCell","TableBody","TableSortLabel","Tooltip","moment","DeleteIcon","DoYouWantToDeleteDialog","SvgPreview","DotSrcPreview","numLinesPreview","desc","a","b","orderBy","stableSort","array","cmp","stabilizedThis","map","el","index","sort","order","getSorting","rows","id","numeric","disablePadding","label","EnhancedTableHead","createSortHandler","property","event","props","onRequestSort","row","Component","styles","theme","root","userSelect","title","display","justifyContent","table","minWidth","OpenFromBrowserDialog","state","selectedName","name","handleClose","onClose","handleClick","setState","handleDoubleClick","onOpen","handleOpen","handleRequestSort","handleConfirmedDelete","doYouWantToDeleteDialogIsOpen","onDelete","deleteName","handleDelete","handleDoYouWantToDeleteClose","classes","projects","dotSrc","dotSrcLastChangeTime","svg","projectList","Object","keys","project","fromNow","Math","ceil"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport withRoot from './withRoot';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableSortLabel from '@material-ui/core/TableSortLabel';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport moment from 'moment';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport DoYouWantToDeleteDialog from './DoYouWantToDeleteDialog';\r\nimport SvgPreview from './SvgPreview';\r\nimport DotSrcPreview from './DotSrcPreview';\r\n\r\nconst numLinesPreview = 5;\r\n\r\nfunction desc(a, b, orderBy) {\r\n  if (b[orderBy] < a[orderBy]) {\r\n    return -1;\r\n  }\r\n  if (b[orderBy] > a[orderBy]) {\r\n    return 1;\r\n  }\r\n  return 0;\r\n}\r\n\r\nfunction stableSort(array, cmp) {\r\n  const stabilizedThis = array.map((el, index) => [el, index]);\r\n  stabilizedThis.sort((a, b) => {\r\n    const order = cmp(a[0], b[0]);\r\n    if (order === 0) {\r\n      return a[1] - b[1];\r\n    } else {\r\n      return order;\r\n    }\r\n  });\r\n  return stabilizedThis.map(el => el[0]);\r\n}\r\n\r\nfunction getSorting(order, orderBy) {\r\n  return order === 'desc' ? (a, b) => desc(a, b, orderBy) : (a, b) => -desc(a, b, orderBy);\r\n}\r\n\r\nconst rows = [\r\n  { id: 'name', numeric: false, disablePadding: true, label: 'Name' },\r\n  { id: 'dotSrc', numeric: false, disablePadding: false, label: 'DOT Source' },\r\n  { id: 'dotSrcLastChangeTime', numeric: false, disablePadding: false, label: 'Last Changed' },\r\n  { id: 'svg', numeric: false, disablePadding: false, label: 'Preview' },\r\n  { id: 'delete', numeric: false, disablePadding: false, label: 'Delete' },\r\n];\r\n\r\nclass EnhancedTableHead extends React.Component {\r\n  createSortHandler = property => event => {\r\n    this.props.onRequestSort(event, property);\r\n  };\r\n\r\n  render() {\r\n    const { order, orderBy } = this.props;\r\n\r\n    return (\r\n      <TableHead>\r\n        <TableRow>\r\n          {rows.map(row => {\r\n            return (\r\n              <TableCell\r\n                key={row.id}\r\n                align={row.numeric ? 'right' : 'left'}\r\n                padding={row.disablePadding ? 'none' : 'normal'}\r\n                sortDirection={orderBy === row.id ? order : false}\r\n              >\r\n                <Tooltip\r\n                  title=\"Sort\"\r\n                  placement={row.numeric ? 'bottom-end' : 'bottom-start'}\r\n                  enterDelay={300}\r\n                >\r\n                  <TableSortLabel\r\n                    id={row.id}\r\n                    active={orderBy === row.id}\r\n                    direction={order}\r\n                    onClick={this.createSortHandler(row.id)}\r\n                  >\r\n                    {row.label}\r\n                  </TableSortLabel>\r\n                </Tooltip>\r\n              </TableCell>\r\n            );\r\n          }, this)}\r\n        </TableRow>\r\n      </TableHead>\r\n    );\r\n  }\r\n}\r\n\r\nEnhancedTableHead.propTypes = {\r\n  onRequestSort: PropTypes.func.isRequired,\r\n  order: PropTypes.string.isRequired,\r\n  orderBy: PropTypes.string.isRequired,\r\n};\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    userSelect: 'none',\r\n  },\r\n  title: {\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n  },\r\n  table: {\r\n    minWidth: 700,\r\n  },\r\n});\r\n\r\nclass OpenFromBrowserDialog extends React.Component {\r\n\r\n  state = {\r\n    selectedName: this.props.name,\r\n    order: 'desc',\r\n    orderBy: 'dotSrcLastChangeTime',\r\n  }\r\n\r\n  handleClose = () => {\r\n    this.props.onClose();\r\n  };\r\n\r\n  handleClick = (name) => (event) =>{\r\n    this.setState({selectedName: name});\r\n  };\r\n\r\n  handleDoubleClick = (name) => (event) =>{\r\n    this.props.onOpen(name);\r\n  };\r\n\r\n  handleOpen = (event) => {\r\n    this.props.onOpen(this.state.selectedName);\r\n  };\r\n\r\n  handleRequestSort = (event, property) => {\r\n    const orderBy = property;\r\n    let order = (property === 'dotSrcLastChangeTime' ? 'desc' : 'asc');\r\n\r\n    if (this.state.orderBy === property) {\r\n      if (this.state.order === 'asc') {\r\n        order = 'desc';\r\n      } else {\r\n        order = 'asc';\r\n      }\r\n    }\r\n\r\n    this.setState({ order, orderBy });\r\n  };\r\n\r\n  handleConfirmedDelete = () => {\r\n    this.setState({\r\n      doYouWantToDeleteDialogIsOpen: false,\r\n    });\r\n    this.props.onDelete(this.state.deleteName);\r\n  };\r\n\r\n  handleDelete = (name) => () => {\r\n    this.setState({\r\n      doYouWantToDeleteDialogIsOpen: true,\r\n      deleteName: name,\r\n    });\r\n  };\r\n\r\n  handleDoYouWantToDeleteClose = () => {\r\n    this.setState({\r\n      doYouWantToDeleteDialogIsOpen: false,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n    const { orderBy } = this.state;\r\n    const { order } = this.state;\r\n    const projects = {\r\n      ...this.props.projects,\r\n    };\r\n    if (this.props.name) {\r\n      projects[this.props.name] = {\r\n        dotSrc: this.props.dotSrc,\r\n        dotSrcLastChangeTime: this.props.dotSrcLastChangeTime,\r\n        svg: this.props.svg,\r\n      };\r\n    }\r\n    const projectList = Object.keys(projects).map((name) => {\r\n      const project = projects[name];\r\n      return {\r\n        name: name,\r\n          ...project,\r\n      }\r\n    });\r\n    const selectedName = projects[this.state.selectedName] ? this.state.selectedName : this.props.name;\r\n    return (\r\n      <div>\r\n        <Dialog\r\n          id=\"open-from-browser-dialog\"\r\n          maxWidth={false}\r\n          className={classes.root}\r\n          open\r\n          onClose={this.handleClose}\r\n          aria-labelledby=\"form-dialog-title\"\r\n        >\r\n          <div className={classes.title}>\r\n            <DialogTitle id=\"form-dialog-title\">Open graph from browser</DialogTitle>\r\n            <IconButton\r\n              aria-label=\"Close\"\r\n              onClick={this.handleClose}\r\n            >\r\n              <CloseIcon />\r\n            </IconButton>\r\n          </div>\r\n          <DialogContent>\r\n            <DialogContentText>\r\n              Open a graph from the browser&apos;s local storage.\r\n            </DialogContentText>\r\n            <Table className={classes.table}>\r\n              <EnhancedTableHead\r\n                order={order}\r\n                orderBy={orderBy}\r\n                onRequestSort={this.handleRequestSort}\r\n              />\r\n              <TableBody>\r\n                {stableSort(projectList, getSorting(order, orderBy))\r\n                .map((project) => {\r\n                  const name = project.name;\r\n                  return (\r\n                      <TableRow\r\n                        key={name}\r\n                        selected={name === selectedName}\r\n                        hover\r\n                        onClick={this.handleClick(name)}\r\n                        onDoubleClick={this.handleDoubleClick(name)}\r\n                      >\r\n                      <TableCell component=\"th\" scope=\"project\">\r\n                        {name}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        <DotSrcPreview\r\n                          dotSrc={project.dotSrc}\r\n                          numLines={numLinesPreview}\r\n                        />\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        {project.dotSrcLastChangeTime ? moment(project.dotSrcLastChangeTime).fromNow() : ''}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        <SvgPreview\r\n                          svg={project.svg}\r\n                          width=\"200px\"\r\n                          height={Math.ceil(numLinesPreview * 1.2, 1) + \"em\"}\r\n                        />\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        <IconButton\r\n                          id=\"delete\"\r\n                          aria-label=\"Delete\"\r\n                          onClick={this.handleDelete(name)}\r\n                        >\r\n                          <DeleteIcon />\r\n                        </IconButton>\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  );\r\n                })}\r\n              </TableBody>\r\n            </Table>\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={this.props.onClose} color=\"secondary\" id=\"cancel\">\r\n              Cancel\r\n            </Button>\r\n            <Button onClick={this.handleOpen} color=\"secondary\" id=\"open\">\r\n              Open\r\n            </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n        {this.state.doYouWantToDeleteDialogIsOpen &&\r\n          <DoYouWantToDeleteDialog\r\n            name={this.state.deleteName}\r\n            onDelete={this.handleConfirmedDelete}\r\n            onClose={this.handleDoYouWantToDeleteClose}\r\n          />\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nOpenFromBrowserDialog.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  name: PropTypes.string.isRequired,\r\n  dotSrc: PropTypes.string.isRequired,\r\n  dotSrcLastChangeTime: PropTypes.number.isRequired,\r\n  projects: PropTypes.object.isRequired,\r\n  onClose: PropTypes.func.isRequired,\r\n  onOpen: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default withRoot(withStyles(styles)(OpenFromBrowserDialog));\r\n"]},"metadata":{},"sourceType":"module"}