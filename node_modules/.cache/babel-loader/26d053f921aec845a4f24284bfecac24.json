{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\user\\\\graphviz-visual-editor\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:\\\\Users\\\\user\\\\graphviz-visual-editor\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\user\\\\graphviz-visual-editor\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\user\\\\graphviz-visual-editor\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\user\\\\graphviz-visual-editor\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\user\\\\graphviz-visual-editor\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React from'react';import'typeface-roboto';import Paper from'@material-ui/core/Paper';import Grid from'@material-ui/core/Grid';import{withStyles}from'@material-ui/core/styles';import withRoot from'../withRoot';import ButtonAppBar from'../ButtonAppBar';import Graph from'../Graph';import TextEditor from'../TextEditor';import MainMenu from'../MainMenu';import HelpMenu from'../HelpMenu';import SettingsDialog from'../SettingsDialog';import OpenFromBrowserDialog from'../OpenFromBrowserDialog';import SaveAsToBrowserDialog from'../SaveAsToBrowserDialog';import InsertPanels from'../InsertPanels';import FormatDrawer from'../FormatDrawer';import{schemeCategory10 as d3_schemeCategory10}from'd3-scale-chromatic';import{schemePaired as d3_schemePaired}from'd3-scale-chromatic';import KeyboardShortcutsDialog from'../KeyboardShortcutsDialog';import MouseOperationsDialog from'../MouseOperationsDialog';import AboutDialog from'../AboutDialog';import{parse as qs_parse}from'qs';import{stringify as qs_stringify}from'qs';import ExportAsUrlDialog from'../ExportAsUrlDialog';import ExportAsSvgDialog from'../ExportAsSvgDialog';import{graphvizVersion}from'../graphvizVersion';import UpdatedSnackbar from'../UpdatedSnackbar';import packageJSON from'../../package.json';var styles=function styles(theme){return{root:{textAlign:'center'},paper:{// viewport height - app bar - 2 * padding\nheight:\"calc(100vh - 64px - 2 * 12px)\"},paperWhenUpdatedSnackbarIsOpen:{\"margin-top\":\"64px\",height:\"calc(100vh - 64px - 64px - 2 * 12px)\"}};};var defaultElevation=2;var focusedElevation=8;var Index=/*#__PURE__*/function(_React$Component){_inherits(Index,_React$Component);function Index(props){var _this;_classCallCheck(this,Index);_this=_possibleConstructorReturn(this,_getPrototypeOf(Index).call(this,props));_this.setPersistentState=function(updater){_this.setState(function(state){if(typeof updater==='function'){var obj=updater(state);}else{obj=updater;}if(obj!=null){Object.keys(obj).forEach(function(key){var value=obj[key];if(typeof value==='boolean'){value=value.toString();}else if(typeof value==='object'){value=JSON.stringify(value);}localStorage.setItem(key,value);});}return obj;});};_this.handleTextChange=function(text,undoRedoState){_this.setPersistentState(function(state){var newState={name:state.name||(text?_this.createUntitledName(state.projects):''),dotSrc:text};if(!_this.disableDotSrcLastChangeTimeUpdate){newState.dotSrcLastChangeTime=Date.now();}return newState;});_this.disableDotSrcLastChangeTimeUpdate=false;if(_this.resetUndoAtNextTextChange){_this.resetUndoStack();undoRedoState={hasUndo:false,hasRedo:false};_this.resetUndoAtNextTextChange=false;}_this.setState(undoRedoState);};_this.handleMainMenuButtonClick=function(anchorEl){_this.setState({mainMenuIsOpen:true,mainMenuAnchorEl:anchorEl});};_this.handleNewClick=function(){_this.handleSaveAsToBrowser('');_this.resetUndoAtNextTextChange=true;};_this.handleRenameClick=function(){_this.setState({rename:true,saveToBrowserAsDialogIsOpen:true});};_this.handleExportAsUrlClick=function(){_this.setState({exportAsUrlDialogIsOpen:true});};_this.handleExportAsSvgClick=function(){_this.setState({exportAsSvgDialogIsOpen:true});};_this.handleExportAsUrlClose=function(){_this.setState({exportAsUrlDialogIsOpen:false});};_this.handleExportAsSvgClose=function(){_this.setState({exportAsSvgDialogIsOpen:false});};_this.handleUndoButtonClick=function(){_this.undo();};_this.handleRedoButtonClick=function(){_this.redo();};_this.handleMainMenuClose=function(){_this.setState({mainMenuIsOpen:false});};_this.handleHelpButtonClick=function(anchorEl){_this.setState({helpMenuIsOpen:true,helpMenuAnchorEl:anchorEl});};_this.handleHelpMenuClose=function(){_this.setState({helpMenuIsOpen:false});};_this.handleInsertButtonClick=function(){_this.setFocusIf('insertPanelsAreOpen',null,'InsertPanels');_this.setPersistentState({insertPanelsAreOpen:!_this.state.insertPanelsAreOpen});};_this.handleNodeFormatButtonClick=function(){_this.setFocusIf('nodeFormatDrawerIsOpen',null,'NodeFormatDrawer');_this.setPersistentState({nodeFormatDrawerIsOpen:!_this.state.nodeFormatDrawerIsOpen,edgeFormatDrawerIsOpen:false});};_this.handleNodeFormatDrawerClose=function(){_this.setPersistentState({nodeFormatDrawerIsOpen:false});_this.setFocus(null);};_this.handleEdgeFormatButtonClick=function(){_this.setFocusIf('edgeFormatDrawerIsOpen',null,'EdgeFormatDrawer');_this.setPersistentState({edgeFormatDrawerIsOpen:!_this.state.edgeFormatDrawerIsOpen,nodeFormatDrawerIsOpen:false});};_this.handleEdgeFormatDrawerClose=function(){_this.setPersistentState({edgeFormatDrawerIsOpen:false});_this.setFocus(null);};_this.handleSettingsClick=function(){_this.setState({settingsDialogIsOpen:true});};_this.handleSettingsClose=function(){_this.setState({settingsDialogIsOpen:false});};_this.handleOpenFromBrowserClick=function(){_this.setState({openFromBrowserDialogIsOpen:true});};_this.handleOpenFromBrowserClose=function(){_this.setState({openFromBrowserDialogIsOpen:false});};_this.handleOpenFromBrowser=function(newCurrentName){var currentName=_this.state.name;if(newCurrentName!==currentName){_this.setPersistentState(function(state){var projects=_objectSpread({},state.projects);if(currentName){var currentProject={dotSrc:state.dotSrc,dotSrcLastChangeTime:state.dotSrcLastChangeTime,svg:_this.getSvgString()};projects[currentName]=currentProject;}var newCurrentProject=projects[newCurrentName];delete projects[newCurrentName];_this.disableDotSrcLastChangeTimeUpdate=true;return _objectSpread({name:newCurrentName},newCurrentProject,{projects:projects});});_this.resetUndoAtNextTextChange=true;}_this.handleOpenFromBrowserClose();};_this.createUntitledName=function(projects,currentName){var baseName='Untitled Graph';var newName=baseName;while(projects[newName]||newName===currentName){newName=baseName+' '+(+newName.replace(baseName,'')+1);}return newName;};_this.handleOpenFromBrowserDelete=function(nameToDelete){_this.setPersistentState(function(state){var currentName=state.name;if(nameToDelete===currentName){return{name:'',dotSrc:'',dotSrcLastChangeTime:Date.now()};}else{var projects=_objectSpread({},state.projects);delete projects[nameToDelete];return{projects:projects};}});};_this.handleSaveAsToBrowserClick=function(){_this.setState({rename:false,saveToBrowserAsDialogIsOpen:true});};_this.handleSaveAsToBrowserClose=function(){_this.setState({saveToBrowserAsDialogIsOpen:false});};_this.handleSaveAsToBrowser=function(newName,newDotSrc){var currentName=_this.state.name;if(newName!==currentName){_this.setPersistentState(function(state){var projects=_objectSpread({},state.projects);delete projects[newName];if(currentName&&!state.rename){var currentProject={dotSrc:_this.state.dotSrc,dotSrcLastChangeTime:state.dotSrcLastChangeTime,svg:_this.getSvgString()};projects[currentName]=currentProject;}return{projects:_objectSpread({},projects),name:newName,dotSrc:newDotSrc?newDotSrc:newName?state.dotSrc:'',dotSrcLastChangeTime:newDotSrc?Date.now():state.dotSrcLastChangeTime};});}_this.handleSaveAsToBrowserClose();};_this.handleEngineSelectChange=function(engine){_this.setPersistentState({engine:engine});};_this.handleFitGraphSwitchChange=function(fitGraph){_this.setPersistentState({fitGraph:fitGraph});};_this.handleTransitionDurationChange=function(transitionDuration){_this.setPersistentState({transitionDuration:transitionDuration});};_this.handleTweenPathsSwitchChange=function(tweenPaths){_this.setPersistentState({tweenPaths:tweenPaths});};_this.handleTweenShapesSwitchChange=function(tweenShapes){_this.setPersistentState({tweenShapes:tweenShapes});};_this.handleTweenPrecisionChange=function(tweenPrecision){_this.setPersistentState({tweenPrecision:tweenPrecision});};_this.handleHoldOffChange=function(holdOff){_this.setPersistentState({holdOff:holdOff});};_this.handleFontSizeChange=function(fontSize){_this.setPersistentState({fontSize:fontSize});};_this.handleTabSizeChange=function(tabSize){_this.setPersistentState({tabSize:tabSize});};_this.handleNodeStyleChange=function(style){_this.setPersistentState(function(state){return{defaultNodeAttributes:_objectSpread({},state.defaultNodeAttributes,{style:style})};});};_this.handleNodeColorChange=function(color){_this.setPersistentState(function(state){return{defaultNodeAttributes:_objectSpread({},state.defaultNodeAttributes,{color:color})};});};_this.handleNodeFillColorChange=function(color){_this.setPersistentState(function(state){return{defaultNodeAttributes:_objectSpread({},state.defaultNodeAttributes,{fillcolor:color})};});};_this.handleEdgeStyleChange=function(style){_this.setPersistentState(function(state){return{defaultEdgeAttributes:_objectSpread({},state.defaultEdgeAttributes,{style:style})};});};_this.handleEdgeColorChange=function(color){_this.setPersistentState(function(state){return{defaultEdgeAttributes:_objectSpread({},state.defaultEdgeAttributes,{color:color})};});};_this.handleEdgeFillColorChange=function(color){_this.setPersistentState(function(state){return{defaultEdgeAttributes:_objectSpread({},state.defaultEdgeAttributes,{fillcolor:color})};});};_this.handleKeyboardShortcutsClick=function(){_this.setState({keyboardShortcutsDialogIsOpen:true});};_this.handleKeyboardShortcutsDialogClose=function(){_this.setState({keyboardShortcutsDialogIsOpen:false});};_this.handleMouseOperationsClick=function(){_this.setState({mouseOperationsDialogIsOpen:true});};_this.handleMouseOperationsDialogClose=function(){_this.setState({mouseOperationsDialogIsOpen:false});};_this.handleAboutClick=function(){_this.setState({aboutDialogIsOpen:true});};_this.handleAboutDialogClose=function(){_this.setState({aboutDialogIsOpen:false});};_this.registerNodeShapeClick=function(handleNodeShapeClick){_this.handleNodeShapeClick=handleNodeShapeClick;};_this.registerNodeShapeDragStart=function(handleNodeShapeDragStart){_this.handleNodeShapeDragStart=handleNodeShapeDragStart;};_this.registerNodeShapeDragEnd=function(handleNodeShapeDragEnd){_this.handleNodeShapeDragEnd=handleNodeShapeDragEnd;};_this.handleZoomInButtonClick=function(){};_this.handleZoomOutButtonClick=function(){};_this.handleZoomOutMapButtonClick=function(){};_this.handleZoomResetButtonClick=function(){};_this.registerZoomInButtonClick=function(handleZoomInButtonClick){_this.handleZoomInButtonClick=handleZoomInButtonClick;};_this.registerZoomOutButtonClick=function(handleZoomOutButtonClick){_this.handleZoomOutButtonClick=handleZoomOutButtonClick;};_this.registerZoomOutMapButtonClick=function(handleZoomOutMapButtonClick){_this.handleZoomOutMapButtonClick=handleZoomOutMapButtonClick;};_this.registerZoomResetButtonClick=function(handleZoomResetButtonClick){_this.handleZoomResetButtonClick=handleZoomResetButtonClick;};_this.registerGetSvg=function(getSvg){_this.getSvg=getSvg;};_this.handleGraphComponentSelect=function(components){_this.setState({selectedGraphComponents:components});};_this.handleGraphInitialized=function(){_this.setState({graphInitialized:true});_this.setPersistentState({svg:_this.getSvgString()});};_this.handleError=function(error){if(error){error.numLines=_this.state.dotSrc.split('\\n').length;}if(JSON.stringify(error)!==JSON.stringify(_this.state.error)){_this.setState({error:error});}};_this.registerUndo=function(undo){_this.undo=undo;};_this.registerRedo=function(redo){_this.redo=redo;};_this.registerUndoReset=function(resetUndoStack){_this.resetUndoStack=resetUndoStack;};_this.handleTextEditorFocus=function(){_this.setFocus('TextEditor');};_this.handleTextEditorBlur=function(){// Needed when the user clicks outside of a pane,\n// e.g. the app bar or the background\n_this.setFocusIfFocusIs('TextEditor',null);};_this.handleGraphFocus=function(){_this.setFocus('Graph');};_this.handleInsertPanelsClick=function(){_this.setFocus('InsertPanels');};_this.handleNodeFormatDrawerClick=function(){_this.setFocusIf('nodeFormatDrawerIsOpen','NodeFormatDrawer',null);};_this.handleEdgeFormatDrawerClick=function(){_this.setFocus('EdgeFormatDrawer');_this.setFocusIf('edgeFormatDrawerIsOpen','EdgeFormatDrawer',null);};_this.handleUpdatedSnackbarClose=function(){_this.setState({\"updatedSnackbarIsOpen\":false});_this.setPersistentState({\"version\":packageJSON.version,\"graphvizVersion\":_this.state.graphvizVersion});};_this.setFocus=function(focusedPane){_this.setState(function(state){return state.focusedPane!==focusedPane&&{focusedPane:focusedPane}||null;});};_this.setFocusIfFocusIs=function(currentlyFocusedPane,newFocusedPane){_this.setState(function(state){return state.focusedPane===currentlyFocusedPane&&{focusedPane:newFocusedPane}||null;});};_this.setFocusIf=function(stateProperty,focusedPaneIf,focusedPaneElse){_this.setState(function(state){var focusedPane=state[stateProperty]?focusedPaneIf:focusedPaneElse;return state.focusedPane!==focusedPane&&{focusedPane:focusedPane}||null;});};var dotSrc=localStorage.getItem('dotSrc');if(dotSrc==null){dotSrc=\"strict digraph {\\n    a [shape=\\\"ellipse\\\" style=\\\"filled\\\" fillcolor=\\\"\"+d3_schemeCategory10[0]+\"\\\"]\\n    b [shape=\\\"polygon\\\" style=\\\"filled\\\" fillcolor=\\\"\"+d3_schemeCategory10[1]+\"\\\"]\\n    a -> b [fillcolor=\\\"\"+d3_schemePaired[0]+\"\\\" color=\\\"\"+d3_schemePaired[1]+\"\\\"]\\n}\";}_this.state={projects:JSON.parse(localStorage.getItem('projects'))||{},initialized:false,name:localStorage.getItem('name')||'',dotSrc:dotSrc,dotSrcLastChangeTime:+localStorage.getItem('dotSrcLastChangeTime')||Date.now(),svg:localStorage.getItem('svg')||'',hasUndo:false,hasRedo:false,mainMenuIsOpen:false,helpMenuIsOpen:false,settingsDialogIsOpen:false,openFromBrowserDialogIsOpen:false,saveToBrowserAsDialogIsOpen:false,replaceName:'',exportAsUrlDialogIsOpen:false,exportAsSvgDialogIsOpen:false,insertPanelsAreOpen:(localStorage.getItem('insertPanelsAreOpen')||'false')==='true',nodeFormatDrawerIsOpen:(localStorage.getItem('nodeFormatDrawerIsOpen')||'false')==='true',edgeFormatDrawerIsOpen:(localStorage.getItem('edgeFormatDrawerIsOpen')||'false')==='true',keyboardShortcutsDialogIsOpen:false,mouseOperationsDialogIsOpen:false,aboutDialogIsOpen:false,fitGraph:localStorage.getItem('fitGraph')==='true',transitionDuration:localStorage.getItem('transitionDuration')||1,tweenPaths:localStorage.getItem('tweenPaths')!=='false',tweenShapes:localStorage.getItem('tweenShapes')!=='false',tweenPrecision:localStorage.getItem('tweenPrecision')||'1%',engine:localStorage.getItem('engine')||'dot',defaultNodeAttributes:JSON.parse(localStorage.getItem('defaultNodeAttributes'))||{},defaultEdgeAttributes:JSON.parse(localStorage.getItem('defaultEdgeAttributes'))||{},error:null,holdOff:localStorage.getItem('holdOff')||0.2,fontSize:localStorage.getItem('fontSize')||12,tabSize:+localStorage.getItem('tabSize')||4,selectedGraphComponents:[],test:JSON.parse(localStorage.getItem('test'))||{},graphvizVersion:graphvizVersion,newGraphvizVersion:graphvizVersion!==localStorage.getItem('graphvizVersion'),updatedSnackbarIsOpen:packageJSON.version!==localStorage.getItem('version')};return _this;}_createClass(Index,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var urlParams=qs_parse(window.location.search.slice(1));if(urlParams.dot){var currentDotSrc=this.state.dotSrc;var newDotSrc=urlParams.dot;if(newDotSrc!==currentDotSrc){var names=Object.keys(this.state.projects).filter(function(name){var project=_this2.state.projects[name];return newDotSrc===project.dotSrc;});if(names.length>0){this.handleOpenFromBrowser(names[0]);}else{var newName=this.createUntitledName(this.state.projects,this.state.name);this.handleSaveAsToBrowser(newName,newDotSrc);}}window.history.replaceState(null,null,window.location.pathname);}document.onblur=function(){// Needed when the user clicks outside the document,\n// e.g. the browser address bar\n_this2.setFocus(null);};}},{key:\"getSvgString\",value:function getSvgString(){var svg=this.getSvg();var serializer=new XMLSerializer();return svg?serializer.serializeToString(svg):this.state.svg;}},{key:\"render\",value:function render(){var classes=this.props.classes;var editorIsOpen=!this.state.nodeFormatDrawerIsOpen&&!this.state.edgeFormatDrawerIsOpen;var textEditorHasFocus=this.state.focusedPane==='TextEditor';var nodeFormatDrawerHasFocus=this.state.focusedPane==='NodeFormatDrawer';var edgeFormatDrawerHasFocus=this.state.focusedPane==='EdgeFormatDrawer';var insertPanelsHaveFocus=this.state.focusedPane==='InsertPanels';var graphHasFocus=this.state.focusedPane==='Graph';var leftPaneElevation=textEditorHasFocus||nodeFormatDrawerHasFocus||edgeFormatDrawerHasFocus?focusedElevation:defaultElevation;var rightPaneElevation=graphHasFocus?focusedElevation:defaultElevation;var midPaneElevation=insertPanelsHaveFocus?focusedElevation:defaultElevation;var columns;if(this.state.insertPanelsAreOpen&&this.state.graphInitialized){columns={textEditor:3,insertPanels:3,graph:6};}else{/* browse */columns={textEditor:6,insertPanels:false,graph:6};}var paperClass=this.state.updatedSnackbarIsOpen?classes.paperWhenUpdatedSnackbarIsOpen:classes.paper;return React.createElement(\"div\",{className:classes.root},React.createElement(\"script\",{src:process.env.PUBLIC_URL.replace(/\\.$/,'')+\"@hpcc-js/wasm/dist/index.min.js\",type:\"javascript/worker\"}),React.createElement(ButtonAppBar,{hasUndo:this.state.hasUndo,hasRedo:this.state.hasRedo,onMenuButtonClick:this.handleMainMenuButtonClick,onNewButtonClick:this.handleNewClick,onUndoButtonClick:this.handleUndoButtonClick,onRedoButtonClick:this.handleRedoButtonClick,onInsertClick:this.handleInsertButtonClick,onNodeFormatClick:this.handleNodeFormatButtonClick,onEdgeFormatClick:this.handleEdgeFormatButtonClick,onZoomInButtonClick:this.handleZoomInButtonClick,onZoomOutButtonClick:this.handleZoomOutButtonClick,onZoomOutMapButtonClick:this.handleZoomOutMapButtonClick,onZoomResetButtonClick:this.handleZoomResetButtonClick,onSettingsButtonClick:this.handleSettingsClick,onOpenInBrowserButtonClick:this.handleOpenFromBrowserClick,onSaveAltButtonClick:this.handleSaveAsToBrowserClick,onHelpButtonClick:this.handleHelpButtonClick}),this.state.mainMenuIsOpen&&React.createElement(MainMenu,{anchorEl:this.state.mainMenuAnchorEl,onMenuClose:this.handleMainMenuClose,onSettingsClick:this.handleSettingsClick,onOpenFromBrowserClick:this.handleOpenFromBrowserClick,onSaveAsToBrowserClick:this.handleSaveAsToBrowserClick,onNewClick:this.handleNewClick,onRenameClick:this.handleRenameClick,onExportAsUrlClick:this.handleExportAsUrlClick,onExportAsSvgClick:this.handleExportAsSvgClick}),this.state.settingsDialogIsOpen&&React.createElement(SettingsDialog,{engine:this.state.engine,fitGraph:this.state.fitGraph,transitionDuration:this.state.transitionDuration,tweenPaths:this.state.tweenPaths,tweenShapes:this.state.tweenShapes,tweenPrecision:this.state.tweenPrecision,onEngineSelectChange:this.handleEngineSelectChange,onFitGraphSwitchChange:this.handleFitGraphSwitchChange,onTransitionDurationChange:this.handleTransitionDurationChange,onTweenPathsSwitchChange:this.handleTweenPathsSwitchChange,onTweenShapesSwitchChange:this.handleTweenShapesSwitchChange,onTweenPrecisionChange:this.handleTweenPrecisionChange,holdOff:this.state.holdOff,onHoldOffChange:this.handleHoldOffChange,fontSize:this.state.fontSize,onFontSizeChange:this.handleFontSizeChange,tabSize:this.state.tabSize,onTabSizeChange:this.handleTabSizeChange,onSettingsClose:this.handleSettingsClose}),this.state.openFromBrowserDialogIsOpen&&React.createElement(OpenFromBrowserDialog,{projects:this.state.projects,dotSrc:this.state.dotSrc,dotSrcLastChangeTime:this.state.dotSrcLastChangeTime,svg:this.getSvgString(),name:this.state.name,onOpen:this.handleOpenFromBrowser,onClose:this.handleOpenFromBrowserClose,onDelete:this.handleOpenFromBrowserDelete}),this.state.saveToBrowserAsDialogIsOpen&&React.createElement(SaveAsToBrowserDialog,{name:this.state.name,rename:this.state.rename,defaultNewName:this.state.name||this.createUntitledName(this.state.projects),projects:this.state.projects,onSave:this.handleSaveAsToBrowser,onClose:this.handleSaveAsToBrowserClose}),this.state.exportAsUrlDialogIsOpen&&React.createElement(ExportAsUrlDialog,{URL:window.location.href+'?'+qs_stringify({dot:this.state.dotSrc}),onClose:this.handleExportAsUrlClose}),this.state.exportAsSvgDialogIsOpen&&React.createElement(ExportAsSvgDialog,{defaultFilename:(this.state.name||this.createUntitledName(this.state.projects))+'.svg',getSvgString:this.getSvgString.bind(this),onClose:this.handleExportAsSvgClose}),this.state.updatedSnackbarIsOpen&&React.createElement(UpdatedSnackbar,{newGraphvizVersion:this.state.newGraphvizVersion,graphvizVersion:this.state.graphvizVersion,onUpdatedSnackbarClose:this.handleUpdatedSnackbarClose}),React.createElement(Grid,{container:true,spacing:3,style:{margin:0,width:'100%'}},React.createElement(Grid,{item:true,xs:columns.textEditor},React.createElement(Paper,{elevation:leftPaneElevation,className:paperClass},this.state.nodeFormatDrawerIsOpen&&React.createElement(FormatDrawer,{type:\"node\",defaultAttributes:this.state.defaultNodeAttributes,onClick:this.handleNodeFormatDrawerClick,onFormatDrawerClose:this.handleNodeFormatDrawerClose,onStyleChange:this.handleNodeStyleChange,onColorChange:this.handleNodeColorChange,onFillColorChange:this.handleNodeFillColorChange}),this.state.edgeFormatDrawerIsOpen&&React.createElement(FormatDrawer,{type:\"edge\",defaultAttributes:this.state.defaultEdgeAttributes,onClick:this.handleEdgeFormatDrawerClick,onFormatDrawerClose:this.handleEdgeFormatDrawerClose,onStyleChange:this.handleEdgeStyleChange,onColorChange:this.handleEdgeColorChange,onFillColorChange:this.handleEdgeFillColorChange}),React.createElement(\"div\",{style:{display:editorIsOpen?'block':'none'}},React.createElement(TextEditor// allocated viewport width - 2 * padding\n,{width:\"calc(\".concat(columns.textEditor*100/12,\"vw - 2 * 12px)\"),height:\"calc(100vh - 64px - 2 * 12px - \".concat(this.updatedSnackbarIsOpen?\"64px\":\"0px\",\")\"),dotSrc:this.state.dotSrc,onTextChange:this.handleTextChange,onFocus:this.handleTextEditorFocus,onBlur:this.handleTextEditorBlur,error:this.state.error,selectedGraphComponents:this.state.selectedGraphComponents,holdOff:this.state.holdOff,fontSize:this.state.fontSize,tabSize:this.state.tabSize,registerUndo:this.registerUndo,registerRedo:this.registerRedo,registerUndoReset:this.registerUndoReset})))),this.state.insertPanelsAreOpen&&this.state.graphInitialized&&React.createElement(Grid,{item:true,xs:columns.insertPanels},React.createElement(Paper,{elevation:midPaneElevation,className:paperClass},React.createElement(InsertPanels,{onClick:this.handleInsertPanelsClick,onNodeShapeClick:this.handleNodeShapeClick,onNodeShapeDragStart:this.handleNodeShapeDragStart,onNodeShapeDragEnd:this.handleNodeShapeDragEnd}))),React.createElement(Grid,{item:true,xs:columns.graph},React.createElement(Paper,{elevation:rightPaneElevation,className:paperClass},React.createElement(Graph,{hasFocus:graphHasFocus,dotSrc:this.state.dotSrc,engine:this.state.engine,fit:this.state.fitGraph,transitionDuration:this.state.transitionDuration,tweenPaths:this.state.tweenPaths,tweenShapes:this.state.tweenShapes,tweenPrecision:this.state.tweenPrecision,defaultNodeAttributes:this.state.defaultNodeAttributes,defaultEdgeAttributes:this.state.defaultEdgeAttributes,onFocus:this.handleGraphFocus,onTextChange:this.handleTextChange,onHelp:this.handleKeyboardShortcutsClick,onSelect:this.handleGraphComponentSelect,onUndo:this.undo,onRedo:this.redo,registerNodeShapeClick:this.registerNodeShapeClick,registerNodeShapeDragStart:this.registerNodeShapeDragStart,registerNodeShapeDragEnd:this.registerNodeShapeDragEnd,registerZoomInButtonClick:this.registerZoomInButtonClick,registerZoomOutButtonClick:this.registerZoomOutButtonClick,registerZoomOutMapButtonClick:this.registerZoomOutMapButtonClick,registerZoomResetButtonClick:this.registerZoomResetButtonClick,registerGetSvg:this.registerGetSvg,onInitialized:this.handleGraphInitialized,onError:this.handleError,test:this.state.test})))),this.state.helpMenuIsOpen&&React.createElement(HelpMenu,{anchorEl:this.state.helpMenuAnchorEl,onMenuClose:this.handleHelpMenuClose,onKeyboardShortcutsClick:this.handleKeyboardShortcutsClick,onMouseOperationsClick:this.handleMouseOperationsClick,onAboutClick:this.handleAboutClick}),this.state.keyboardShortcutsDialogIsOpen&&React.createElement(KeyboardShortcutsDialog,{onKeyboardShortcutsDialogClose:this.handleKeyboardShortcutsDialogClose}),this.state.mouseOperationsDialogIsOpen&&React.createElement(MouseOperationsDialog,{onMouseOperationsDialogClose:this.handleMouseOperationsDialogClose}),this.state.aboutDialogIsOpen&&React.createElement(AboutDialog,{graphvizVersion:this.state.graphvizVersion,onAboutDialogClose:this.handleAboutDialogClose}));}}]);return Index;}(React.Component);export default withRoot(withStyles(styles)(Index));","map":{"version":3,"sources":["C:/Users/user/graphviz-visual-editor/src/pages/index.js"],"names":["React","Paper","Grid","withStyles","withRoot","ButtonAppBar","Graph","TextEditor","MainMenu","HelpMenu","SettingsDialog","OpenFromBrowserDialog","SaveAsToBrowserDialog","InsertPanels","FormatDrawer","schemeCategory10","d3_schemeCategory10","schemePaired","d3_schemePaired","KeyboardShortcutsDialog","MouseOperationsDialog","AboutDialog","parse","qs_parse","stringify","qs_stringify","ExportAsUrlDialog","ExportAsSvgDialog","graphvizVersion","UpdatedSnackbar","packageJSON","styles","theme","root","textAlign","paper","height","paperWhenUpdatedSnackbarIsOpen","defaultElevation","focusedElevation","Index","props","setPersistentState","updater","setState","state","obj","Object","keys","forEach","key","value","toString","JSON","localStorage","setItem","handleTextChange","text","undoRedoState","newState","name","createUntitledName","projects","dotSrc","disableDotSrcLastChangeTimeUpdate","dotSrcLastChangeTime","Date","now","resetUndoAtNextTextChange","resetUndoStack","hasUndo","hasRedo","handleMainMenuButtonClick","anchorEl","mainMenuIsOpen","mainMenuAnchorEl","handleNewClick","handleSaveAsToBrowser","handleRenameClick","rename","saveToBrowserAsDialogIsOpen","handleExportAsUrlClick","exportAsUrlDialogIsOpen","handleExportAsSvgClick","exportAsSvgDialogIsOpen","handleExportAsUrlClose","handleExportAsSvgClose","handleUndoButtonClick","undo","handleRedoButtonClick","redo","handleMainMenuClose","handleHelpButtonClick","helpMenuIsOpen","helpMenuAnchorEl","handleHelpMenuClose","handleInsertButtonClick","setFocusIf","insertPanelsAreOpen","handleNodeFormatButtonClick","nodeFormatDrawerIsOpen","edgeFormatDrawerIsOpen","handleNodeFormatDrawerClose","setFocus","handleEdgeFormatButtonClick","handleEdgeFormatDrawerClose","handleSettingsClick","settingsDialogIsOpen","handleSettingsClose","handleOpenFromBrowserClick","openFromBrowserDialogIsOpen","handleOpenFromBrowserClose","handleOpenFromBrowser","newCurrentName","currentName","currentProject","svg","getSvgString","newCurrentProject","baseName","newName","replace","handleOpenFromBrowserDelete","nameToDelete","handleSaveAsToBrowserClick","handleSaveAsToBrowserClose","newDotSrc","handleEngineSelectChange","engine","handleFitGraphSwitchChange","fitGraph","handleTransitionDurationChange","transitionDuration","handleTweenPathsSwitchChange","tweenPaths","handleTweenShapesSwitchChange","tweenShapes","handleTweenPrecisionChange","tweenPrecision","handleHoldOffChange","holdOff","handleFontSizeChange","fontSize","handleTabSizeChange","tabSize","handleNodeStyleChange","style","defaultNodeAttributes","handleNodeColorChange","color","handleNodeFillColorChange","fillcolor","handleEdgeStyleChange","defaultEdgeAttributes","handleEdgeColorChange","handleEdgeFillColorChange","handleKeyboardShortcutsClick","keyboardShortcutsDialogIsOpen","handleKeyboardShortcutsDialogClose","handleMouseOperationsClick","mouseOperationsDialogIsOpen","handleMouseOperationsDialogClose","handleAboutClick","aboutDialogIsOpen","handleAboutDialogClose","registerNodeShapeClick","handleNodeShapeClick","registerNodeShapeDragStart","handleNodeShapeDragStart","registerNodeShapeDragEnd","handleNodeShapeDragEnd","handleZoomInButtonClick","handleZoomOutButtonClick","handleZoomOutMapButtonClick","handleZoomResetButtonClick","registerZoomInButtonClick","registerZoomOutButtonClick","registerZoomOutMapButtonClick","registerZoomResetButtonClick","registerGetSvg","getSvg","handleGraphComponentSelect","components","selectedGraphComponents","handleGraphInitialized","graphInitialized","handleError","error","numLines","split","length","registerUndo","registerRedo","registerUndoReset","handleTextEditorFocus","handleTextEditorBlur","setFocusIfFocusIs","handleGraphFocus","handleInsertPanelsClick","handleNodeFormatDrawerClick","handleEdgeFormatDrawerClick","handleUpdatedSnackbarClose","version","focusedPane","currentlyFocusedPane","newFocusedPane","stateProperty","focusedPaneIf","focusedPaneElse","getItem","initialized","replaceName","test","newGraphvizVersion","updatedSnackbarIsOpen","urlParams","window","location","search","slice","dot","currentDotSrc","names","filter","project","history","replaceState","pathname","document","onblur","serializer","XMLSerializer","serializeToString","classes","editorIsOpen","textEditorHasFocus","nodeFormatDrawerHasFocus","edgeFormatDrawerHasFocus","insertPanelsHaveFocus","graphHasFocus","leftPaneElevation","rightPaneElevation","midPaneElevation","columns","textEditor","insertPanels","graph","paperClass","process","env","PUBLIC_URL","href","bind","margin","width","display","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport 'typeface-roboto';\r\nimport PropTypes from 'prop-types';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport withRoot from '../withRoot';\r\nimport ButtonAppBar from '../ButtonAppBar';\r\nimport Graph from '../Graph';\r\nimport TextEditor from '../TextEditor';\r\nimport MainMenu from '../MainMenu';\r\nimport HelpMenu from '../HelpMenu';\r\nimport SettingsDialog from '../SettingsDialog';\r\nimport OpenFromBrowserDialog from '../OpenFromBrowserDialog';\r\nimport SaveAsToBrowserDialog from '../SaveAsToBrowserDialog';\r\nimport InsertPanels from '../InsertPanels';\r\nimport FormatDrawer from '../FormatDrawer';\r\nimport { schemeCategory10 as d3_schemeCategory10} from 'd3-scale-chromatic';\r\nimport { schemePaired as d3_schemePaired} from 'd3-scale-chromatic';\r\nimport KeyboardShortcutsDialog from '../KeyboardShortcutsDialog';\r\nimport MouseOperationsDialog from '../MouseOperationsDialog';\r\nimport AboutDialog from '../AboutDialog';\r\nimport { parse as qs_parse } from 'qs';\r\nimport { stringify as qs_stringify } from 'qs';\r\nimport ExportAsUrlDialog from '../ExportAsUrlDialog';\r\nimport ExportAsSvgDialog from '../ExportAsSvgDialog'\r\nimport { graphvizVersion } from '../graphvizVersion';\r\nimport UpdatedSnackbar from '../UpdatedSnackbar';\r\nimport packageJSON from '../../package.json';\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    textAlign: 'center',\r\n  },\r\n  paper: {\r\n    // viewport height - app bar - 2 * padding\r\n    height: \"calc(100vh - 64px - 2 * 12px)\",\r\n  },\r\n  paperWhenUpdatedSnackbarIsOpen: {\r\n    \"margin-top\": \"64px\",\r\n    height: \"calc(100vh - 64px - 64px - 2 * 12px)\",\r\n  }\r\n});\r\n\r\nconst defaultElevation = 2;\r\nconst focusedElevation = 8;\r\n\r\nclass Index extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    let dotSrc = localStorage.getItem('dotSrc');\r\n    if (dotSrc == null) {\r\n      dotSrc = `strict digraph {\r\n    a [shape=\"ellipse\" style=\"filled\" fillcolor=\"` + d3_schemeCategory10[0] + `\"]\r\n    b [shape=\"polygon\" style=\"filled\" fillcolor=\"` + d3_schemeCategory10[1] + `\"]\r\n    a -> b [fillcolor=\"` + d3_schemePaired[0] + `\" color=\"` + d3_schemePaired[1] + `\"]\r\n}`;\r\n    }\r\n    this.state = {\r\n      projects: JSON.parse(localStorage.getItem('projects')) || {},\r\n      initialized: false,\r\n      name: localStorage.getItem('name') || '',\r\n      dotSrc: dotSrc,\r\n      dotSrcLastChangeTime: +localStorage.getItem('dotSrcLastChangeTime') || Date.now(),\r\n      svg: localStorage.getItem('svg') || '',\r\n      hasUndo: false,\r\n      hasRedo: false,\r\n      mainMenuIsOpen: false,\r\n      helpMenuIsOpen: false,\r\n      settingsDialogIsOpen: false,\r\n      openFromBrowserDialogIsOpen: false,\r\n      saveToBrowserAsDialogIsOpen: false,\r\n      replaceName: '',\r\n      exportAsUrlDialogIsOpen: false,\r\n      exportAsSvgDialogIsOpen: false,\r\n      insertPanelsAreOpen: (localStorage.getItem('insertPanelsAreOpen') || 'false') === 'true',\r\n      nodeFormatDrawerIsOpen: (localStorage.getItem('nodeFormatDrawerIsOpen') || 'false') === 'true',\r\n      edgeFormatDrawerIsOpen: (localStorage.getItem('edgeFormatDrawerIsOpen') || 'false') === 'true',\r\n      keyboardShortcutsDialogIsOpen: false,\r\n      mouseOperationsDialogIsOpen: false,\r\n      aboutDialogIsOpen: false,\r\n      fitGraph : localStorage.getItem('fitGraph') === 'true',\r\n      transitionDuration: localStorage.getItem('transitionDuration') || 1,\r\n      tweenPaths : localStorage.getItem('tweenPaths') !== 'false',\r\n      tweenShapes : localStorage.getItem('tweenShapes') !== 'false',\r\n      tweenPrecision : localStorage.getItem('tweenPrecision') || '1%',\r\n      engine : localStorage.getItem('engine') || 'dot',\r\n      defaultNodeAttributes: JSON.parse(localStorage.getItem('defaultNodeAttributes')) || {},\r\n      defaultEdgeAttributes: JSON.parse(localStorage.getItem('defaultEdgeAttributes')) || {},\r\n      error: null,\r\n      holdOff: localStorage.getItem('holdOff') || 0.2,\r\n      fontSize: localStorage.getItem('fontSize') || 12,\r\n      tabSize: +localStorage.getItem('tabSize') || 4,\r\n      selectedGraphComponents: [],\r\n      test: JSON.parse(localStorage.getItem('test')) || {},\r\n      graphvizVersion: graphvizVersion,\r\n      newGraphvizVersion: graphvizVersion !== localStorage.getItem('graphvizVersion'),\r\n      updatedSnackbarIsOpen: packageJSON.version !== localStorage.getItem('version'),\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    const urlParams = qs_parse(window.location.search.slice(1));\r\n    if (urlParams.dot) {\r\n      const currentDotSrc = this.state.dotSrc;\r\n      const newDotSrc = urlParams.dot;\r\n      if (newDotSrc !== currentDotSrc) {\r\n        const names = Object.keys(this.state.projects).filter((name) => {\r\n          const project = this.state.projects[name];\r\n          return newDotSrc === project.dotSrc;\r\n        });\r\n        if (names.length > 0) {\r\n          this.handleOpenFromBrowser(names[0]);\r\n        } else {\r\n          const newName = this.createUntitledName(this.state.projects, this.state.name);\r\n          this.handleSaveAsToBrowser(newName, newDotSrc);\r\n        }\r\n      }\r\n      window.history.replaceState(null, null, window.location.pathname);\r\n    }\r\n    document.onblur = () => {\r\n      // Needed when the user clicks outside the document,\r\n      // e.g. the browser address bar\r\n      this.setFocus(null);\r\n    }\r\n  }\r\n\r\n  setPersistentState = (updater) => {\r\n    this.setState((state) => {\r\n      if (typeof updater === 'function') {\r\n        var obj = updater(state);\r\n      } else {\r\n        obj = updater;\r\n      }\r\n      if (obj != null) {\r\n        Object.keys(obj).forEach((key) => {\r\n          let value = obj[key];\r\n          if (typeof value === 'boolean') {\r\n            value = value.toString();\r\n          }\r\n          else if (typeof value === 'object') {\r\n            value = JSON.stringify(value);\r\n          }\r\n          localStorage.setItem(key, value);\r\n        });\r\n      }\r\n      return obj;\r\n    });\r\n  }\r\n\r\n  handleTextChange = (text, undoRedoState) => {\r\n    this.setPersistentState((state) => {\r\n      const newState = {\r\n        name: state.name || (text ? this.createUntitledName(state.projects) : ''),\r\n        dotSrc: text,\r\n      };\r\n      if (!this.disableDotSrcLastChangeTimeUpdate) {\r\n        newState.dotSrcLastChangeTime = Date.now();\r\n      }\r\n      return newState;\r\n    });\r\n    this.disableDotSrcLastChangeTimeUpdate = false;\r\n    if (this.resetUndoAtNextTextChange) {\r\n      this.resetUndoStack();\r\n      undoRedoState = {\r\n        hasUndo: false,\r\n        hasRedo: false,\r\n      };\r\n      this.resetUndoAtNextTextChange = false;\r\n    }\r\n    this.setState(undoRedoState);\r\n  }\r\n\r\n  handleMainMenuButtonClick = (anchorEl) => {\r\n    this.setState({\r\n      mainMenuIsOpen: true,\r\n      mainMenuAnchorEl: anchorEl,\r\n    });\r\n  }\r\n\r\n  handleNewClick = () => {\r\n    this.handleSaveAsToBrowser('');\r\n    this.resetUndoAtNextTextChange = true;\r\n  }\r\n\r\n  handleRenameClick = () => {\r\n    this.setState({\r\n      rename: true,\r\n      saveToBrowserAsDialogIsOpen: true,\r\n    });\r\n  }\r\n\r\n  handleExportAsUrlClick = () => {\r\n    this.setState({\r\n      exportAsUrlDialogIsOpen: true,\r\n    });\r\n  }\r\n\r\n  handleExportAsSvgClick = () => {\r\n    this.setState({\r\n      exportAsSvgDialogIsOpen: true,\r\n    });\r\n  }\r\n\r\n  handleExportAsUrlClose = () => {\r\n    this.setState({\r\n      exportAsUrlDialogIsOpen: false,\r\n    });\r\n  }\r\n\r\n  handleExportAsSvgClose = () => {\r\n    this.setState({\r\n      exportAsSvgDialogIsOpen: false,\r\n    });\r\n  }\r\n\r\n  handleUndoButtonClick = () => {\r\n    this.undo();\r\n  }\r\n\r\n  handleRedoButtonClick = () => {\r\n    this.redo();\r\n  }\r\n\r\n  handleMainMenuClose = () => {\r\n    this.setState({\r\n      mainMenuIsOpen: false,\r\n    });\r\n  }\r\n\r\n  handleHelpButtonClick = (anchorEl) => {\r\n    this.setState({\r\n      helpMenuIsOpen: true,\r\n      helpMenuAnchorEl: anchorEl,\r\n    });\r\n  }\r\n\r\n  handleHelpMenuClose = () => {\r\n    this.setState({\r\n      helpMenuIsOpen: false,\r\n    });\r\n  }\r\n\r\n  handleInsertButtonClick = () => {\r\n    this.setFocusIf('insertPanelsAreOpen', null, 'InsertPanels')\r\n    this.setPersistentState({\r\n      insertPanelsAreOpen: !this.state.insertPanelsAreOpen,\r\n    });\r\n  }\r\n\r\n  handleNodeFormatButtonClick = () => {\r\n    this.setFocusIf('nodeFormatDrawerIsOpen', null, 'NodeFormatDrawer')\r\n    this.setPersistentState({\r\n      nodeFormatDrawerIsOpen: !this.state.nodeFormatDrawerIsOpen,\r\n      edgeFormatDrawerIsOpen: false,\r\n    });\r\n  }\r\n\r\n  handleNodeFormatDrawerClose = () => {\r\n    this.setPersistentState({\r\n      nodeFormatDrawerIsOpen: false,\r\n    });\r\n    this.setFocus(null);\r\n  }\r\n\r\n  handleEdgeFormatButtonClick = () => {\r\n    this.setFocusIf('edgeFormatDrawerIsOpen', null, 'EdgeFormatDrawer')\r\n    this.setPersistentState({\r\n      edgeFormatDrawerIsOpen: !this.state.edgeFormatDrawerIsOpen,\r\n      nodeFormatDrawerIsOpen: false,\r\n    });\r\n  }\r\n\r\n  handleEdgeFormatDrawerClose = () => {\r\n    this.setPersistentState({\r\n      edgeFormatDrawerIsOpen: false,\r\n    });\r\n    this.setFocus(null);\r\n  }\r\n\r\n  handleSettingsClick = () => {\r\n    this.setState({\r\n      settingsDialogIsOpen: true,\r\n    });\r\n  }\r\n\r\n  handleSettingsClose = () => {\r\n    this.setState({\r\n      settingsDialogIsOpen: false,\r\n    });\r\n  }\r\n\r\n  handleOpenFromBrowserClick = () => {\r\n    this.setState({\r\n      openFromBrowserDialogIsOpen: true,\r\n    });\r\n  }\r\n\r\n  handleOpenFromBrowserClose = () => {\r\n    this.setState({\r\n      openFromBrowserDialogIsOpen: false,\r\n    });\r\n  }\r\n\r\n  handleOpenFromBrowser = (newCurrentName) => {\r\n    const currentName = this.state.name;\r\n    if (newCurrentName !== currentName) {\r\n      this.setPersistentState(state => {\r\n        const projects = {...state.projects};\r\n        if (currentName) {\r\n          const currentProject = {\r\n            dotSrc: state.dotSrc,\r\n            dotSrcLastChangeTime: state.dotSrcLastChangeTime,\r\n            svg: this.getSvgString(),\r\n          };\r\n          projects[currentName] = currentProject;\r\n        }\r\n        const newCurrentProject = projects[newCurrentName];\r\n        delete projects[newCurrentName];\r\n        this.disableDotSrcLastChangeTimeUpdate = true;\r\n        return {\r\n          name: newCurrentName,\r\n          ...newCurrentProject,\r\n          projects: projects,\r\n        }\r\n      });\r\n      this.resetUndoAtNextTextChange = true;\r\n    }\r\n    this.handleOpenFromBrowserClose();\r\n  }\r\n\r\n  createUntitledName = (projects, currentName) => {\r\n    const baseName = 'Untitled Graph';\r\n    let newName = baseName;\r\n    while (projects[newName] || newName === currentName) {\r\n      newName = baseName + ' ' + (+newName.replace(baseName, '') + 1);\r\n    }\r\n    return newName;\r\n  }\r\n\r\n  handleOpenFromBrowserDelete = (nameToDelete) => {\r\n    this.setPersistentState((state) => {\r\n      const currentName = state.name;\r\n      if (nameToDelete === currentName) {\r\n        return {\r\n          name: '',\r\n          dotSrc: '',\r\n          dotSrcLastChangeTime: Date.now(),\r\n        }\r\n      } else {\r\n        const projects = {...state.projects};\r\n        delete projects[nameToDelete];\r\n        return {\r\n          projects: projects,\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  handleSaveAsToBrowserClick = () => {\r\n    this.setState({\r\n      rename: false,\r\n      saveToBrowserAsDialogIsOpen: true,\r\n    });\r\n  }\r\n\r\n  handleSaveAsToBrowserClose = () => {\r\n    this.setState({\r\n      saveToBrowserAsDialogIsOpen: false,\r\n    });\r\n  }\r\n\r\n  handleSaveAsToBrowser = (newName, newDotSrc) => {\r\n    const currentName = this.state.name;\r\n    if (newName !== currentName) {\r\n      this.setPersistentState((state) => {\r\n        const projects = {...state.projects};\r\n        delete projects[newName];\r\n        if (currentName && !state.rename) {\r\n          const currentProject = {\r\n            dotSrc: this.state.dotSrc,\r\n            dotSrcLastChangeTime: state.dotSrcLastChangeTime,\r\n            svg: this.getSvgString(),\r\n          };\r\n          projects[currentName] = currentProject;\r\n        }\r\n        return {\r\n          projects: {\r\n            ...projects,\r\n          },\r\n          name: newName,\r\n          dotSrc: newDotSrc ? newDotSrc : (newName ? state.dotSrc : ''),\r\n          dotSrcLastChangeTime: newDotSrc ? Date.now() : state.dotSrcLastChangeTime,\r\n        };\r\n      });\r\n    }\r\n    this.handleSaveAsToBrowserClose();\r\n  }\r\n\r\n  handleEngineSelectChange = (engine) => {\r\n    this.setPersistentState({\r\n      engine: engine,\r\n    });\r\n  }\r\n\r\n  handleFitGraphSwitchChange = (fitGraph) => {\r\n    this.setPersistentState({\r\n      fitGraph: fitGraph,\r\n    });\r\n  }\r\n\r\n  handleTransitionDurationChange = (transitionDuration) => {\r\n    this.setPersistentState({\r\n      transitionDuration: transitionDuration,\r\n    });\r\n  }\r\n\r\n  handleTweenPathsSwitchChange = (tweenPaths) => {\r\n    this.setPersistentState({\r\n      tweenPaths: tweenPaths,\r\n    });\r\n  }\r\n\r\n  handleTweenShapesSwitchChange = (tweenShapes) => {\r\n    this.setPersistentState({\r\n      tweenShapes: tweenShapes,\r\n    });\r\n  }\r\n\r\n  handleTweenPrecisionChange = (tweenPrecision) => {\r\n    this.setPersistentState({\r\n      tweenPrecision: tweenPrecision,\r\n    });\r\n  }\r\n\r\n  handleHoldOffChange = (holdOff) => {\r\n    this.setPersistentState({\r\n      holdOff: holdOff,\r\n    });\r\n  }\r\n\r\n  handleFontSizeChange = (fontSize) => {\r\n    this.setPersistentState({\r\n      fontSize: fontSize,\r\n    });\r\n  }\r\n\r\n  handleTabSizeChange = (tabSize) => {\r\n    this.setPersistentState({\r\n      tabSize: tabSize,\r\n    });\r\n  }\r\n\r\n  handleNodeStyleChange = (style) => {\r\n    this.setPersistentState(state => ({\r\n      defaultNodeAttributes: {\r\n          ...state.defaultNodeAttributes,\r\n        style: style,\r\n      },\r\n    }));\r\n  }\r\n\r\n  handleNodeColorChange = (color) => {\r\n    this.setPersistentState(state => ({\r\n      defaultNodeAttributes: {\r\n          ...state.defaultNodeAttributes,\r\n        color: color,\r\n      },\r\n    }));\r\n  }\r\n\r\n  handleNodeFillColorChange = (color) => {\r\n    this.setPersistentState(state => ({\r\n      defaultNodeAttributes: {\r\n          ...state.defaultNodeAttributes,\r\n        fillcolor: color,\r\n      },\r\n    }));\r\n  }\r\n\r\n  handleEdgeStyleChange = (style) => {\r\n    this.setPersistentState(state => ({\r\n      defaultEdgeAttributes: {\r\n          ...state.defaultEdgeAttributes,\r\n        style: style,\r\n      },\r\n    }));\r\n  }\r\n\r\n  handleEdgeColorChange = (color) => {\r\n    this.setPersistentState(state => ({\r\n      defaultEdgeAttributes: {\r\n          ...state.defaultEdgeAttributes,\r\n        color: color,\r\n      },\r\n    }));\r\n  }\r\n\r\n  handleEdgeFillColorChange = (color) => {\r\n    this.setPersistentState(state => ({\r\n      defaultEdgeAttributes: {\r\n          ...state.defaultEdgeAttributes,\r\n        fillcolor: color,\r\n      },\r\n    }));\r\n  }\r\n\r\n  handleKeyboardShortcutsClick = () => {\r\n    this.setState({\r\n      keyboardShortcutsDialogIsOpen: true,\r\n    });\r\n  }\r\n\r\n  handleKeyboardShortcutsDialogClose = () => {\r\n    this.setState({\r\n      keyboardShortcutsDialogIsOpen: false,\r\n    });\r\n  }\r\n\r\n  handleMouseOperationsClick = () => {\r\n    this.setState({\r\n      mouseOperationsDialogIsOpen: true,\r\n    });\r\n  }\r\n\r\n  handleMouseOperationsDialogClose = () => {\r\n    this.setState({\r\n      mouseOperationsDialogIsOpen: false,\r\n    });\r\n  }\r\n\r\n  handleAboutClick = () => {\r\n    this.setState({\r\n      aboutDialogIsOpen: true,\r\n    });\r\n  }\r\n\r\n  handleAboutDialogClose = () => {\r\n    this.setState({\r\n      aboutDialogIsOpen: false,\r\n    });\r\n  }\r\n\r\n  registerNodeShapeClick = (handleNodeShapeClick) => {\r\n    this.handleNodeShapeClick = handleNodeShapeClick;\r\n  }\r\n\r\n  registerNodeShapeDragStart = (handleNodeShapeDragStart) => {\r\n    this.handleNodeShapeDragStart = handleNodeShapeDragStart;\r\n  }\r\n\r\n  registerNodeShapeDragEnd = (handleNodeShapeDragEnd) => {\r\n    this.handleNodeShapeDragEnd = handleNodeShapeDragEnd;\r\n  }\r\n\r\n  handleZoomInButtonClick = () => {}\r\n  handleZoomOutButtonClick = () => {}\r\n  handleZoomOutMapButtonClick = () => {}\r\n  handleZoomResetButtonClick = () => {}\r\n\r\n  registerZoomInButtonClick = (handleZoomInButtonClick) => {\r\n    this.handleZoomInButtonClick = handleZoomInButtonClick;\r\n  }\r\n\r\n  registerZoomOutButtonClick = (handleZoomOutButtonClick) => {\r\n    this.handleZoomOutButtonClick = handleZoomOutButtonClick;\r\n  }\r\n\r\n  registerZoomOutMapButtonClick = (handleZoomOutMapButtonClick) => {\r\n    this.handleZoomOutMapButtonClick = handleZoomOutMapButtonClick;\r\n  }\r\n\r\n  registerZoomResetButtonClick = (handleZoomResetButtonClick) => {\r\n    this.handleZoomResetButtonClick = handleZoomResetButtonClick;\r\n  }\r\n\r\n  registerGetSvg = (getSvg) => {\r\n    this.getSvg = getSvg;\r\n  }\r\n\r\n  getSvgString() {\r\n    const svg = this.getSvg();\r\n    const serializer = new XMLSerializer();\r\n    return svg ? serializer.serializeToString(svg) : this.state.svg;\r\n  }\r\n\r\n  handleGraphComponentSelect = (components) => {\r\n    this.setState({\r\n      selectedGraphComponents: components,\r\n    });\r\n  }\r\n\r\n  handleGraphInitialized = () => {\r\n    this.setState({\r\n      graphInitialized: true,\r\n    });\r\n    this.setPersistentState({\r\n      svg: this.getSvgString(),\r\n    });\r\n  }\r\n\r\n  handleError = (error) => {\r\n    if (error) {\r\n      error.numLines = this.state.dotSrc.split('\\n').length;\r\n    }\r\n    if (JSON.stringify(error) !== JSON.stringify(this.state.error)) {\r\n      this.setState({\r\n        error: error,\r\n      });\r\n    }\r\n  }\r\n\r\n  registerUndo = (undo) => {\r\n    this.undo = undo;\r\n  }\r\n\r\n  registerRedo = (redo) => {\r\n    this.redo = redo;\r\n  }\r\n\r\n  registerUndoReset = (resetUndoStack) => {\r\n    this.resetUndoStack = resetUndoStack;\r\n  }\r\n\r\n  handleTextEditorFocus = () => {\r\n    this.setFocus('TextEditor');\r\n  }\r\n\r\n  handleTextEditorBlur = () => {\r\n    // Needed when the user clicks outside of a pane,\r\n    // e.g. the app bar or the background\r\n    this.setFocusIfFocusIs('TextEditor', null);\r\n  }\r\n\r\n  handleGraphFocus = () => {\r\n    this.setFocus('Graph');\r\n  }\r\n\r\n  handleInsertPanelsClick = () => {\r\n    this.setFocus('InsertPanels');\r\n  }\r\n\r\n  handleNodeFormatDrawerClick = () => {\r\n    this.setFocusIf('nodeFormatDrawerIsOpen', 'NodeFormatDrawer', null)\r\n  }\r\n\r\n  handleEdgeFormatDrawerClick = () => {\r\n    this.setFocus('EdgeFormatDrawer');\r\n    this.setFocusIf('edgeFormatDrawerIsOpen', 'EdgeFormatDrawer', null)\r\n  }\r\n\r\n  handleUpdatedSnackbarClose = () => {\r\n    this.setState({ \"updatedSnackbarIsOpen\": false });\r\n    this.setPersistentState({\r\n      \"version\": packageJSON.version,\r\n      \"graphvizVersion\": this.state.graphvizVersion,\r\n    })\r\n  }\r\n\r\n  setFocus = (focusedPane) => {\r\n    this.setState((state) => (state.focusedPane !== focusedPane && {\r\n      focusedPane: focusedPane,\r\n    }) || null);\r\n  }\r\n\r\n  setFocusIfFocusIs = (currentlyFocusedPane, newFocusedPane) => {\r\n    this.setState((state) => (state.focusedPane === currentlyFocusedPane && {\r\n      focusedPane: newFocusedPane,\r\n    }) || null);\r\n  }\r\n\r\n  setFocusIf = (stateProperty, focusedPaneIf, focusedPaneElse) => {\r\n    this.setState((state) => {\r\n      const focusedPane = state[stateProperty] ? focusedPaneIf: focusedPaneElse;\r\n      return (state.focusedPane !== focusedPane && {\r\n        focusedPane: focusedPane,\r\n      }) || null;\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n    const editorIsOpen = !this.state.nodeFormatDrawerIsOpen && !this.state.edgeFormatDrawerIsOpen;\r\n    const textEditorHasFocus = this.state.focusedPane === 'TextEditor';\r\n    const nodeFormatDrawerHasFocus = this.state.focusedPane === 'NodeFormatDrawer';\r\n    const edgeFormatDrawerHasFocus = this.state.focusedPane === 'EdgeFormatDrawer';\r\n    const insertPanelsHaveFocus = this.state.focusedPane === 'InsertPanels';\r\n    const graphHasFocus = this.state.focusedPane === 'Graph';\r\n    const leftPaneElevation = textEditorHasFocus || nodeFormatDrawerHasFocus || edgeFormatDrawerHasFocus? focusedElevation : defaultElevation;\r\n    const rightPaneElevation = graphHasFocus ? focusedElevation : defaultElevation;\r\n    const midPaneElevation = insertPanelsHaveFocus ? focusedElevation : defaultElevation;\r\n\r\n    var columns;\r\n    if (this.state.insertPanelsAreOpen && this.state.graphInitialized) {\r\n      columns = {\r\n        textEditor: 3,\r\n        insertPanels: 3,\r\n        graph: 6,\r\n      }\r\n    } else { /* browse */\r\n      columns = {\r\n        textEditor: 6,\r\n        insertPanels: false,\r\n        graph: 6,\r\n      }\r\n    }\r\n    const paperClass = this.state.updatedSnackbarIsOpen ? classes.paperWhenUpdatedSnackbarIsOpen : classes.paper;\r\n    return (\r\n      <div className={classes.root}>\r\n            <script src={process.env.PUBLIC_URL.replace(/\\.$/, '') + \"@hpcc-js/wasm/dist/index.min.js\"} type=\"javascript/worker\"></script>\r\n        <ButtonAppBar\r\n          hasUndo={this.state.hasUndo}\r\n          hasRedo={this.state.hasRedo}\r\n          onMenuButtonClick={this.handleMainMenuButtonClick}\r\n          onNewButtonClick={this.handleNewClick}\r\n          onUndoButtonClick={this.handleUndoButtonClick}\r\n          onRedoButtonClick={this.handleRedoButtonClick}\r\n          onInsertClick={this.handleInsertButtonClick}\r\n          onNodeFormatClick={this.handleNodeFormatButtonClick}\r\n          onEdgeFormatClick={this.handleEdgeFormatButtonClick}\r\n          onZoomInButtonClick={this.handleZoomInButtonClick}\r\n          onZoomOutButtonClick={this.handleZoomOutButtonClick}\r\n          onZoomOutMapButtonClick={this.handleZoomOutMapButtonClick}\r\n          onZoomResetButtonClick={this.handleZoomResetButtonClick}\r\n          onSettingsButtonClick={this.handleSettingsClick}\r\n          onOpenInBrowserButtonClick={this.handleOpenFromBrowserClick}\r\n          onSaveAltButtonClick={this.handleSaveAsToBrowserClick}\r\n          onHelpButtonClick={this.handleHelpButtonClick}\r\n        >\r\n        </ButtonAppBar>\r\n        {this.state.mainMenuIsOpen &&\r\n          <MainMenu\r\n            anchorEl={this.state.mainMenuAnchorEl}\r\n            onMenuClose={this.handleMainMenuClose}\r\n            onSettingsClick={this.handleSettingsClick}\r\n            onOpenFromBrowserClick={this.handleOpenFromBrowserClick}\r\n            onSaveAsToBrowserClick={this.handleSaveAsToBrowserClick}\r\n            onNewClick={this.handleNewClick}\r\n            onRenameClick={this.handleRenameClick}\r\n            onExportAsUrlClick={this.handleExportAsUrlClick}\r\n            onExportAsSvgClick={this.handleExportAsSvgClick}\r\n          />\r\n        }\r\n        {this.state.settingsDialogIsOpen &&\r\n          <SettingsDialog\r\n            engine={this.state.engine}\r\n            fitGraph={this.state.fitGraph}\r\n            transitionDuration={this.state.transitionDuration}\r\n            tweenPaths={this.state.tweenPaths}\r\n            tweenShapes={this.state.tweenShapes}\r\n            tweenPrecision={this.state.tweenPrecision}\r\n            onEngineSelectChange={this.handleEngineSelectChange}\r\n            onFitGraphSwitchChange={this.handleFitGraphSwitchChange}\r\n            onTransitionDurationChange={this.handleTransitionDurationChange}\r\n            onTweenPathsSwitchChange={this.handleTweenPathsSwitchChange}\r\n            onTweenShapesSwitchChange={this.handleTweenShapesSwitchChange}\r\n            onTweenPrecisionChange={this.handleTweenPrecisionChange}\r\n            holdOff={this.state.holdOff}\r\n            onHoldOffChange={this.handleHoldOffChange}\r\n            fontSize={this.state.fontSize}\r\n            onFontSizeChange={this.handleFontSizeChange}\r\n            tabSize={this.state.tabSize}\r\n            onTabSizeChange={this.handleTabSizeChange}\r\n            onSettingsClose={this.handleSettingsClose}\r\n          />\r\n        }\r\n        {this.state.openFromBrowserDialogIsOpen &&\r\n          <OpenFromBrowserDialog\r\n            projects={this.state.projects}\r\n            dotSrc={this.state.dotSrc}\r\n            dotSrcLastChangeTime={this.state.dotSrcLastChangeTime}\r\n            svg={this.getSvgString()}\r\n            name={this.state.name}\r\n            onOpen={this.handleOpenFromBrowser}\r\n            onClose={this.handleOpenFromBrowserClose}\r\n            onDelete={this.handleOpenFromBrowserDelete}\r\n          />\r\n        }\r\n        {this.state.saveToBrowserAsDialogIsOpen &&\r\n          <SaveAsToBrowserDialog\r\n            name={this.state.name}\r\n            rename={this.state.rename}\r\n            defaultNewName={this.state.name || this.createUntitledName(this.state.projects)}\r\n            projects={this.state.projects}\r\n            onSave={this.handleSaveAsToBrowser}\r\n            onClose={this.handleSaveAsToBrowserClose}\r\n          />\r\n        }\r\n        {this.state.exportAsUrlDialogIsOpen &&\r\n          <ExportAsUrlDialog\r\n            URL={window.location.href + '?' + qs_stringify({dot: this.state.dotSrc})}\r\n            onClose={this.handleExportAsUrlClose}\r\n          />\r\n        }\r\n        {this.state.exportAsSvgDialogIsOpen &&\r\n          <ExportAsSvgDialog\r\n            defaultFilename={(this.state.name || this.createUntitledName(this.state.projects)) + '.svg'}\r\n            getSvgString={this.getSvgString.bind(this)}\r\n            onClose={this.handleExportAsSvgClose}\r\n          />\r\n        }\r\n        {this.state.updatedSnackbarIsOpen &&\r\n          <UpdatedSnackbar\r\n            newGraphvizVersion={this.state.newGraphvizVersion}\r\n            graphvizVersion={this.state.graphvizVersion}\r\n            onUpdatedSnackbarClose={this.handleUpdatedSnackbarClose}\r\n          />\r\n        }\r\n        <Grid container\r\n          spacing={3}\r\n          style={{\r\n            margin: 0,\r\n            width: '100%',\r\n          }}\r\n        >\r\n          <Grid item xs={columns.textEditor}>\r\n            <Paper elevation={leftPaneElevation} className={paperClass}>\r\n              {this.state.nodeFormatDrawerIsOpen &&\r\n                <FormatDrawer\r\n                  type='node'\r\n                  defaultAttributes={this.state.defaultNodeAttributes}\r\n                  onClick={this.handleNodeFormatDrawerClick}\r\n                  onFormatDrawerClose={this.handleNodeFormatDrawerClose}\r\n                  onStyleChange={this.handleNodeStyleChange}\r\n                  onColorChange={this.handleNodeColorChange}\r\n                  onFillColorChange={this.handleNodeFillColorChange}\r\n                />\r\n              }\r\n              {this.state.edgeFormatDrawerIsOpen &&\r\n                <FormatDrawer\r\n                  type='edge'\r\n                  defaultAttributes={this.state.defaultEdgeAttributes}\r\n                  onClick={this.handleEdgeFormatDrawerClick}\r\n                  onFormatDrawerClose={this.handleEdgeFormatDrawerClose}\r\n                  onStyleChange={this.handleEdgeStyleChange}\r\n                  onColorChange={this.handleEdgeColorChange}\r\n                  onFillColorChange={this.handleEdgeFillColorChange}\r\n                />\r\n              }\r\n              <div style={{display: editorIsOpen ? 'block' : 'none'}}>\r\n                <TextEditor\r\n                  // allocated viewport width - 2 * padding\r\n                  width={`calc(${columns.textEditor * 100 / 12}vw - 2 * 12px)`}\r\n                  height={`calc(100vh - 64px - 2 * 12px - ${this.updatedSnackbarIsOpen ? \"64px\" : \"0px\"})`}\r\n                  dotSrc={this.state.dotSrc}\r\n                  onTextChange={this.handleTextChange}\r\n                  onFocus={this.handleTextEditorFocus}\r\n                  onBlur={this.handleTextEditorBlur}\r\n                  error={this.state.error}\r\n                  selectedGraphComponents={this.state.selectedGraphComponents}\r\n                  holdOff={this.state.holdOff}\r\n                  fontSize={this.state.fontSize}\r\n                  tabSize={this.state.tabSize}\r\n                  registerUndo={this.registerUndo}\r\n                  registerRedo={this.registerRedo}\r\n                  registerUndoReset={this.registerUndoReset}\r\n                />\r\n              </div>\r\n            </Paper>\r\n          </Grid>\r\n          {this.state.insertPanelsAreOpen && this.state.graphInitialized && (\r\n            <Grid item xs={columns.insertPanels}>\r\n              <Paper elevation={midPaneElevation} className={paperClass}>\r\n                <InsertPanels\r\n                    onClick={this.handleInsertPanelsClick}\r\n                    onNodeShapeClick={this.handleNodeShapeClick}\r\n                    onNodeShapeDragStart={this.handleNodeShapeDragStart}\r\n                    onNodeShapeDragEnd={this.handleNodeShapeDragEnd}\r\n                />\r\n              </Paper>\r\n            </Grid>\r\n          )}\r\n          <Grid item xs={columns.graph}>\r\n            <Paper elevation={rightPaneElevation} className={paperClass}>\r\n              <Graph\r\n                hasFocus={graphHasFocus}\r\n                dotSrc={this.state.dotSrc}\r\n                engine={this.state.engine}\r\n                fit={this.state.fitGraph}\r\n                transitionDuration={this.state.transitionDuration}\r\n                tweenPaths={this.state.tweenPaths}\r\n                tweenShapes={this.state.tweenShapes}\r\n                tweenPrecision={this.state.tweenPrecision}\r\n                defaultNodeAttributes={this.state.defaultNodeAttributes}\r\n                defaultEdgeAttributes={this.state.defaultEdgeAttributes}\r\n                onFocus={this.handleGraphFocus}\r\n                onTextChange={this.handleTextChange}\r\n                onHelp={this.handleKeyboardShortcutsClick}\r\n                onSelect={this.handleGraphComponentSelect}\r\n                onUndo={this.undo}\r\n                onRedo={this.redo}\r\n                registerNodeShapeClick={this.registerNodeShapeClick}\r\n                registerNodeShapeDragStart={this.registerNodeShapeDragStart}\r\n                registerNodeShapeDragEnd={this.registerNodeShapeDragEnd}\r\n                registerZoomInButtonClick={this.registerZoomInButtonClick}\r\n                registerZoomOutButtonClick={this.registerZoomOutButtonClick}\r\n                registerZoomOutMapButtonClick={this.registerZoomOutMapButtonClick}\r\n                registerZoomResetButtonClick={this.registerZoomResetButtonClick}\r\n                registerGetSvg={this.registerGetSvg}\r\n                onInitialized={this.handleGraphInitialized}\r\n                onError={this.handleError}\r\n                test={this.state.test}\r\n              />\r\n            </Paper>\r\n          </Grid>\r\n        </Grid>\r\n        {this.state.helpMenuIsOpen &&\r\n          <HelpMenu\r\n            anchorEl={this.state.helpMenuAnchorEl}\r\n            onMenuClose={this.handleHelpMenuClose}\r\n            onKeyboardShortcutsClick={this.handleKeyboardShortcutsClick}\r\n            onMouseOperationsClick={this.handleMouseOperationsClick}\r\n            onAboutClick={this.handleAboutClick}\r\n          />\r\n        }\r\n        {this.state.keyboardShortcutsDialogIsOpen &&\r\n          <KeyboardShortcutsDialog\r\n            onKeyboardShortcutsDialogClose={this.handleKeyboardShortcutsDialogClose}\r\n          />\r\n        }\r\n        {this.state.mouseOperationsDialogIsOpen &&\r\n          <MouseOperationsDialog\r\n            onMouseOperationsDialogClose={this.handleMouseOperationsDialogClose}\r\n          />\r\n        }\r\n        {this.state.aboutDialogIsOpen &&\r\n          <AboutDialog\r\n            graphvizVersion={this.state.graphvizVersion}\r\n            onAboutDialogClose={this.handleAboutDialogClose}\r\n          />\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nIndex.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withRoot(withStyles(styles)(Index));\r\n"]},"metadata":{},"sourceType":"module"}