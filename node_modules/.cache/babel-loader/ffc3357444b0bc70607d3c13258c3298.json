{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\user\\\\assisted-KAOS-editor\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:\\\\Users\\\\user\\\\assisted-KAOS-editor\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\user\\\\assisted-KAOS-editor\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\user\\\\assisted-KAOS-editor\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\user\\\\assisted-KAOS-editor\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\user\\\\assisted-KAOS-editor\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React from'react';import'typeface-roboto';import Paper from'@material-ui/core/Paper';import Grid from'@material-ui/core/Grid';import{withStyles}from'@material-ui/core/styles';import withRoot from'../withRoot';import ButtonAppBar from'../ButtonAppBar';import Graph from'../Graph';import TextEditor from'../TextEditor';import MainMenu from'../MainMenu';import HelpMenu from'../HelpMenu';import SettingsDialog from'../SettingsDialog';import OpenFromBrowserDialog from'../OpenFromBrowserDialog';import SaveAsToBrowserDialog from'../SaveAsToBrowserDialog';import InsertPanels from'../InsertPanels';import FormatDrawer from'../FormatDrawer';import DescriptionDrawer from'../DescriptionDrawer';import{schemeCategory10 as d3_schemeCategory10}from'd3-scale-chromatic';import{schemePaired as d3_schemePaired}from'd3-scale-chromatic';import KeyboardShortcutsDialog from'../KeyboardShortcutsDialog';import MouseOperationsDialog from'../MouseOperationsDialog';import AboutDialog from'../AboutDialog';import{parse as qs_parse}from'qs';import{stringify as qs_stringify}from'qs';import ExportAsUrlDialog from'../ExportAsUrlDialog';import ExportAsSvgDialog from'../ExportAsSvgDialog';import{graphvizVersion}from'../graphvizVersion';import UpdatedSnackbar from'../UpdatedSnackbar';import packageJSON from'../../package.json';var styles=function styles(theme){return{root:{textAlign:'center'},paper:{// viewport height - app bar - 2 * padding\nheight:\"calc(100vh - 64px - 2 * 12px)\"},paperWhenUpdatedSnackbarIsOpen:{\"margin-top\":\"64px\",height:\"calc(100vh - 64px - 64px - 2 * 12px)\"}};};var defaultElevation=2;var focusedElevation=8;var Index=/*#__PURE__*/function(_React$Component){_inherits(Index,_React$Component);function Index(props){var _this;_classCallCheck(this,Index);_this=_possibleConstructorReturn(this,_getPrototypeOf(Index).call(this,props));_this.setPersistentState=function(updater){_this.setState(function(state){if(typeof updater==='function'){var obj=updater(state);}else{obj=updater;}if(obj!=null){Object.keys(obj).forEach(function(key){var value=obj[key];if(typeof value==='boolean'){value=value.toString();}else if(typeof value==='object'){value=JSON.stringify(value);}localStorage.setItem(key,value);});}return obj;});};_this.handleGoalDescriptionChange=function(description){_this.setPersistentState(function(state){var newState={name:state.name||(description?_this.createUntitledName(state.projects):''),goalDescription:description};return newState;});};_this.handleTextChange=function(text,undoRedoState){_this.setPersistentState(function(state){var newState={name:state.name||(text?_this.createUntitledName(state.projects):''),dotSrc:text};if(!_this.disableDotSrcLastChangeTimeUpdate){newState.dotSrcLastChangeTime=Date.now();}return newState;});_this.disableDotSrcLastChangeTimeUpdate=false;if(_this.resetUndoAtNextTextChange){_this.resetUndoStack();undoRedoState={hasUndo:false,hasRedo:false};_this.resetUndoAtNextTextChange=false;}_this.setState(undoRedoState);};_this.handleMainMenuButtonClick=function(anchorEl){_this.setState({mainMenuIsOpen:true,mainMenuAnchorEl:anchorEl});};_this.handleNewClick=function(){_this.handleSaveAsToBrowser('');_this.resetUndoAtNextTextChange=true;};_this.handleRenameClick=function(){_this.setState({rename:true,saveToBrowserAsDialogIsOpen:true});};_this.handleExportAsUrlClick=function(){_this.setState({exportAsUrlDialogIsOpen:true});};_this.handleExportAsSvgClick=function(){_this.setState({exportAsSvgDialogIsOpen:true});};_this.handleExportAsUrlClose=function(){_this.setState({exportAsUrlDialogIsOpen:false});};_this.handleExportAsSvgClose=function(){_this.setState({exportAsSvgDialogIsOpen:false});};_this.handleUndoButtonClick=function(){_this.undo();};_this.handleRedoButtonClick=function(){_this.redo();};_this.handleMainMenuClose=function(){_this.setState({mainMenuIsOpen:false});};_this.handleHelpButtonClick=function(anchorEl){_this.setState({helpMenuIsOpen:true,helpMenuAnchorEl:anchorEl});};_this.handleHelpMenuClose=function(){_this.setState({helpMenuIsOpen:false});};_this.handleInsertButtonClick=function(){_this.setFocusIf('insertPanelsAreOpen',null,'InsertPanels');_this.setPersistentState({insertPanelsAreOpen:!_this.state.insertPanelsAreOpen});};_this.handleNodeFormatButtonClick=function(){_this.setFocusIf('nodeFormatDrawerIsOpen',null,'NodeFormatDrawer');_this.setPersistentState({nodeFormatDrawerIsOpen:!_this.state.nodeFormatDrawerIsOpen,edgeFormatDrawerIsOpen:false,goalDescriptionDrawerIsOpen:false});};_this.handleNodeFormatDrawerClose=function(){_this.setPersistentState({nodeFormatDrawerIsOpen:false});_this.setFocus(null);};_this.handleEdgeFormatButtonClick=function(){_this.setFocusIf('edgeFormatDrawerIsOpen',null,'EdgeFormatDrawer');_this.setPersistentState({nodeFormatDrawerIsOpen:false,edgeFormatDrawerIsOpen:!_this.state.edgeFormatDrawerIsOpen,goalDescriptionDrawerIsOpen:false});};_this.handleEdgeFormatDrawerClose=function(){_this.setPersistentState({edgeFormatDrawerIsOpen:false});_this.setFocus(null);};_this.handleGoalDescriptionButtonClick=function(){_this.setFocusIf('goalDescriptionDrawerIsOpen',null,'GaolDescriptionDrawer');_this.setPersistentState({nodeFormatDrawerIsOpen:false,edgeFormatDrawerIsOpen:false,goalDescriptionDrawerIsOpen:!_this.state.goalDescriptionDrawerIsOpen});};_this.handleGoalDescriptionDrawerClose=function(){_this.setPersistentState({goalDescriptionDrawerIsOpen:false});_this.setFocus(null);};_this.handleSettingsClick=function(){_this.setState({settingsDialogIsOpen:true});};_this.handleSettingsClose=function(){_this.setState({settingsDialogIsOpen:false});};_this.handleOpenFromBrowserClick=function(){_this.setState({openFromBrowserDialogIsOpen:true});};_this.handleOpenFromBrowserClose=function(){_this.setState({openFromBrowserDialogIsOpen:false});};_this.handleOpenFromBrowser=function(newCurrentName){var currentName=_this.state.name;if(newCurrentName!==currentName){_this.setPersistentState(function(state){var projects=_objectSpread({},state.projects);if(currentName){var currentProject={dotSrc:state.dotSrc,dotSrcLastChangeTime:state.dotSrcLastChangeTime,svg:_this.getSvgString()};projects[currentName]=currentProject;}var newCurrentProject=projects[newCurrentName];delete projects[newCurrentName];_this.disableDotSrcLastChangeTimeUpdate=true;return _objectSpread({name:newCurrentName},newCurrentProject,{projects:projects});});_this.resetUndoAtNextTextChange=true;}_this.handleOpenFromBrowserClose();};_this.createUntitledName=function(projects,currentName){var baseName='Untitled Graph';var newName=baseName;while(projects[newName]||newName===currentName){newName=baseName+' '+(+newName.replace(baseName,'')+1);}return newName;};_this.handleOpenFromBrowserDelete=function(nameToDelete){_this.setPersistentState(function(state){var currentName=state.name;if(nameToDelete===currentName){return{name:'',dotSrc:'',dotSrcLastChangeTime:Date.now()};}else{var projects=_objectSpread({},state.projects);delete projects[nameToDelete];return{projects:projects};}});};_this.handleSaveAsToBrowserClick=function(){_this.setState({rename:false,saveToBrowserAsDialogIsOpen:true});};_this.handleSaveAsToBrowserClose=function(){_this.setState({saveToBrowserAsDialogIsOpen:false});};_this.handleSaveAsToBrowser=function(newName,newDotSrc){var currentName=_this.state.name;if(newName!==currentName){_this.setPersistentState(function(state){var projects=_objectSpread({},state.projects);delete projects[newName];if(currentName&&!state.rename){var currentProject={dotSrc:_this.state.dotSrc,dotSrcLastChangeTime:state.dotSrcLastChangeTime,svg:_this.getSvgString()};projects[currentName]=currentProject;}return{projects:_objectSpread({},projects),name:newName,dotSrc:newDotSrc?newDotSrc:newName?state.dotSrc:'',dotSrcLastChangeTime:newDotSrc?Date.now():state.dotSrcLastChangeTime};});}_this.handleSaveAsToBrowserClose();};_this.handleEngineSelectChange=function(engine){_this.setPersistentState({engine:engine});};_this.handleFitGraphSwitchChange=function(fitGraph){_this.setPersistentState({fitGraph:fitGraph});};_this.handleTransitionDurationChange=function(transitionDuration){_this.setPersistentState({transitionDuration:transitionDuration});};_this.handleTweenPathsSwitchChange=function(tweenPaths){_this.setPersistentState({tweenPaths:tweenPaths});};_this.handleTweenShapesSwitchChange=function(tweenShapes){_this.setPersistentState({tweenShapes:tweenShapes});};_this.handleTweenPrecisionChange=function(tweenPrecision){_this.setPersistentState({tweenPrecision:tweenPrecision});};_this.handleHoldOffChange=function(holdOff){_this.setPersistentState({holdOff:holdOff});};_this.handleFontSizeChange=function(fontSize){_this.setPersistentState({fontSize:fontSize});};_this.handleTabSizeChange=function(tabSize){_this.setPersistentState({tabSize:tabSize});};_this.handleNodeStyleChange=function(style){_this.setPersistentState(function(state){return{defaultNodeAttributes:_objectSpread({},state.defaultNodeAttributes,{style:style})};});};_this.handleNodeColorChange=function(color){_this.setPersistentState(function(state){return{defaultNodeAttributes:_objectSpread({},state.defaultNodeAttributes,{color:color})};});};_this.handleNodeFillColorChange=function(color){_this.setPersistentState(function(state){return{defaultNodeAttributes:_objectSpread({},state.defaultNodeAttributes,{fillcolor:color})};});};_this.handleEdgeStyleChange=function(style){_this.setPersistentState(function(state){return{defaultEdgeAttributes:_objectSpread({},state.defaultEdgeAttributes,{style:style})};});};_this.handleEdgeColorChange=function(color){_this.setPersistentState(function(state){return{defaultEdgeAttributes:_objectSpread({},state.defaultEdgeAttributes,{color:color})};});};_this.handleEdgeFillColorChange=function(color){_this.setPersistentState(function(state){return{defaultEdgeAttributes:_objectSpread({},state.defaultEdgeAttributes,{fillcolor:color})};});};_this.handleKeyboardShortcutsClick=function(){_this.setState({keyboardShortcutsDialogIsOpen:true});};_this.handleKeyboardShortcutsDialogClose=function(){_this.setState({keyboardShortcutsDialogIsOpen:false});};_this.handleMouseOperationsClick=function(){_this.setState({mouseOperationsDialogIsOpen:true});};_this.handleMouseOperationsDialogClose=function(){_this.setState({mouseOperationsDialogIsOpen:false});};_this.handleAboutClick=function(){_this.setState({aboutDialogIsOpen:true});};_this.handleAboutDialogClose=function(){_this.setState({aboutDialogIsOpen:false});};_this.registerNodeShapeClick=function(handleNodeShapeClick){_this.handleNodeShapeClick=handleNodeShapeClick;};_this.registerNodeShapeDragStart=function(handleNodeShapeDragStart){_this.handleNodeShapeDragStart=handleNodeShapeDragStart;};_this.registerNodeShapeDragEnd=function(handleNodeShapeDragEnd){_this.handleNodeShapeDragEnd=handleNodeShapeDragEnd;};_this.handleZoomInButtonClick=function(){};_this.handleZoomOutButtonClick=function(){};_this.handleZoomOutMapButtonClick=function(){};_this.handleZoomResetButtonClick=function(){};_this.registerZoomInButtonClick=function(handleZoomInButtonClick){_this.handleZoomInButtonClick=handleZoomInButtonClick;};_this.registerZoomOutButtonClick=function(handleZoomOutButtonClick){_this.handleZoomOutButtonClick=handleZoomOutButtonClick;};_this.registerZoomOutMapButtonClick=function(handleZoomOutMapButtonClick){_this.handleZoomOutMapButtonClick=handleZoomOutMapButtonClick;};_this.registerZoomResetButtonClick=function(handleZoomResetButtonClick){_this.handleZoomResetButtonClick=handleZoomResetButtonClick;};_this.registerGetSvg=function(getSvg){_this.getSvg=getSvg;};_this.handleGraphComponentSelect=function(components){_this.setState({selectedGraphComponents:components});};_this.handleGraphInitialized=function(){_this.setState({graphInitialized:true});_this.setPersistentState({svg:_this.getSvgString()});};_this.handleError=function(error){if(error){error.numLines=_this.state.dotSrc.split('\\n').length;}if(JSON.stringify(error)!==JSON.stringify(_this.state.error)){_this.setState({error:error});}};_this.registerUndo=function(undo){_this.undo=undo;};_this.registerRedo=function(redo){_this.redo=redo;};_this.registerUndoReset=function(resetUndoStack){_this.resetUndoStack=resetUndoStack;};_this.handleTextEditorFocus=function(){_this.setFocus('TextEditor');};_this.handleTextEditorBlur=function(){// Needed when the user clicks outside of a pane,\n// e.g. the app bar or the background\n_this.setFocusIfFocusIs('TextEditor',null);};_this.handleGraphFocus=function(){_this.setFocus('Graph');};_this.handleInsertPanelsClick=function(){_this.setFocus('InsertPanels');};_this.handleNodeFormatDrawerClick=function(){_this.setFocus('NodeFormatDrawer');_this.setFocusIf('nodeFormatDrawerIsOpen','NodeFormatDrawer',null);};_this.handleEdgeFormatDrawerClick=function(){_this.setFocus('EdgeFormatDrawer');_this.setFocusIf('edgeFormatDrawerIsOpen','EdgeFormatDrawer',null);};_this.handleGoalDescriptionDrawerClick=function(){_this.setFocus('GoalDescriptionDrawer');_this.setFocusIf('GoalDescriptionDrawerIsOpen','GoalDescriptionDrawer',null);};_this.handleUpdatedSnackbarClose=function(){_this.setState({\"updatedSnackbarIsOpen\":false});_this.setPersistentState({\"version\":packageJSON.version,\"graphvizVersion\":_this.state.graphvizVersion});};_this.setFocus=function(focusedPane){_this.setState(function(state){return state.focusedPane!==focusedPane&&{focusedPane:focusedPane}||null;});};_this.setFocusIfFocusIs=function(currentlyFocusedPane,newFocusedPane){_this.setState(function(state){return state.focusedPane===currentlyFocusedPane&&{focusedPane:newFocusedPane}||null;});};_this.setFocusIf=function(stateProperty,focusedPaneIf,focusedPaneElse){_this.setState(function(state){var focusedPane=state[stateProperty]?focusedPaneIf:focusedPaneElse;return state.focusedPane!==focusedPane&&{focusedPane:focusedPane}||null;});};var dotSrc=localStorage.getItem('dotSrc');if(dotSrc==null){dotSrc=\"strict digraph {\\n      \\ta [shape=\\\"ellipse\\\" style=\\\"filled\\\" fillcolor=\\\"\"+d3_schemeCategory10[0]+\"\\\"]\\n   \\tb [shape=\\\"polygon\\\" style=\\\"filled\\\" fillcolor=\\\"\"+d3_schemeCategory10[1]+\"\\\"]\\n    \\ta -> b [fillcolor=\\\"\"+d3_schemePaired[0]+\"\\\" color=\\\"\"+d3_schemePaired[1]+\"\\\"]\\n\\t  }\";}var goalDescription=localStorage.getItem('goalDescription');if(goalDescription==null){goalDescription='';}_this.state={projects:JSON.parse(localStorage.getItem('projects'))||{},initialized:false,name:localStorage.getItem('name')||'',dotSrc:dotSrc,dotSrcLastChangeTime:+localStorage.getItem('dotSrcLastChangeTime')||Date.now(),goalDescription:goalDescription,svg:localStorage.getItem('svg')||'',hasUndo:false,hasRedo:false,mainMenuIsOpen:false,helpMenuIsOpen:false,settingsDialogIsOpen:false,openFromBrowserDialogIsOpen:false,saveToBrowserAsDialogIsOpen:false,replaceName:'',exportAsUrlDialogIsOpen:false,exportAsSvgDialogIsOpen:false,insertPanelsAreOpen:(localStorage.getItem('insertPanelsAreOpen')||'false')==='true',nodeFormatDrawerIsOpen:(localStorage.getItem('nodeFormatDrawerIsOpen')||'false')==='true',edgeFormatDrawerIsOpen:(localStorage.getItem('edgeFormatDrawerIsOpen')||'false')==='true',goalDescriptionDrawerIsOpen:(localStorage.getItem('goalDescriptionDrawerIsOpen')||'false')==='true',keyboardShortcutsDialogIsOpen:false,mouseOperationsDialogIsOpen:false,aboutDialogIsOpen:false,fitGraph:localStorage.getItem('fitGraph')==='true',transitionDuration:localStorage.getItem('transitionDuration')||1,tweenPaths:localStorage.getItem('tweenPaths')!=='false',tweenShapes:localStorage.getItem('tweenShapes')!=='false',tweenPrecision:localStorage.getItem('tweenPrecision')||'1%',engine:localStorage.getItem('engine')||'dot',defaultNodeAttributes:JSON.parse(localStorage.getItem('defaultNodeAttributes'))||{},defaultEdgeAttributes:JSON.parse(localStorage.getItem('defaultEdgeAttributes'))||{},error:null,holdOff:localStorage.getItem('holdOff')||0.2,fontSize:localStorage.getItem('fontSize')||12,tabSize:+localStorage.getItem('tabSize')||4,selectedGraphComponents:[],test:JSON.parse(localStorage.getItem('test'))||{},graphvizVersion:graphvizVersion,newGraphvizVersion:graphvizVersion!==localStorage.getItem('graphvizVersion'),updatedSnackbarIsOpen:packageJSON.version!==localStorage.getItem('version')};return _this;}_createClass(Index,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var urlParams=qs_parse(window.location.search.slice(1));if(urlParams.dot){var currentDotSrc=this.state.dotSrc;var newDotSrc=urlParams.dot;if(newDotSrc!==currentDotSrc){var names=Object.keys(this.state.projects).filter(function(name){var project=_this2.state.projects[name];return newDotSrc===project.dotSrc;});if(names.length>0){this.handleOpenFromBrowser(names[0]);}else{var newName=this.createUntitledName(this.state.projects,this.state.name);this.handleSaveAsToBrowser(newName,newDotSrc);}}window.history.replaceState(null,null,window.location.pathname);}document.onblur=function(){// Needed when the user clicks outside the document,\n// e.g. the browser address bar\n_this2.setFocus(null);};}},{key:\"getSvgString\",value:function getSvgString(){var svg=this.getSvg();var serializer=new XMLSerializer();return svg?serializer.serializeToString(svg):this.state.svg;}},{key:\"render\",value:function render(){var classes=this.props.classes;var editorIsOpen=!this.state.nodeFormatDrawerIsOpen&&!this.state.edgeFormatDrawerIsOpen&&!this.state.goalDescriptionDrawerIsOpen;var textEditorHasFocus=this.state.focusedPane==='TextEditor';var nodeFormatDrawerHasFocus=this.state.focusedPane==='NodeFormatDrawer';var edgeFormatDrawerHasFocus=this.state.focusedPane==='EdgeFormatDrawer';var goalDescriptionDrawerHasFocus=this.state.focusedPane==='GoalDescriptionDrawer';var insertPanelsHaveFocus=this.state.focusedPane==='InsertPanels';var graphHasFocus=this.state.focusedPane==='Graph';var leftPaneElevation=textEditorHasFocus||nodeFormatDrawerHasFocus||edgeFormatDrawerHasFocus||goalDescriptionDrawerHasFocus?focusedElevation:defaultElevation;var rightPaneElevation=graphHasFocus?focusedElevation:defaultElevation;var midPaneElevation=insertPanelsHaveFocus?focusedElevation:defaultElevation;var columns;if(this.state.insertPanelsAreOpen&&this.state.graphInitialized){columns={textEditor:3,insertPanels:3,graph:6};}else{/* browse */columns={textEditor:6,insertPanels:false,graph:6};}var paperClass=this.state.updatedSnackbarIsOpen?classes.paperWhenUpdatedSnackbarIsOpen:classes.paper;return React.createElement(\"div\",{className:classes.root},React.createElement(\"script\",{src:process.env.PUBLIC_URL.replace(/\\.$/,'')+\"@hpcc-js/wasm/dist/index.min.js\",type:\"javascript/worker\"}),React.createElement(ButtonAppBar,{hasUndo:this.state.hasUndo,hasRedo:this.state.hasRedo,onMenuButtonClick:this.handleMainMenuButtonClick,onNewButtonClick:this.handleNewClick,onUndoButtonClick:this.handleUndoButtonClick,onRedoButtonClick:this.handleRedoButtonClick,onInsertClick:this.handleInsertButtonClick,onNodeFormatClick:this.handleNodeFormatButtonClick,onEdgeFormatClick:this.handleEdgeFormatButtonClick,onGoalDescriptionClick:this.handleGoalDescriptionButtonClick,onZoomInButtonClick:this.handleZoomInButtonClick,onZoomOutButtonClick:this.handleZoomOutButtonClick,onZoomOutMapButtonClick:this.handleZoomOutMapButtonClick,onZoomResetButtonClick:this.handleZoomResetButtonClick,onSettingsButtonClick:this.handleSettingsClick,onOpenInBrowserButtonClick:this.handleOpenFromBrowserClick,onSaveAltButtonClick:this.handleSaveAsToBrowserClick,onHelpButtonClick:this.handleHelpButtonClick}),this.state.mainMenuIsOpen&&React.createElement(MainMenu,{anchorEl:this.state.mainMenuAnchorEl,onMenuClose:this.handleMainMenuClose,onSettingsClick:this.handleSettingsClick,onOpenFromBrowserClick:this.handleOpenFromBrowserClick,onSaveAsToBrowserClick:this.handleSaveAsToBrowserClick,onNewClick:this.handleNewClick,onRenameClick:this.handleRenameClick,onExportAsUrlClick:this.handleExportAsUrlClick,onExportAsSvgClick:this.handleExportAsSvgClick}),this.state.settingsDialogIsOpen&&React.createElement(SettingsDialog,{engine:this.state.engine,fitGraph:this.state.fitGraph,transitionDuration:this.state.transitionDuration,tweenPaths:this.state.tweenPaths,tweenShapes:this.state.tweenShapes,tweenPrecision:this.state.tweenPrecision,onEngineSelectChange:this.handleEngineSelectChange,onFitGraphSwitchChange:this.handleFitGraphSwitchChange,onTransitionDurationChange:this.handleTransitionDurationChange,onTweenPathsSwitchChange:this.handleTweenPathsSwitchChange,onTweenShapesSwitchChange:this.handleTweenShapesSwitchChange,onTweenPrecisionChange:this.handleTweenPrecisionChange,holdOff:this.state.holdOff,onHoldOffChange:this.handleHoldOffChange,fontSize:this.state.fontSize,onFontSizeChange:this.handleFontSizeChange,tabSize:this.state.tabSize,onTabSizeChange:this.handleTabSizeChange,onSettingsClose:this.handleSettingsClose}),this.state.openFromBrowserDialogIsOpen&&React.createElement(OpenFromBrowserDialog,{projects:this.state.projects,dotSrc:this.state.dotSrc,dotSrcLastChangeTime:this.state.dotSrcLastChangeTime,svg:this.getSvgString(),name:this.state.name,onOpen:this.handleOpenFromBrowser,onClose:this.handleOpenFromBrowserClose,onDelete:this.handleOpenFromBrowserDelete}),this.state.saveToBrowserAsDialogIsOpen&&React.createElement(SaveAsToBrowserDialog,{name:this.state.name,rename:this.state.rename,defaultNewName:this.state.name||this.createUntitledName(this.state.projects),projects:this.state.projects,onSave:this.handleSaveAsToBrowser,onClose:this.handleSaveAsToBrowserClose}),this.state.exportAsUrlDialogIsOpen&&React.createElement(ExportAsUrlDialog,{URL:window.location.href+'?'+qs_stringify({dot:this.state.dotSrc}),onClose:this.handleExportAsUrlClose}),this.state.exportAsSvgDialogIsOpen&&React.createElement(ExportAsSvgDialog,{defaultFilename:(this.state.name||this.createUntitledName(this.state.projects))+'.svg',getSvgString:this.getSvgString.bind(this),onClose:this.handleExportAsSvgClose}),this.state.updatedSnackbarIsOpen&&React.createElement(UpdatedSnackbar,{newGraphvizVersion:this.state.newGraphvizVersion,graphvizVersion:this.state.graphvizVersion,onUpdatedSnackbarClose:this.handleUpdatedSnackbarClose}),React.createElement(Grid,{container:true,spacing:3,style:{margin:0,width:'100%'}},React.createElement(Grid,{item:true,xs:columns.textEditor},React.createElement(Paper,{elevation:leftPaneElevation,className:paperClass},this.state.nodeFormatDrawerIsOpen&&React.createElement(FormatDrawer,{type:\"node\",defaultAttributes:this.state.defaultNodeAttributes,onClick:this.handleNodeFormatDrawerClick,onFormatDrawerClose:this.handleNodeFormatDrawerClose,onStyleChange:this.handleNodeStyleChange,onColorChange:this.handleNodeColorChange,onFillColorChange:this.handleNodeFillColorChange}),this.state.edgeFormatDrawerIsOpen&&React.createElement(FormatDrawer,{type:\"edge\",defaultAttributes:this.state.defaultEdgeAttributes,onClick:this.handleEdgeFormatDrawerClick,onFormatDrawerClose:this.handleEdgeFormatDrawerClose,onStyleChange:this.handleEdgeStyleChange,onColorChange:this.handleEdgeColorChange,onFillColorChange:this.handleEdgeFillColorChange}),this.state.goalDescriptionDrawerIsOpen&&React.createElement(DescriptionDrawer,{goalDescription:this.state.goalDescription,onClick:this.handleGoalDescriptionDrawerClick,onDescriptionDrawerClose:this.handleGoalDescriptionDrawerClose,onTextChange:this.handleGoalDescriptionChange}),React.createElement(\"div\",{style:{display:editorIsOpen?'block':'none'}},React.createElement(TextEditor// allocated viewport width - 2 * padding\n,{width:\"calc(\".concat(columns.textEditor*100/12,\"vw - 2 * 12px)\"),height:\"calc(100vh - 64px - 2 * 12px - \".concat(this.updatedSnackbarIsOpen?\"64px\":\"0px\",\")\"),dotSrc:this.state.dotSrc,onTextChange:this.handleTextChange,onFocus:this.handleTextEditorFocus,onBlur:this.handleTextEditorBlur,error:this.state.error,selectedGraphComponents:this.state.selectedGraphComponents,holdOff:this.state.holdOff,fontSize:this.state.fontSize,tabSize:this.state.tabSize,registerUndo:this.registerUndo,registerRedo:this.registerRedo,registerUndoReset:this.registerUndoReset})))),this.state.insertPanelsAreOpen&&this.state.graphInitialized&&React.createElement(Grid,{item:true,xs:columns.insertPanels},React.createElement(Paper,{elevation:midPaneElevation,className:paperClass},React.createElement(InsertPanels,{onClick:this.handleInsertPanelsClick,onNodeShapeClick:this.handleNodeShapeClick,onNodeShapeDragStart:this.handleNodeShapeDragStart,onNodeShapeDragEnd:this.handleNodeShapeDragEnd}))),React.createElement(Grid,{item:true,xs:columns.graph},React.createElement(Paper,{elevation:rightPaneElevation,className:paperClass},React.createElement(Graph,{hasFocus:graphHasFocus,dotSrc:this.state.dotSrc,engine:this.state.engine,fit:this.state.fitGraph,transitionDuration:this.state.transitionDuration,tweenPaths:this.state.tweenPaths,tweenShapes:this.state.tweenShapes,tweenPrecision:this.state.tweenPrecision,defaultNodeAttributes:this.state.defaultNodeAttributes,defaultEdgeAttributes:this.state.defaultEdgeAttributes,onFocus:this.handleGraphFocus,onTextChange:this.handleTextChange,onHelp:this.handleKeyboardShortcutsClick,onSelect:this.handleGraphComponentSelect,onUndo:this.undo,onRedo:this.redo,registerNodeShapeClick:this.registerNodeShapeClick,registerNodeShapeDragStart:this.registerNodeShapeDragStart,registerNodeShapeDragEnd:this.registerNodeShapeDragEnd,registerZoomInButtonClick:this.registerZoomInButtonClick,registerZoomOutButtonClick:this.registerZoomOutButtonClick,registerZoomOutMapButtonClick:this.registerZoomOutMapButtonClick,registerZoomResetButtonClick:this.registerZoomResetButtonClick,registerGetSvg:this.registerGetSvg,onInitialized:this.handleGraphInitialized,onError:this.handleError,test:this.state.test})))),this.state.helpMenuIsOpen&&React.createElement(HelpMenu,{anchorEl:this.state.helpMenuAnchorEl,onMenuClose:this.handleHelpMenuClose,onKeyboardShortcutsClick:this.handleKeyboardShortcutsClick,onMouseOperationsClick:this.handleMouseOperationsClick,onAboutClick:this.handleAboutClick}),this.state.keyboardShortcutsDialogIsOpen&&React.createElement(KeyboardShortcutsDialog,{onKeyboardShortcutsDialogClose:this.handleKeyboardShortcutsDialogClose}),this.state.mouseOperationsDialogIsOpen&&React.createElement(MouseOperationsDialog,{onMouseOperationsDialogClose:this.handleMouseOperationsDialogClose}),this.state.aboutDialogIsOpen&&React.createElement(AboutDialog,{graphvizVersion:this.state.graphvizVersion,onAboutDialogClose:this.handleAboutDialogClose}));}}]);return Index;}(React.Component);export default withRoot(withStyles(styles)(Index));","map":{"version":3,"sources":["C:/Users/user/assisted-KAOS-editor/src/pages/index.js"],"names":["React","Paper","Grid","withStyles","withRoot","ButtonAppBar","Graph","TextEditor","MainMenu","HelpMenu","SettingsDialog","OpenFromBrowserDialog","SaveAsToBrowserDialog","InsertPanels","FormatDrawer","DescriptionDrawer","schemeCategory10","d3_schemeCategory10","schemePaired","d3_schemePaired","KeyboardShortcutsDialog","MouseOperationsDialog","AboutDialog","parse","qs_parse","stringify","qs_stringify","ExportAsUrlDialog","ExportAsSvgDialog","graphvizVersion","UpdatedSnackbar","packageJSON","styles","theme","root","textAlign","paper","height","paperWhenUpdatedSnackbarIsOpen","defaultElevation","focusedElevation","Index","props","setPersistentState","updater","setState","state","obj","Object","keys","forEach","key","value","toString","JSON","localStorage","setItem","handleGoalDescriptionChange","description","newState","name","createUntitledName","projects","goalDescription","handleTextChange","text","undoRedoState","dotSrc","disableDotSrcLastChangeTimeUpdate","dotSrcLastChangeTime","Date","now","resetUndoAtNextTextChange","resetUndoStack","hasUndo","hasRedo","handleMainMenuButtonClick","anchorEl","mainMenuIsOpen","mainMenuAnchorEl","handleNewClick","handleSaveAsToBrowser","handleRenameClick","rename","saveToBrowserAsDialogIsOpen","handleExportAsUrlClick","exportAsUrlDialogIsOpen","handleExportAsSvgClick","exportAsSvgDialogIsOpen","handleExportAsUrlClose","handleExportAsSvgClose","handleUndoButtonClick","undo","handleRedoButtonClick","redo","handleMainMenuClose","handleHelpButtonClick","helpMenuIsOpen","helpMenuAnchorEl","handleHelpMenuClose","handleInsertButtonClick","setFocusIf","insertPanelsAreOpen","handleNodeFormatButtonClick","nodeFormatDrawerIsOpen","edgeFormatDrawerIsOpen","goalDescriptionDrawerIsOpen","handleNodeFormatDrawerClose","setFocus","handleEdgeFormatButtonClick","handleEdgeFormatDrawerClose","handleGoalDescriptionButtonClick","handleGoalDescriptionDrawerClose","handleSettingsClick","settingsDialogIsOpen","handleSettingsClose","handleOpenFromBrowserClick","openFromBrowserDialogIsOpen","handleOpenFromBrowserClose","handleOpenFromBrowser","newCurrentName","currentName","currentProject","svg","getSvgString","newCurrentProject","baseName","newName","replace","handleOpenFromBrowserDelete","nameToDelete","handleSaveAsToBrowserClick","handleSaveAsToBrowserClose","newDotSrc","handleEngineSelectChange","engine","handleFitGraphSwitchChange","fitGraph","handleTransitionDurationChange","transitionDuration","handleTweenPathsSwitchChange","tweenPaths","handleTweenShapesSwitchChange","tweenShapes","handleTweenPrecisionChange","tweenPrecision","handleHoldOffChange","holdOff","handleFontSizeChange","fontSize","handleTabSizeChange","tabSize","handleNodeStyleChange","style","defaultNodeAttributes","handleNodeColorChange","color","handleNodeFillColorChange","fillcolor","handleEdgeStyleChange","defaultEdgeAttributes","handleEdgeColorChange","handleEdgeFillColorChange","handleKeyboardShortcutsClick","keyboardShortcutsDialogIsOpen","handleKeyboardShortcutsDialogClose","handleMouseOperationsClick","mouseOperationsDialogIsOpen","handleMouseOperationsDialogClose","handleAboutClick","aboutDialogIsOpen","handleAboutDialogClose","registerNodeShapeClick","handleNodeShapeClick","registerNodeShapeDragStart","handleNodeShapeDragStart","registerNodeShapeDragEnd","handleNodeShapeDragEnd","handleZoomInButtonClick","handleZoomOutButtonClick","handleZoomOutMapButtonClick","handleZoomResetButtonClick","registerZoomInButtonClick","registerZoomOutButtonClick","registerZoomOutMapButtonClick","registerZoomResetButtonClick","registerGetSvg","getSvg","handleGraphComponentSelect","components","selectedGraphComponents","handleGraphInitialized","graphInitialized","handleError","error","numLines","split","length","registerUndo","registerRedo","registerUndoReset","handleTextEditorFocus","handleTextEditorBlur","setFocusIfFocusIs","handleGraphFocus","handleInsertPanelsClick","handleNodeFormatDrawerClick","handleEdgeFormatDrawerClick","handleGoalDescriptionDrawerClick","handleUpdatedSnackbarClose","version","focusedPane","currentlyFocusedPane","newFocusedPane","stateProperty","focusedPaneIf","focusedPaneElse","getItem","initialized","replaceName","test","newGraphvizVersion","updatedSnackbarIsOpen","urlParams","window","location","search","slice","dot","currentDotSrc","names","filter","project","history","replaceState","pathname","document","onblur","serializer","XMLSerializer","serializeToString","classes","editorIsOpen","textEditorHasFocus","nodeFormatDrawerHasFocus","edgeFormatDrawerHasFocus","goalDescriptionDrawerHasFocus","insertPanelsHaveFocus","graphHasFocus","leftPaneElevation","rightPaneElevation","midPaneElevation","columns","textEditor","insertPanels","graph","paperClass","process","env","PUBLIC_URL","href","bind","margin","width","display","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport 'typeface-roboto';\r\nimport PropTypes from 'prop-types';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport withRoot from '../withRoot';\r\nimport ButtonAppBar from '../ButtonAppBar';\r\nimport Graph from '../Graph';\r\nimport TextEditor from '../TextEditor';\r\nimport MainMenu from '../MainMenu';\r\nimport HelpMenu from '../HelpMenu';\r\nimport SettingsDialog from '../SettingsDialog';\r\nimport OpenFromBrowserDialog from '../OpenFromBrowserDialog';\r\nimport SaveAsToBrowserDialog from '../SaveAsToBrowserDialog';\r\nimport InsertPanels from '../InsertPanels';\r\nimport FormatDrawer from '../FormatDrawer';\r\nimport DescriptionDrawer from '../DescriptionDrawer';\r\nimport { schemeCategory10 as d3_schemeCategory10} from 'd3-scale-chromatic';\r\nimport { schemePaired as d3_schemePaired} from 'd3-scale-chromatic';\r\nimport KeyboardShortcutsDialog from '../KeyboardShortcutsDialog';\r\nimport MouseOperationsDialog from '../MouseOperationsDialog';\r\nimport AboutDialog from '../AboutDialog';\r\nimport { parse as qs_parse } from 'qs';\r\nimport { stringify as qs_stringify } from 'qs';\r\nimport ExportAsUrlDialog from '../ExportAsUrlDialog';\r\nimport ExportAsSvgDialog from '../ExportAsSvgDialog'\r\nimport { graphvizVersion } from '../graphvizVersion';\r\nimport UpdatedSnackbar from '../UpdatedSnackbar';\r\nimport packageJSON from '../../package.json';\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    textAlign: 'center',\r\n  },\r\n  paper: {\r\n    // viewport height - app bar - 2 * padding\r\n    height: \"calc(100vh - 64px - 2 * 12px)\",\r\n  },\r\n  paperWhenUpdatedSnackbarIsOpen: {\r\n    \"margin-top\": \"64px\",\r\n    height: \"calc(100vh - 64px - 64px - 2 * 12px)\",\r\n  }\r\n});\r\n\r\nconst defaultElevation = 2;\r\nconst focusedElevation = 8;\r\n\r\nclass Index extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    let dotSrc = localStorage.getItem('dotSrc');\r\n    if (dotSrc == null) {\r\n      dotSrc = `strict digraph {\r\n      \ta [shape=\"ellipse\" style=\"filled\" fillcolor=\"` + d3_schemeCategory10[0] + `\"]\r\n   \tb [shape=\"polygon\" style=\"filled\" fillcolor=\"` + d3_schemeCategory10[1] + `\"]\r\n    \ta -> b [fillcolor=\"` + d3_schemePaired[0] + `\" color=\"` + d3_schemePaired[1] + `\"]\r\n\t  }`;\r\n    }\r\n\r\n    let goalDescription = localStorage.getItem('goalDescription');\r\n    if (goalDescription == null) {\r\n      goalDescription = '';\r\n    }\r\n\r\n    this.state = {\r\n      projects: JSON.parse(localStorage.getItem('projects')) || {},\r\n      initialized: false,\r\n      name: localStorage.getItem('name') || '',\r\n      dotSrc: dotSrc,\r\n      dotSrcLastChangeTime: +localStorage.getItem('dotSrcLastChangeTime') || Date.now(),\r\n      goalDescription: goalDescription,\r\n      svg: localStorage.getItem('svg') || '',\r\n      hasUndo: false,\r\n      hasRedo: false,\r\n      mainMenuIsOpen: false,\r\n      helpMenuIsOpen: false,\r\n      settingsDialogIsOpen: false,\r\n      openFromBrowserDialogIsOpen: false,\r\n      saveToBrowserAsDialogIsOpen: false,\r\n      replaceName: '',\r\n      exportAsUrlDialogIsOpen: false,\r\n      exportAsSvgDialogIsOpen: false,\r\n      insertPanelsAreOpen: (localStorage.getItem('insertPanelsAreOpen') || 'false') === 'true',\r\n      nodeFormatDrawerIsOpen: (localStorage.getItem('nodeFormatDrawerIsOpen') || 'false') === 'true',\r\n      edgeFormatDrawerIsOpen: (localStorage.getItem('edgeFormatDrawerIsOpen') || 'false') === 'true',\r\n      goalDescriptionDrawerIsOpen: (localStorage.getItem('goalDescriptionDrawerIsOpen') || 'false') === 'true',\r\n      keyboardShortcutsDialogIsOpen: false,\r\n      mouseOperationsDialogIsOpen: false,\r\n      aboutDialogIsOpen: false,\r\n      fitGraph : localStorage.getItem('fitGraph') === 'true',\r\n      transitionDuration: localStorage.getItem('transitionDuration') || 1,\r\n      tweenPaths : localStorage.getItem('tweenPaths') !== 'false',\r\n      tweenShapes : localStorage.getItem('tweenShapes') !== 'false',\r\n      tweenPrecision : localStorage.getItem('tweenPrecision') || '1%',\r\n      engine : localStorage.getItem('engine') || 'dot',\r\n      defaultNodeAttributes: JSON.parse(localStorage.getItem('defaultNodeAttributes')) || {},\r\n      defaultEdgeAttributes: JSON.parse(localStorage.getItem('defaultEdgeAttributes')) || {},\r\n      error: null,\r\n      holdOff: localStorage.getItem('holdOff') || 0.2,\r\n      fontSize: localStorage.getItem('fontSize') || 12,\r\n      tabSize: +localStorage.getItem('tabSize') || 4,\r\n      selectedGraphComponents: [],\r\n      test: JSON.parse(localStorage.getItem('test')) || {},\r\n      graphvizVersion: graphvizVersion,\r\n      newGraphvizVersion: graphvizVersion !== localStorage.getItem('graphvizVersion'),\r\n      updatedSnackbarIsOpen: packageJSON.version !== localStorage.getItem('version'),\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    const urlParams = qs_parse(window.location.search.slice(1));\r\n    if (urlParams.dot) {\r\n      const currentDotSrc = this.state.dotSrc;\r\n      const newDotSrc = urlParams.dot;\r\n      if (newDotSrc !== currentDotSrc) {\r\n        const names = Object.keys(this.state.projects).filter((name) => {\r\n          const project = this.state.projects[name];\r\n          return newDotSrc === project.dotSrc;\r\n        });\r\n        if (names.length > 0) {\r\n          this.handleOpenFromBrowser(names[0]);\r\n        } else {\r\n          const newName = this.createUntitledName(this.state.projects, this.state.name);\r\n          this.handleSaveAsToBrowser(newName, newDotSrc);\r\n        }\r\n      }\r\n      window.history.replaceState(null, null, window.location.pathname);\r\n    }\r\n    document.onblur = () => {\r\n      // Needed when the user clicks outside the document,\r\n      // e.g. the browser address bar\r\n      this.setFocus(null);\r\n    }\r\n  }\r\n\r\n  setPersistentState = (updater) => {\r\n    this.setState((state) => {\r\n      if (typeof updater === 'function') {\r\n        var obj = updater(state);\r\n      } else {\r\n        obj = updater;\r\n      }\r\n      if (obj != null) {\r\n        Object.keys(obj).forEach((key) => {\r\n          let value = obj[key];\r\n          if (typeof value === 'boolean') {\r\n            value = value.toString();\r\n          }\r\n          else if (typeof value === 'object') {\r\n            value = JSON.stringify(value);\r\n          }\r\n          localStorage.setItem(key, value);\r\n        });\r\n      }\r\n      return obj;\r\n    });\r\n  }\r\n\r\n  handleGoalDescriptionChange = (description) => {\r\n     this.setPersistentState((state) => {\r\n     const newState = {\r\n        name: state.name || (description ? this.createUntitledName(state.projects) : ''),\r\n        goalDescription: description,\r\n      };\r\n      return newState;\r\n    });\r\n  }\r\n\r\n  handleTextChange = (text, undoRedoState) => {\r\n    this.setPersistentState((state) => {\r\n      const newState = {\r\n        name: state.name || (text ? this.createUntitledName(state.projects) : ''),\r\n        dotSrc: text,\r\n      };\r\n      if (!this.disableDotSrcLastChangeTimeUpdate) {\r\n        newState.dotSrcLastChangeTime = Date.now();\r\n      }\r\n      return newState;\r\n    });\r\n    this.disableDotSrcLastChangeTimeUpdate = false;\r\n    if (this.resetUndoAtNextTextChange) {\r\n      this.resetUndoStack();\r\n      undoRedoState = {\r\n        hasUndo: false,\r\n        hasRedo: false,\r\n      };\r\n      this.resetUndoAtNextTextChange = false;\r\n    }\r\n    this.setState(undoRedoState);\r\n  }\r\n\r\n  handleMainMenuButtonClick = (anchorEl) => {\r\n    this.setState({\r\n      mainMenuIsOpen: true,\r\n      mainMenuAnchorEl: anchorEl,\r\n    });\r\n  }\r\n\r\n  handleNewClick = () => {\r\n    this.handleSaveAsToBrowser('');\r\n    this.resetUndoAtNextTextChange = true;\r\n  }\r\n\r\n  handleRenameClick = () => {\r\n    this.setState({\r\n      rename: true,\r\n      saveToBrowserAsDialogIsOpen: true,\r\n    });\r\n  }\r\n\r\n  handleExportAsUrlClick = () => {\r\n    this.setState({\r\n      exportAsUrlDialogIsOpen: true,\r\n    });\r\n  }\r\n\r\n  handleExportAsSvgClick = () => {\r\n    this.setState({\r\n      exportAsSvgDialogIsOpen: true,\r\n    });\r\n  }\r\n\r\n  handleExportAsUrlClose = () => {\r\n    this.setState({\r\n      exportAsUrlDialogIsOpen: false,\r\n    });\r\n  }\r\n\r\n  handleExportAsSvgClose = () => {\r\n    this.setState({\r\n      exportAsSvgDialogIsOpen: false,\r\n    });\r\n  }\r\n\r\n  handleUndoButtonClick = () => {\r\n    this.undo();\r\n  }\r\n\r\n  handleRedoButtonClick = () => {\r\n    this.redo();\r\n  }\r\n\r\n  handleMainMenuClose = () => {\r\n    this.setState({\r\n      mainMenuIsOpen: false,\r\n    });\r\n  }\r\n\r\n  handleHelpButtonClick = (anchorEl) => {\r\n    this.setState({\r\n      helpMenuIsOpen: true,\r\n      helpMenuAnchorEl: anchorEl,\r\n    });\r\n  }\r\n\r\n  handleHelpMenuClose = () => {\r\n    this.setState({\r\n      helpMenuIsOpen: false,\r\n    });\r\n  }\r\n\r\n  handleInsertButtonClick = () => {\r\n    this.setFocusIf('insertPanelsAreOpen', null, 'InsertPanels')\r\n    this.setPersistentState({\r\n      insertPanelsAreOpen: !this.state.insertPanelsAreOpen,\r\n    });\r\n  }\r\n\r\n  handleNodeFormatButtonClick = () => {\r\n    this.setFocusIf('nodeFormatDrawerIsOpen', null, 'NodeFormatDrawer')\r\n    this.setPersistentState({\r\n      nodeFormatDrawerIsOpen: !this.state.nodeFormatDrawerIsOpen,\r\n      edgeFormatDrawerIsOpen: false,\r\n      goalDescriptionDrawerIsOpen: false,\r\n    });\r\n  }\r\n\r\n  handleNodeFormatDrawerClose = () => {\r\n    this.setPersistentState({\r\n      nodeFormatDrawerIsOpen: false,\r\n    });\r\n    this.setFocus(null);\r\n  }\r\n\r\n  handleEdgeFormatButtonClick = () => {\r\n    this.setFocusIf('edgeFormatDrawerIsOpen', null, 'EdgeFormatDrawer')\r\n    this.setPersistentState({\r\n      nodeFormatDrawerIsOpen: false,\r\n      edgeFormatDrawerIsOpen: !this.state.edgeFormatDrawerIsOpen,\r\n      goalDescriptionDrawerIsOpen: false,\r\n    });\r\n  }\r\n\r\n  handleEdgeFormatDrawerClose = () => {\r\n    this.setPersistentState({\r\n      edgeFormatDrawerIsOpen: false,\r\n    });\r\n    this.setFocus(null);\r\n  }\r\n\r\n  handleGoalDescriptionButtonClick = () => {\r\n    this.setFocusIf('goalDescriptionDrawerIsOpen', null, 'GaolDescriptionDrawer');\r\n    this.setPersistentState({\r\n      nodeFormatDrawerIsOpen: false,\r\n      edgeFormatDrawerIsOpen: false,\r\n      goalDescriptionDrawerIsOpen: !this.state.goalDescriptionDrawerIsOpen,\r\n    });\r\n  }\r\n\r\n  handleGoalDescriptionDrawerClose = () => {\r\n    this.setPersistentState({\r\n     goalDescriptionDrawerIsOpen: false,\r\n    });\r\n    this.setFocus(null);\r\n  }\r\n\r\n  handleSettingsClick = () => {\r\n    this.setState({\r\n      settingsDialogIsOpen: true,\r\n    });\r\n  }\r\n\r\n  handleSettingsClose = () => {\r\n    this.setState({\r\n      settingsDialogIsOpen: false,\r\n    });\r\n  }\r\n\r\n  handleOpenFromBrowserClick = () => {\r\n    this.setState({\r\n      openFromBrowserDialogIsOpen: true,\r\n    });\r\n  }\r\n\r\n  handleOpenFromBrowserClose = () => {\r\n    this.setState({\r\n      openFromBrowserDialogIsOpen: false,\r\n    });\r\n  }\r\n\r\n  handleOpenFromBrowser = (newCurrentName) => {\r\n    const currentName = this.state.name;\r\n    if (newCurrentName !== currentName) {\r\n      this.setPersistentState(state => {\r\n        const projects = {...state.projects};\r\n        if (currentName) {\r\n          const currentProject = {\r\n            dotSrc: state.dotSrc,\r\n            dotSrcLastChangeTime: state.dotSrcLastChangeTime,\r\n            svg: this.getSvgString(),\r\n          };\r\n          projects[currentName] = currentProject;\r\n        }\r\n        const newCurrentProject = projects[newCurrentName];\r\n        delete projects[newCurrentName];\r\n        this.disableDotSrcLastChangeTimeUpdate = true;\r\n        return {\r\n          name: newCurrentName,\r\n          ...newCurrentProject,\r\n          projects: projects,\r\n        }\r\n      });\r\n      this.resetUndoAtNextTextChange = true;\r\n    }\r\n    this.handleOpenFromBrowserClose();\r\n  }\r\n\r\n  createUntitledName = (projects, currentName) => {\r\n    const baseName = 'Untitled Graph';\r\n    let newName = baseName;\r\n    while (projects[newName] || newName === currentName) {\r\n      newName = baseName + ' ' + (+newName.replace(baseName, '') + 1);\r\n    }\r\n    return newName;\r\n  }\r\n\r\n  handleOpenFromBrowserDelete = (nameToDelete) => {\r\n    this.setPersistentState((state) => {\r\n      const currentName = state.name;\r\n      if (nameToDelete === currentName) {\r\n        return {\r\n          name: '',\r\n          dotSrc: '',\r\n          dotSrcLastChangeTime: Date.now(),\r\n        }\r\n      } else {\r\n        const projects = {...state.projects};\r\n        delete projects[nameToDelete];\r\n        return {\r\n          projects: projects,\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  handleSaveAsToBrowserClick = () => {\r\n    this.setState({\r\n      rename: false,\r\n      saveToBrowserAsDialogIsOpen: true,\r\n    });\r\n  }\r\n\r\n  handleSaveAsToBrowserClose = () => {\r\n    this.setState({\r\n      saveToBrowserAsDialogIsOpen: false,\r\n    });\r\n  }\r\n\r\n  handleSaveAsToBrowser = (newName, newDotSrc) => {\r\n    const currentName = this.state.name;\r\n    if (newName !== currentName) {\r\n      this.setPersistentState((state) => {\r\n        const projects = {...state.projects};\r\n        delete projects[newName];\r\n        if (currentName && !state.rename) {\r\n          const currentProject = {\r\n            dotSrc: this.state.dotSrc,\r\n            dotSrcLastChangeTime: state.dotSrcLastChangeTime,\r\n            svg: this.getSvgString(),\r\n          };\r\n          projects[currentName] = currentProject;\r\n        }\r\n        return {\r\n          projects: {\r\n            ...projects,\r\n          },\r\n          name: newName,\r\n          dotSrc: newDotSrc ? newDotSrc : (newName ? state.dotSrc : ''),\r\n          dotSrcLastChangeTime: newDotSrc ? Date.now() : state.dotSrcLastChangeTime,\r\n        };\r\n      });\r\n    }\r\n    this.handleSaveAsToBrowserClose();\r\n  }\r\n\r\n  handleEngineSelectChange = (engine) => {\r\n    this.setPersistentState({\r\n      engine: engine,\r\n    });\r\n  }\r\n\r\n  handleFitGraphSwitchChange = (fitGraph) => {\r\n    this.setPersistentState({\r\n      fitGraph: fitGraph,\r\n    });\r\n  }\r\n\r\n  handleTransitionDurationChange = (transitionDuration) => {\r\n    this.setPersistentState({\r\n      transitionDuration: transitionDuration,\r\n    });\r\n  }\r\n\r\n  handleTweenPathsSwitchChange = (tweenPaths) => {\r\n    this.setPersistentState({\r\n      tweenPaths: tweenPaths,\r\n    });\r\n  }\r\n\r\n  handleTweenShapesSwitchChange = (tweenShapes) => {\r\n    this.setPersistentState({\r\n      tweenShapes: tweenShapes,\r\n    });\r\n  }\r\n\r\n  handleTweenPrecisionChange = (tweenPrecision) => {\r\n    this.setPersistentState({\r\n      tweenPrecision: tweenPrecision,\r\n    });\r\n  }\r\n\r\n  handleHoldOffChange = (holdOff) => {\r\n    this.setPersistentState({\r\n      holdOff: holdOff,\r\n    });\r\n  }\r\n\r\n  handleFontSizeChange = (fontSize) => {\r\n    this.setPersistentState({\r\n      fontSize: fontSize,\r\n    });\r\n  }\r\n\r\n  handleTabSizeChange = (tabSize) => {\r\n    this.setPersistentState({\r\n      tabSize: tabSize,\r\n    });\r\n  }\r\n\r\n  handleNodeStyleChange = (style) => {\r\n    this.setPersistentState(state => ({\r\n      defaultNodeAttributes: {\r\n          ...state.defaultNodeAttributes,\r\n        style: style,\r\n      },\r\n    }));\r\n  }\r\n\r\n  handleNodeColorChange = (color) => {\r\n    this.setPersistentState(state => ({\r\n      defaultNodeAttributes: {\r\n          ...state.defaultNodeAttributes,\r\n        color: color,\r\n      },\r\n    }));\r\n  }\r\n\r\n  handleNodeFillColorChange = (color) => {\r\n    this.setPersistentState(state => ({\r\n      defaultNodeAttributes: {\r\n          ...state.defaultNodeAttributes,\r\n        fillcolor: color,\r\n      },\r\n    }));\r\n  }\r\n\r\n  handleEdgeStyleChange = (style) => {\r\n    this.setPersistentState(state => ({\r\n      defaultEdgeAttributes: {\r\n          ...state.defaultEdgeAttributes,\r\n        style: style,\r\n      },\r\n    }));\r\n  }\r\n\r\n  handleEdgeColorChange = (color) => {\r\n    this.setPersistentState(state => ({\r\n      defaultEdgeAttributes: {\r\n          ...state.defaultEdgeAttributes,\r\n        color: color,\r\n      },\r\n    }));\r\n  }\r\n\r\n  handleEdgeFillColorChange = (color) => {\r\n    this.setPersistentState(state => ({\r\n      defaultEdgeAttributes: {\r\n          ...state.defaultEdgeAttributes,\r\n        fillcolor: color,\r\n      },\r\n    }));\r\n  }\r\n\r\n  handleKeyboardShortcutsClick = () => {\r\n    this.setState({\r\n      keyboardShortcutsDialogIsOpen: true,\r\n    });\r\n  }\r\n\r\n  handleKeyboardShortcutsDialogClose = () => {\r\n    this.setState({\r\n      keyboardShortcutsDialogIsOpen: false,\r\n    });\r\n  }\r\n\r\n  handleMouseOperationsClick = () => {\r\n    this.setState({\r\n      mouseOperationsDialogIsOpen: true,\r\n    });\r\n  }\r\n\r\n  handleMouseOperationsDialogClose = () => {\r\n    this.setState({\r\n      mouseOperationsDialogIsOpen: false,\r\n    });\r\n  }\r\n\r\n  handleAboutClick = () => {\r\n    this.setState({\r\n      aboutDialogIsOpen: true,\r\n    });\r\n  }\r\n\r\n  handleAboutDialogClose = () => {\r\n    this.setState({\r\n      aboutDialogIsOpen: false,\r\n    });\r\n  }\r\n\r\n  registerNodeShapeClick = (handleNodeShapeClick) => {\r\n    this.handleNodeShapeClick = handleNodeShapeClick;\r\n  }\r\n\r\n  registerNodeShapeDragStart = (handleNodeShapeDragStart) => {\r\n    this.handleNodeShapeDragStart = handleNodeShapeDragStart;\r\n  }\r\n\r\n  registerNodeShapeDragEnd = (handleNodeShapeDragEnd) => {\r\n    this.handleNodeShapeDragEnd = handleNodeShapeDragEnd;\r\n  }\r\n\r\n  handleZoomInButtonClick = () => {}\r\n  handleZoomOutButtonClick = () => {}\r\n  handleZoomOutMapButtonClick = () => {}\r\n  handleZoomResetButtonClick = () => {}\r\n\r\n  registerZoomInButtonClick = (handleZoomInButtonClick) => {\r\n    this.handleZoomInButtonClick = handleZoomInButtonClick;\r\n  }\r\n\r\n  registerZoomOutButtonClick = (handleZoomOutButtonClick) => {\r\n    this.handleZoomOutButtonClick = handleZoomOutButtonClick;\r\n  }\r\n\r\n  registerZoomOutMapButtonClick = (handleZoomOutMapButtonClick) => {\r\n    this.handleZoomOutMapButtonClick = handleZoomOutMapButtonClick;\r\n  }\r\n\r\n  registerZoomResetButtonClick = (handleZoomResetButtonClick) => {\r\n    this.handleZoomResetButtonClick = handleZoomResetButtonClick;\r\n  }\r\n\r\n  registerGetSvg = (getSvg) => {\r\n    this.getSvg = getSvg;\r\n  }\r\n\r\n  getSvgString() {\r\n    const svg = this.getSvg();\r\n    const serializer = new XMLSerializer();\r\n    return svg ? serializer.serializeToString(svg) : this.state.svg;\r\n  }\r\n\r\n  handleGraphComponentSelect = (components) => {\r\n    this.setState({\r\n      selectedGraphComponents: components,\r\n    });\r\n  }\r\n\r\n  handleGraphInitialized = () => {\r\n    this.setState({\r\n      graphInitialized: true,\r\n    });\r\n    this.setPersistentState({\r\n      svg: this.getSvgString(),\r\n    });\r\n  }\r\n\r\n  handleError = (error) => {\r\n    if (error) {\r\n      error.numLines = this.state.dotSrc.split('\\n').length;\r\n    }\r\n    if (JSON.stringify(error) !== JSON.stringify(this.state.error)) {\r\n      this.setState({\r\n        error: error,\r\n      });\r\n    }\r\n  }\r\n\r\n  registerUndo = (undo) => {\r\n    this.undo = undo;\r\n  }\r\n\r\n  registerRedo = (redo) => {\r\n    this.redo = redo;\r\n  }\r\n\r\n  registerUndoReset = (resetUndoStack) => {\r\n    this.resetUndoStack = resetUndoStack;\r\n  }\r\n\r\n  handleTextEditorFocus = () => {\r\n    this.setFocus('TextEditor');\r\n  }\r\n\r\n  handleTextEditorBlur = () => {\r\n    // Needed when the user clicks outside of a pane,\r\n    // e.g. the app bar or the background\r\n    this.setFocusIfFocusIs('TextEditor', null);\r\n  }\r\n\r\n  handleGraphFocus = () => {\r\n    this.setFocus('Graph');\r\n  }\r\n\r\n  handleInsertPanelsClick = () => {\r\n    this.setFocus('InsertPanels');\r\n  }\r\n\r\n  handleNodeFormatDrawerClick = () => {\r\n    this.setFocus('NodeFormatDrawer');\r\n    this.setFocusIf('nodeFormatDrawerIsOpen', 'NodeFormatDrawer', null)\r\n  }\r\n\r\n  handleEdgeFormatDrawerClick = () => {\r\n    this.setFocus('EdgeFormatDrawer');\r\n    this.setFocusIf('edgeFormatDrawerIsOpen', 'EdgeFormatDrawer', null)\r\n  }\r\n\r\n  handleGoalDescriptionDrawerClick = () => {\r\n    this.setFocus('GoalDescriptionDrawer');\r\n    this.setFocusIf('GoalDescriptionDrawerIsOpen', 'GoalDescriptionDrawer', null)\r\n  }\r\n\r\n  handleUpdatedSnackbarClose = () => {\r\n    this.setState({ \"updatedSnackbarIsOpen\": false });\r\n    this.setPersistentState({\r\n      \"version\": packageJSON.version,\r\n      \"graphvizVersion\": this.state.graphvizVersion,\r\n    })\r\n  }\r\n\r\n  setFocus = (focusedPane) => {\r\n    this.setState((state) => (state.focusedPane !== focusedPane && {\r\n      focusedPane: focusedPane,\r\n    }) || null);\r\n  }\r\n\r\n  setFocusIfFocusIs = (currentlyFocusedPane, newFocusedPane) => {\r\n    this.setState((state) => (state.focusedPane === currentlyFocusedPane && {\r\n      focusedPane: newFocusedPane,\r\n    }) || null);\r\n  }\r\n\r\n  setFocusIf = (stateProperty, focusedPaneIf, focusedPaneElse) => {\r\n    this.setState((state) => {\r\n      const focusedPane = state[stateProperty] ? focusedPaneIf: focusedPaneElse;\r\n      return (state.focusedPane !== focusedPane && {\r\n        focusedPane: focusedPane,\r\n      }) || null;\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n    const editorIsOpen = !this.state.nodeFormatDrawerIsOpen && !this.state.edgeFormatDrawerIsOpen && !this.state.goalDescriptionDrawerIsOpen;\r\n    const textEditorHasFocus = this.state.focusedPane === 'TextEditor';\r\n    const nodeFormatDrawerHasFocus = this.state.focusedPane === 'NodeFormatDrawer';\r\n    const edgeFormatDrawerHasFocus = this.state.focusedPane === 'EdgeFormatDrawer';\r\n    const goalDescriptionDrawerHasFocus = this.state.focusedPane === 'GoalDescriptionDrawer';\r\n    const insertPanelsHaveFocus = this.state.focusedPane === 'InsertPanels';\r\n    const graphHasFocus = this.state.focusedPane === 'Graph';\r\n    const leftPaneElevation = textEditorHasFocus || nodeFormatDrawerHasFocus || edgeFormatDrawerHasFocus || goalDescriptionDrawerHasFocus ? focusedElevation : defaultElevation;\r\n    const rightPaneElevation = graphHasFocus ? focusedElevation : defaultElevation;\r\n    const midPaneElevation = insertPanelsHaveFocus ? focusedElevation : defaultElevation;\r\n\r\n    var columns;\r\n    if (this.state.insertPanelsAreOpen && this.state.graphInitialized) {\r\n      columns = {\r\n        textEditor: 3,\r\n        insertPanels: 3,\r\n        graph: 6,\r\n      }\r\n    } else { /* browse */\r\n      columns = {\r\n        textEditor: 6,\r\n        insertPanels: false,\r\n        graph: 6,\r\n      }\r\n    }\r\n    const paperClass = this.state.updatedSnackbarIsOpen ? classes.paperWhenUpdatedSnackbarIsOpen : classes.paper;\r\n    return (\r\n      <div className={classes.root}>\r\n            <script src={process.env.PUBLIC_URL.replace(/\\.$/, '') + \"@hpcc-js/wasm/dist/index.min.js\"} type=\"javascript/worker\"></script>\r\n        <ButtonAppBar\r\n          hasUndo={this.state.hasUndo}\r\n          hasRedo={this.state.hasRedo}\r\n          onMenuButtonClick={this.handleMainMenuButtonClick}\r\n          onNewButtonClick={this.handleNewClick}\r\n          onUndoButtonClick={this.handleUndoButtonClick}\r\n          onRedoButtonClick={this.handleRedoButtonClick}\r\n          onInsertClick={this.handleInsertButtonClick}\r\n          onNodeFormatClick={this.handleNodeFormatButtonClick}\r\n          onEdgeFormatClick={this.handleEdgeFormatButtonClick}\r\n          onGoalDescriptionClick={this.handleGoalDescriptionButtonClick}\r\n          onZoomInButtonClick={this.handleZoomInButtonClick}\r\n          onZoomOutButtonClick={this.handleZoomOutButtonClick}\r\n          onZoomOutMapButtonClick={this.handleZoomOutMapButtonClick}\r\n          onZoomResetButtonClick={this.handleZoomResetButtonClick}\r\n          onSettingsButtonClick={this.handleSettingsClick}\r\n          onOpenInBrowserButtonClick={this.handleOpenFromBrowserClick}\r\n          onSaveAltButtonClick={this.handleSaveAsToBrowserClick}\r\n          onHelpButtonClick={this.handleHelpButtonClick}\r\n        >\r\n        </ButtonAppBar>\r\n        {this.state.mainMenuIsOpen &&\r\n          <MainMenu\r\n            anchorEl={this.state.mainMenuAnchorEl}\r\n            onMenuClose={this.handleMainMenuClose}\r\n            onSettingsClick={this.handleSettingsClick}\r\n            onOpenFromBrowserClick={this.handleOpenFromBrowserClick}\r\n            onSaveAsToBrowserClick={this.handleSaveAsToBrowserClick}\r\n            onNewClick={this.handleNewClick}\r\n            onRenameClick={this.handleRenameClick}\r\n            onExportAsUrlClick={this.handleExportAsUrlClick}\r\n            onExportAsSvgClick={this.handleExportAsSvgClick}\r\n          />\r\n        }\r\n        {this.state.settingsDialogIsOpen &&\r\n          <SettingsDialog\r\n            engine={this.state.engine}\r\n            fitGraph={this.state.fitGraph}\r\n            transitionDuration={this.state.transitionDuration}\r\n            tweenPaths={this.state.tweenPaths}\r\n            tweenShapes={this.state.tweenShapes}\r\n            tweenPrecision={this.state.tweenPrecision}\r\n            onEngineSelectChange={this.handleEngineSelectChange}\r\n            onFitGraphSwitchChange={this.handleFitGraphSwitchChange}\r\n            onTransitionDurationChange={this.handleTransitionDurationChange}\r\n            onTweenPathsSwitchChange={this.handleTweenPathsSwitchChange}\r\n            onTweenShapesSwitchChange={this.handleTweenShapesSwitchChange}\r\n            onTweenPrecisionChange={this.handleTweenPrecisionChange}\r\n            holdOff={this.state.holdOff}\r\n            onHoldOffChange={this.handleHoldOffChange}\r\n            fontSize={this.state.fontSize}\r\n            onFontSizeChange={this.handleFontSizeChange}\r\n            tabSize={this.state.tabSize}\r\n            onTabSizeChange={this.handleTabSizeChange}\r\n            onSettingsClose={this.handleSettingsClose}\r\n          />\r\n        }\r\n        {this.state.openFromBrowserDialogIsOpen &&\r\n          <OpenFromBrowserDialog\r\n            projects={this.state.projects}\r\n            dotSrc={this.state.dotSrc}\r\n            dotSrcLastChangeTime={this.state.dotSrcLastChangeTime}\r\n            svg={this.getSvgString()}\r\n            name={this.state.name}\r\n            onOpen={this.handleOpenFromBrowser}\r\n            onClose={this.handleOpenFromBrowserClose}\r\n            onDelete={this.handleOpenFromBrowserDelete}\r\n          />\r\n        }\r\n        {this.state.saveToBrowserAsDialogIsOpen &&\r\n          <SaveAsToBrowserDialog\r\n            name={this.state.name}\r\n            rename={this.state.rename}\r\n            defaultNewName={this.state.name || this.createUntitledName(this.state.projects)}\r\n            projects={this.state.projects}\r\n            onSave={this.handleSaveAsToBrowser}\r\n            onClose={this.handleSaveAsToBrowserClose}\r\n          />\r\n        }\r\n        {this.state.exportAsUrlDialogIsOpen &&\r\n          <ExportAsUrlDialog\r\n            URL={window.location.href + '?' + qs_stringify({dot: this.state.dotSrc})}\r\n            onClose={this.handleExportAsUrlClose}\r\n          />\r\n        }\r\n        {this.state.exportAsSvgDialogIsOpen &&\r\n          <ExportAsSvgDialog\r\n            defaultFilename={(this.state.name || this.createUntitledName(this.state.projects)) + '.svg'}\r\n            getSvgString={this.getSvgString.bind(this)}\r\n            onClose={this.handleExportAsSvgClose}\r\n          />\r\n        }\r\n        {this.state.updatedSnackbarIsOpen &&\r\n          <UpdatedSnackbar\r\n            newGraphvizVersion={this.state.newGraphvizVersion}\r\n            graphvizVersion={this.state.graphvizVersion}\r\n            onUpdatedSnackbarClose={this.handleUpdatedSnackbarClose}\r\n          />\r\n        }\r\n        <Grid container\r\n          spacing={3}\r\n          style={{\r\n            margin: 0,\r\n            width: '100%',\r\n          }}\r\n        >\r\n          <Grid item xs={columns.textEditor}>\r\n            <Paper elevation={leftPaneElevation} className={paperClass}>\r\n              {this.state.nodeFormatDrawerIsOpen &&\r\n                <FormatDrawer\r\n                  type='node'\r\n                  defaultAttributes={this.state.defaultNodeAttributes}\r\n                  onClick={this.handleNodeFormatDrawerClick}\r\n                  onFormatDrawerClose={this.handleNodeFormatDrawerClose}\r\n                  onStyleChange={this.handleNodeStyleChange}\r\n                  onColorChange={this.handleNodeColorChange}\r\n                  onFillColorChange={this.handleNodeFillColorChange}\r\n                />\r\n              }\r\n              {this.state.edgeFormatDrawerIsOpen &&\r\n                <FormatDrawer\r\n                  type='edge'\r\n                  defaultAttributes={this.state.defaultEdgeAttributes}\r\n                  onClick={this.handleEdgeFormatDrawerClick}\r\n                  onFormatDrawerClose={this.handleEdgeFormatDrawerClose}\r\n                  onStyleChange={this.handleEdgeStyleChange}\r\n                  onColorChange={this.handleEdgeColorChange}\r\n                  onFillColorChange={this.handleEdgeFillColorChange}\r\n                />\r\n              }\r\n              {this.state.goalDescriptionDrawerIsOpen &&\r\n                <DescriptionDrawer\r\n                  goalDescription={this.state.goalDescription}\r\n                  onClick={this.handleGoalDescriptionDrawerClick}\r\n                  onDescriptionDrawerClose={this.handleGoalDescriptionDrawerClose}\r\n                  onTextChange={this.handleGoalDescriptionChange}\r\n                />\r\n              }\r\n              <div style={{display: editorIsOpen ? 'block' : 'none'}}>\r\n                <TextEditor\r\n                  // allocated viewport width - 2 * padding\r\n                  width={`calc(${columns.textEditor * 100 / 12}vw - 2 * 12px)`}\r\n                  height={`calc(100vh - 64px - 2 * 12px - ${this.updatedSnackbarIsOpen ? \"64px\" : \"0px\"})`}\r\n                  dotSrc={this.state.dotSrc}\r\n                  onTextChange={this.handleTextChange}\r\n                  onFocus={this.handleTextEditorFocus}\r\n                  onBlur={this.handleTextEditorBlur}\r\n                  error={this.state.error}\r\n                  selectedGraphComponents={this.state.selectedGraphComponents}\r\n                  holdOff={this.state.holdOff}\r\n                  fontSize={this.state.fontSize}\r\n                  tabSize={this.state.tabSize}\r\n                  registerUndo={this.registerUndo}\r\n                  registerRedo={this.registerRedo}\r\n                  registerUndoReset={this.registerUndoReset}\r\n                />\r\n              </div>\r\n            </Paper>\r\n          </Grid>\r\n          {this.state.insertPanelsAreOpen && this.state.graphInitialized && (\r\n            <Grid item xs={columns.insertPanels}>\r\n              <Paper elevation={midPaneElevation} className={paperClass}>\r\n                <InsertPanels\r\n                    onClick={this.handleInsertPanelsClick}\r\n                    onNodeShapeClick={this.handleNodeShapeClick}\r\n                    onNodeShapeDragStart={this.handleNodeShapeDragStart}\r\n                    onNodeShapeDragEnd={this.handleNodeShapeDragEnd}\r\n                />\r\n              </Paper>\r\n            </Grid>\r\n          )}\r\n          <Grid item xs={columns.graph}>\r\n            <Paper elevation={rightPaneElevation} className={paperClass}>\r\n              <Graph\r\n                hasFocus={graphHasFocus}\r\n                dotSrc={this.state.dotSrc}\r\n                engine={this.state.engine}\r\n                fit={this.state.fitGraph}\r\n                transitionDuration={this.state.transitionDuration}\r\n                tweenPaths={this.state.tweenPaths}\r\n                tweenShapes={this.state.tweenShapes}\r\n                tweenPrecision={this.state.tweenPrecision}\r\n                defaultNodeAttributes={this.state.defaultNodeAttributes}\r\n                defaultEdgeAttributes={this.state.defaultEdgeAttributes}\r\n                onFocus={this.handleGraphFocus}\r\n                onTextChange={this.handleTextChange}\r\n                onHelp={this.handleKeyboardShortcutsClick}\r\n                onSelect={this.handleGraphComponentSelect}\r\n                onUndo={this.undo}\r\n                onRedo={this.redo}\r\n                registerNodeShapeClick={this.registerNodeShapeClick}\r\n                registerNodeShapeDragStart={this.registerNodeShapeDragStart}\r\n                registerNodeShapeDragEnd={this.registerNodeShapeDragEnd}\r\n                registerZoomInButtonClick={this.registerZoomInButtonClick}\r\n                registerZoomOutButtonClick={this.registerZoomOutButtonClick}\r\n                registerZoomOutMapButtonClick={this.registerZoomOutMapButtonClick}\r\n                registerZoomResetButtonClick={this.registerZoomResetButtonClick}\r\n                registerGetSvg={this.registerGetSvg}\r\n                onInitialized={this.handleGraphInitialized}\r\n                onError={this.handleError}\r\n                test={this.state.test}\r\n              />\r\n            </Paper>\r\n          </Grid>\r\n        </Grid>\r\n        {this.state.helpMenuIsOpen &&\r\n          <HelpMenu\r\n            anchorEl={this.state.helpMenuAnchorEl}\r\n            onMenuClose={this.handleHelpMenuClose}\r\n            onKeyboardShortcutsClick={this.handleKeyboardShortcutsClick}\r\n            onMouseOperationsClick={this.handleMouseOperationsClick}\r\n            onAboutClick={this.handleAboutClick}\r\n          />\r\n        }\r\n        {this.state.keyboardShortcutsDialogIsOpen &&\r\n          <KeyboardShortcutsDialog\r\n            onKeyboardShortcutsDialogClose={this.handleKeyboardShortcutsDialogClose}\r\n          />\r\n        }\r\n        {this.state.mouseOperationsDialogIsOpen &&\r\n          <MouseOperationsDialog\r\n            onMouseOperationsDialogClose={this.handleMouseOperationsDialogClose}\r\n          />\r\n        }\r\n        {this.state.aboutDialogIsOpen &&\r\n          <AboutDialog\r\n            graphvizVersion={this.state.graphvizVersion}\r\n            onAboutDialogClose={this.handleAboutDialogClose}\r\n          />\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nIndex.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withRoot(withStyles(styles)(Index));"]},"metadata":{},"sourceType":"module"}